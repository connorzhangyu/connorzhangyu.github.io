<!doctype html><html lang=zh><head><title>Spring :: Hello World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=../../categories/spring/><link rel=stylesheet href=../../styles.css><link rel="shortcut icon" href=../../img/theme-colors/orange.png><link rel=apple-touch-icon href=../../img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content><meta property="og:locale" content="zh"><meta property="og:type" content="website"><meta property="og:title" content="Spring"><meta property="og:description" content><meta property="og:url" content="/categories/spring/"><meta property="og:site_name" content="Hello World"><meta property="og:image" content="/img/favicon/orange.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><link href=../../categories/spring/index.xml rel=alternate type=application/rss+xml title="Hello World"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=../../><div class=logo>康纳的记仇小本本</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=../../about>关于</a></li><li><a href=../../showcase>精选</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=../../about>关于</a></li><li><a href=../../showcase>精选</a></li></ul></nav></header><div class=content><h1>Posts for: #Spring</h1><div class=posts><article class="post on-list"><h1 class=post-title><a href=../../posts/spring/>Spring</a></h1><div class=post-meta><time class=post-date>2023-08-25</time><span class=post-author>Anthony</span></div><span class=post-tags>#<a href=../../tags/java/>Java</a>&nbsp;
</span><img src=https://image.runtimes.cc/202404051534866.png class=post-cover alt=Spring title="Cover Image"><div class=post-content><h1 id=springmvc>SpringMVC</h1><p><img src=https://image.runtimes.cc/202404051458028.png alt></p><p>总结：</p><ol><li>首先请求进入DispatcherServlet 由DispatcherServlet 从HandlerMappings中提取对应的Handler。</li><li>2.此时只是获取到了对应的Handle，然后得去寻找对应的适配器，即：HandlerAdapter。</li><li>拿到对应HandlerAdapter时，这时候开始调用对应的Handler处理业务逻辑了。 （这时候实际上已经执行完了我们的Controller） 执行完成之后返回一个ModeAndView</li><li>这时候交给我们的ViewResolver通过视图名称查找出对应的视图然后返回。</li><li>最后 渲染视图 返回渲染后的视图 &ndash;>响应请求。</li></ol><h2 id=初始化过程>初始化过程</h2><p>version 5.3.8</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// org.springframework.web.servlet.HttpServletBean#init</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span>() <span style=color:#66d9ef>throws</span> ServletException {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 子类实现,初始化web环境</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// Let subclasses do whatever initialization they like.</span>
</span></span><span style=display:flex><span>  initServletBean();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// org.springframework.web.servlet.FrameworkServlet#initServletBean</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>initServletBean</span>() <span style=color:#66d9ef>throws</span> ServletException {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 初始化spring上下文</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>webApplicationContext</span> <span style=color:#f92672>=</span> initWebApplicationContext();
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 子类实现</span>
</span></span><span style=display:flex><span>    initFrameworkServlet();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// org.springframework.web.servlet.FrameworkServlet#initWebApplicationContext</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>protected</span> WebApplicationContext <span style=color:#a6e22e>initWebApplicationContext</span>() {
</span></span><span style=display:flex><span>		WebApplicationContext rootContext <span style=color:#f92672>=</span>
</span></span><span style=display:flex><span>				WebApplicationContextUtils.<span style=color:#a6e22e>getWebApplicationContext</span>(getServletContext());
</span></span><span style=display:flex><span>		WebApplicationContext wac <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>webApplicationContext</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// A context instance was injected at construction time -&gt; use it</span>
</span></span><span style=display:flex><span>			wac <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>webApplicationContext</span>;
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>if</span> (wac <span style=color:#66d9ef>instanceof</span> ConfigurableWebApplicationContext) {
</span></span><span style=display:flex><span>				ConfigurableWebApplicationContext cwac <span style=color:#f92672>=</span> (ConfigurableWebApplicationContext) wac;
</span></span><span style=display:flex><span>				<span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span>cwac.<span style=color:#a6e22e>isActive</span>()) {
</span></span><span style=display:flex><span>					<span style=color:#75715e>// The context has not yet been refreshed -&gt; provide services such as</span>
</span></span><span style=display:flex><span>					<span style=color:#75715e>// setting the parent context, setting the application context id, etc</span>
</span></span><span style=display:flex><span>					<span style=color:#66d9ef>if</span> (cwac.<span style=color:#a6e22e>getParent</span>() <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>						<span style=color:#75715e>// The context instance was injected without an explicit parent -&gt; set</span>
</span></span><span style=display:flex><span>						<span style=color:#75715e>// the root application context (if any; may be null) as the parent</span>
</span></span><span style=display:flex><span>						cwac.<span style=color:#a6e22e>setParent</span>(rootContext);
</span></span><span style=display:flex><span>					}
</span></span><span style=display:flex><span>          
</span></span><span style=display:flex><span>          <span style=color:#75715e>//配置和刷新spring容器（重要）</span>
</span></span><span style=display:flex><span>					<span style=color:#75715e>//这个无非就是初始化spring ioc的环境，创建bean和实例化bean等操作</span>
</span></span><span style=display:flex><span>					<span style=color:#75715e>//这个方法最终也是调用refresh()方法，已在spring源码解析中解析过了</span>
</span></span><span style=display:flex><span>					configureAndRefreshWebApplicationContext(cwac);
</span></span><span style=display:flex><span>				}
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (wac <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// No context instance was injected at construction time -&gt; see if one</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// has been registered in the servlet context. If one exists, it is assumed</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// that the parent context (if any) has already been set and that the</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// user has performed any initialization such as setting the context id</span>
</span></span><span style=display:flex><span>			wac <span style=color:#f92672>=</span> findWebApplicationContext();
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (wac <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// No context instance is defined for this servlet -&gt; create a local one</span>
</span></span><span style=display:flex><span>			wac <span style=color:#f92672>=</span> createWebApplicationContext(rootContext);
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>refreshEventReceived</span>) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Either the context is not a ConfigurableApplicationContext with refresh</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// support or the context injected at construction time had already been</span>
</span></span><span style=display:flex><span>			<span style=color:#75715e>// refreshed -&gt; trigger initial onRefresh manually here.</span>
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>synchronized</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>onRefreshMonitor</span>) {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 初始化DispatcherServlet的配置initStrategies()</span>
</span></span><span style=display:flex><span>				onRefresh(wac);
</span></span><span style=display:flex><span>			}
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> (<span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>publishContext</span>) {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// Publish the context as a servlet context attribute.</span>
</span></span><span style=display:flex><span>			String attrName <span style=color:#f92672>=</span> getServletContextAttributeName();
</span></span><span style=display:flex><span>			getServletContext().<span style=color:#a6e22e>setAttribute</span>(attrName, wac);
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> wac;
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// org.springframework.web.servlet.DispatcherServlet#onRefresh	</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>protected</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>onRefresh</span>(ApplicationContext context) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// //初始化springmvc的配置</span>
</span></span><span style=display:flex><span>		initStrategies(context);
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><p>总体流程:</p></div><div><a class="read-more button" href=../../posts/spring/>Read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=../../posts/springboot/>SpringBoot</a></h1><div class=post-meta><time class=post-date>2023-07-15</time><span class=post-author>Anthony</span></div><span class=post-tags>#<a href=../../tags/java/>Java</a>&nbsp;
</span><img src=https://image.runtimes.cc/202404051534895.png class=post-cover alt=SpringBoot title="Cover Image"><div class=post-content><h1 id=定时器>定时器</h1><p>定时器的数值放到配置文件,如果使用<code>@Scheduled(fixedDelay = 类中的变量)</code>这种方式试过不行</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Scheduled</span>(fixedDelayString <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;${fixedDelayString}&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>open</span>() {
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>fixedDelayString</span><span style=color:#f92672>=</span><span style=color:#e6db74>30000</span>
</span></span></code></pre></div><h1 id=rocketmq>RocketMQ</h1><p>下载源码或者二进制包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 源码安装</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 解压文件</span>
</span></span><span style=display:flex><span>unzip rocketmq-all-5.2.0-source-release.zip
</span></span><span style=display:flex><span>cd rocketmq-all-5.2.0-source-release/
</span></span><span style=display:flex><span><span style=color:#75715e># 编译</span>
</span></span><span style=display:flex><span>mvn -Prelease-all -DskipTests -Dspotbugs.skip<span style=color:#f92672>=</span>true clean install -U
</span></span><span style=display:flex><span><span style=color:#75715e># 编译后的二进制的目录,配置文件在这里</span>
</span></span><span style=display:flex><span>cd ./distribution
</span></span></code></pre></div><p>修改配置文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 修改配置文件</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 修改内存配置,虚拟机的内存太小了</span>
</span></span><span style=display:flex><span><span style=color:#75715e># vim ./bin/runserver.sh</span>
</span></span><span style=display:flex><span>JAVA_OPT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>JAVA_OPT<span style=color:#e6db74>}</span><span style=color:#e6db74> -server -Xms512m -Xmx521m -Xmn256g -XX:MetaspaceSize=128m -XX:MaxMetaspaceSize=320m&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># vim ./bin/runbroker.sh</span>
</span></span><span style=display:flex><span>JAVA_OPT<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>JAVA_OPT<span style=color:#e6db74>}</span><span style=color:#e6db74> -server -Xms512m -Xmx512m&#34;</span>
</span></span></code></pre></div><p>启动</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># 第一步.启动Name Server</span>
</span></span><span style=display:flex><span>sh bin/mqnamesrv
</span></span><span style=display:flex><span>The Name Server boot success...
</span></span><span style=display:flex><span><span style=color:#75715e># 第二步.启动Broker</span>
</span></span><span style=display:flex><span>sh bin/mqbroker -n localhost:9876
</span></span><span style=display:flex><span> The broker<span style=color:#f92672>[</span>%s, 172.30.30.233:10911<span style=color:#f92672>]</span> boot success...
</span></span></code></pre></div><p>测试发送消息</p></div><div><a class="read-more button" href=../../posts/springboot/>Read more →</a></div></article><article class="post on-list"><h1 class=post-title><a href=../../posts/spring-security/>Spring Security</a></h1><div class=post-meta><time class=post-date>2022-11-19</time><span class=post-author>Anthony</span></div><span class=post-tags>#<a href=../../tags/spring-security/>Spring Security</a>&nbsp;
#<a href=../../tags/%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/>权限控制</a>&nbsp;
#<a href=../../tags/%E5%AE%89%E5%85%A8%E6%A1%86%E6%9E%B6/>安全框架</a>&nbsp;
#<a href=../../tags/spring/>Spring</a>&nbsp;
#<a href=../../tags/java/>Java</a>&nbsp;
</span><img src=https://image.runtimes.cc/202404051525605.jpg class=post-cover alt="Spring Security" title="Cover Image"><div class=post-content><h1 id=spring-security>Spring Security</h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>&lt;dependency&gt;
</span></span><span style=display:flex><span>    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
</span></span><span style=display:flex><span>    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
</span></span><span style=display:flex><span>&lt;/dependency&gt;
</span></span></code></pre></div><p>登录业务</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@Service</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LoginService</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Map<span style=color:#f92672>&lt;</span>String, RedisUser<span style=color:#f92672>&gt;</span> map <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashMap<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Resource</span>
</span></span><span style=display:flex><span>    AuthenticationManager authenticationManager;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>login</span>(SysUser sysUser) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// AuthenticationManager 进行用户认证</span>
</span></span><span style=display:flex><span>        UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> UsernamePasswordAuthenticationToken(sysUser.<span style=color:#a6e22e>getUsername</span>(), sysUser.<span style=color:#a6e22e>getPassword</span>());
</span></span><span style=display:flex><span>        Authentication authenticate <span style=color:#f92672>=</span> authenticationManager.<span style=color:#a6e22e>authenticate</span>(usernamePasswordAuthenticationToken);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 如果认证不通过,给出对应的提示</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (Objects.<span style=color:#a6e22e>isNull</span>(authenticate)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> RuntimeException(<span style=color:#e6db74>&#34;登录失败&#34;</span>);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 如果认证通过,使用username给jwt生成一个</span>
</span></span><span style=display:flex><span>        RedisUser principal <span style=color:#f92672>=</span> (RedisUser) authenticate.<span style=color:#a6e22e>getPrincipal</span>();
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>put</span>(principal.<span style=color:#a6e22e>getUsername</span>(), principal);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> createJWT(<span style=color:#e6db74>&#34;1234567&#34;</span>, 9990000,  principal.<span style=color:#a6e22e>getUsername</span>());
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>logout</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        UsernamePasswordAuthenticationToken authentication <span style=color:#f92672>=</span> (UsernamePasswordAuthenticationToken) SecurityContextHolder.<span style=color:#a6e22e>getContext</span>().<span style=color:#a6e22e>getAuthentication</span>();
</span></span><span style=display:flex><span>        RedisUser principal <span style=color:#f92672>=</span> (RedisUser) authentication.<span style=color:#a6e22e>getPrincipal</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        String username <span style=color:#f92672>=</span> principal.<span style=color:#a6e22e>getUsername</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 从redis里删除</span>
</span></span><span style=display:flex><span>        map.<span style=color:#a6e22e>remove</span>(username);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#a6e22e>@RestController</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@RequestMapping</span>(<span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LoginController</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Resource</span>
</span></span><span style=display:flex><span>    LoginService loginService;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/user/login&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>HashMap<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>login</span>(<span style=color:#a6e22e>@RequestParam</span>(<span style=color:#e6db74>&#34;username&#34;</span>) String username,<span style=color:#a6e22e>@RequestParam</span>(<span style=color:#e6db74>&#34;password&#34;</span>) String password){
</span></span><span style=display:flex><span>        SysUser sysUser <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> SysUser();
</span></span><span style=display:flex><span>        sysUser.<span style=color:#a6e22e>setUsername</span>(username);
</span></span><span style=display:flex><span>        sysUser.<span style=color:#a6e22e>setPassword</span>(password);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        HashMap<span style=color:#f92672>&lt;</span>String, Object<span style=color:#f92672>&gt;</span> stringObjectHashMap <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> HashMap<span style=color:#f92672>&lt;&gt;</span>();
</span></span><span style=display:flex><span>        stringObjectHashMap.<span style=color:#a6e22e>put</span>(<span style=color:#e6db74>&#34;token&#34;</span>, loginService.<span style=color:#a6e22e>login</span>(sysUser));
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>status</span>(200).<span style=color:#a6e22e>body</span>(stringObjectHashMap);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@PostMapping</span>(<span style=color:#e6db74>&#34;/user/logout&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>logout</span>(){
</span></span><span style=display:flex><span>        loginService.<span style=color:#a6e22e>logout</span>();
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>ok</span>(<span style=color:#e6db74>&#34;success&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>验证账户</p></div><div><a class="read-more button" href=../../posts/spring-security/>Read more →</a></div></article><div class=pagination><div class=pagination__buttons></div></div></div></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/mirus-ua/hugo-theme-re-terminal target=_blank>Theme</a> made by <a href=https://github.com/mirus-ua target=_blank>Mirus</a></span></div></div></footer><script type=text/javascript src=../../bundle.min.js></script></div></body></html>