<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>è®°å½• on Hello World</title><link>https://connorzhangyu.com/categories/%E8%AE%B0%E5%BD%95/</link><description>Recent content in è®°å½• on Hello World</description><generator>Hugo -- gohugo.io</generator><language>zh</language><lastBuildDate>Fri, 23 May 2025 17:59:24 +0000</lastBuildDate><atom:link href="https://connorzhangyu.com/categories/%E8%AE%B0%E5%BD%95/index.xml" rel="self" type="application/rss+xml"/><item><title>å¥½ç”¨çš„è½¯ä»¶</title><link>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/%E5%A5%BD%E7%94%A8%E7%9A%84%E8%BD%AF%E4%BB%B6/</link><pubDate>Fri, 23 May 2025 17:59:24 +0000</pubDate><guid>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/%E5%A5%BD%E7%94%A8%E7%9A%84%E8%BD%AF%E4%BB%B6/</guid><description>&lt;h1 id="å›¾ç‰‡">å›¾ç‰‡&lt;/h1>
&lt;p>æˆªå›¾è½¯ä»¶
&lt;a href="https://www.snipaste.com/">Snipaste&lt;/a>&lt;/p>
&lt;p>å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠ
&lt;a href="https://github.com/Molunerfinn/PicGo">PicGo&lt;/a>&lt;/p>
&lt;p>å½•å±è½¯ä»¶
&lt;a href="https://screenity.io/">Screenity&lt;/a>&lt;/p>
&lt;h1 id="æ–‡ä»¶">æ–‡ä»¶&lt;/h1>
&lt;p>&lt;a href="https://localsend.org/">LocalSend&lt;/a>&lt;/p></description><content>&lt;h1 id="å›¾ç‰‡">å›¾ç‰‡&lt;/h1>
&lt;p>æˆªå›¾è½¯ä»¶
&lt;a href="https://www.snipaste.com/">Snipaste&lt;/a>&lt;/p>
&lt;p>å›¾ç‰‡ä¸Šä¼ åˆ°å›¾åºŠ
&lt;a href="https://github.com/Molunerfinn/PicGo">PicGo&lt;/a>&lt;/p>
&lt;p>å½•å±è½¯ä»¶
&lt;a href="https://screenity.io/">Screenity&lt;/a>&lt;/p>
&lt;h1 id="æ–‡ä»¶">æ–‡ä»¶&lt;/h1>
&lt;p>&lt;a href="https://localsend.org/">LocalSend&lt;/a>&lt;/p></content></item><item><title>Mac AppleèŠ¯ç‰‡å®‰è£…Win11</title><link>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/mac-apple%E8%8A%AF%E7%89%87%E5%AE%89%E8%A3%85win11/</link><pubDate>Tue, 06 May 2025 15:09:33 +0000</pubDate><guid>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/mac-apple%E8%8A%AF%E7%89%87%E5%AE%89%E8%A3%85win11/</guid><description>&lt;h1 id="mac-appleèŠ¯ç‰‡å®‰è£…win11">Mac AppleèŠ¯ç‰‡å®‰è£…Win11&lt;/h1>
&lt;blockquote>
&lt;p>&lt;a href="https://blog.csdn.net/weixin_52799373/article/details/129658881">M1/M2 Pro VMware Fusionè™šæ‹Ÿæœºå®‰è£…Win11æ•™ç¨‹(è¶…è¯¦ç»†)_m1è£…win11_ä¸ƒç»´å¤§è„‘çš„åšå®¢-CSDNåšå®¢&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.csdn.net/m0_72489515/article/details/128036581">Mç”¨æˆ·ä½¿ç”¨VMè™šæ‹Ÿæœºå®‰è£…win11è¿žä¸ä¸Šç½‘ï¼Œæ€Žä¹ˆè§£å†³_mac_xwzçš„åšå®¢-CSDNåšå®¢&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051338314.png" alt="image-20240106171142746">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051338837.png" alt="image-20240106171214171">&lt;/p>
&lt;blockquote>
&lt;p>è®°å¾—è¦ä¸‹è½½ARMç‰ˆæœ¬çš„&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051338380.png" alt="image-20240106171222884">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051339250.png" alt="image-20240106171238651">&lt;/p>
&lt;p>è¿™é‡Œè®¾ç½®çš„å¯†ç ,åŽé¢ä¸ä¼šå†ç”¨äº†,å¯ä»¥è®¾ç½®ä¸ªç®€å•ç‚¹çš„å°±è¡Œ&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051339063.png" alt="image-20240106171316780">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051340279.png" alt="image-20240106171329023">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051340353.png" alt="image-20240106171353840">&lt;/p>
&lt;p>å†…å­˜è®¾ç½®4GB,ç¡¬ç›˜è®¾ç½®æˆ80GB&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051340025.png" alt="image-20240106171404594">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341339.png" alt="image-20240106171419408">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341466.png" alt="image-20240106171447630">&lt;/p>
&lt;p>è¿™é‡Œè¦å¿«é€ŸæŒ‰å›žè½¦,ä¸ç„¶å°±æç¤ºEFI Network,å¦‚æžœæ˜¯è¿™ä¸ªæç¤º,é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºå°±è¡Œ,ä¹‹åŽå°±æ˜¯æ­£å¸¸å®‰è£…Windowç³»ç»Ÿçš„æ­¥éª¤,ç„¶åŽå°±ä¼šé‡åˆ°è¿žæŽ¥åˆ°ç½‘ç»œçš„é—®é¢˜&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341301.png" alt="image-20240106172001913">&lt;/p>
&lt;p>&lt;code>Shift + F10&lt;/code>æ‰“å¼€å‘½ä»¤è¡Œ,è¾“å…¥&lt;code>OOBE\BYPASSNRO&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341481.png" alt="image-20240106174310837">&lt;/p>
&lt;p>ç„¶åŽç³»ç»Ÿå°±è¡Œå›žé‡å¯,ç„¶åŽåˆå›žåˆ°è®¾ç½®Windownçš„è®¾ç½®å¼€å§‹,è¿™æ˜¯æ­£å¸¸çš„,ç„¶åŽå°±ä¸€ç›´éƒ½æ˜¯é…ç½®,æ­£å¸¸é…ç½®å°±å¥½,é€‰æ‹©æ²¡æœ‰è¿žæŽ¥,å°±å¯ä»¥åˆ›å»ºæœ¬åœ°è´¦å·&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341581.png" alt="image-20240106174320712">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341019.png" alt="image-20240106174335945">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341025.png" alt="image-20240106174424437">&lt;/p>
&lt;p>å®‰è£…å®Œæˆä¹‹åŽ,æ˜¯æ²¡æœ‰ç½‘ç»œçš„,éœ€è¦å®‰è£…vm-tools&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051345365.png" alt="image-20240106174524696">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051346760.png" alt="image-20240106174545175">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051347491.png" alt="image-20240106174556748">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051348197.png" alt="image-20240106174616569">&lt;/p>
&lt;p>æ­£å¸¸å®‰è£…è½¯ä»¶çš„æ­¥éª¤å°±å¯ä»¥äº†&lt;/p>
&lt;h1 id="å›ºå®šip">å›ºå®šIP&lt;/h1>
&lt;p>é…ç½®å®Œäº†,æœ€å¥½æ˜¯é‡å¯ä¸‹vmwareå’Œè™šæ‹Ÿæœº,å’Œç¦ç”¨å¼€å¯ win10ä¸Šçš„vmare8ç½‘å¡&lt;/p>
&lt;p>1.vmareé…ç½®
&lt;img src="https://image.runtimes.cc/202404051348330.png" alt="">&lt;/p>
&lt;p>2.ç”µè„‘é…ç½®,è™šæ‹Ÿæœºé…ç½®&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051349925.png" alt="">&lt;/p></description><content>&lt;h1 id="mac-appleèŠ¯ç‰‡å®‰è£…win11">Mac AppleèŠ¯ç‰‡å®‰è£…Win11&lt;/h1>
&lt;blockquote>
&lt;p>&lt;a href="https://blog.csdn.net/weixin_52799373/article/details/129658881">M1/M2 Pro VMware Fusionè™šæ‹Ÿæœºå®‰è£…Win11æ•™ç¨‹(è¶…è¯¦ç»†)_m1è£…win11_ä¸ƒç»´å¤§è„‘çš„åšå®¢-CSDNåšå®¢&lt;/a>&lt;/p>
&lt;p>&lt;a href="https://blog.csdn.net/m0_72489515/article/details/128036581">Mç”¨æˆ·ä½¿ç”¨VMè™šæ‹Ÿæœºå®‰è£…win11è¿žä¸ä¸Šç½‘ï¼Œæ€Žä¹ˆè§£å†³_mac_xwzçš„åšå®¢-CSDNåšå®¢&lt;/a>&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051338314.png" alt="image-20240106171142746">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051338837.png" alt="image-20240106171214171">&lt;/p>
&lt;blockquote>
&lt;p>è®°å¾—è¦ä¸‹è½½ARMç‰ˆæœ¬çš„&lt;/p>&lt;/blockquote>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051338380.png" alt="image-20240106171222884">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051339250.png" alt="image-20240106171238651">&lt;/p>
&lt;p>è¿™é‡Œè®¾ç½®çš„å¯†ç ,åŽé¢ä¸ä¼šå†ç”¨äº†,å¯ä»¥è®¾ç½®ä¸ªç®€å•ç‚¹çš„å°±è¡Œ&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051339063.png" alt="image-20240106171316780">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051340279.png" alt="image-20240106171329023">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051340353.png" alt="image-20240106171353840">&lt;/p>
&lt;p>å†…å­˜è®¾ç½®4GB,ç¡¬ç›˜è®¾ç½®æˆ80GB&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051340025.png" alt="image-20240106171404594">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341339.png" alt="image-20240106171419408">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341466.png" alt="image-20240106171447630">&lt;/p>
&lt;p>è¿™é‡Œè¦å¿«é€ŸæŒ‰å›žè½¦,ä¸ç„¶å°±æç¤ºEFI Network,å¦‚æžœæ˜¯è¿™ä¸ªæç¤º,é‡æ–°å¯åŠ¨è™šæ‹Ÿæœºå°±è¡Œ,ä¹‹åŽå°±æ˜¯æ­£å¸¸å®‰è£…Windowç³»ç»Ÿçš„æ­¥éª¤,ç„¶åŽå°±ä¼šé‡åˆ°è¿žæŽ¥åˆ°ç½‘ç»œçš„é—®é¢˜&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341301.png" alt="image-20240106172001913">&lt;/p>
&lt;p>&lt;code>Shift + F10&lt;/code>æ‰“å¼€å‘½ä»¤è¡Œ,è¾“å…¥&lt;code>OOBE\BYPASSNRO&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341481.png" alt="image-20240106174310837">&lt;/p>
&lt;p>ç„¶åŽç³»ç»Ÿå°±è¡Œå›žé‡å¯,ç„¶åŽåˆå›žåˆ°è®¾ç½®Windownçš„è®¾ç½®å¼€å§‹,è¿™æ˜¯æ­£å¸¸çš„,ç„¶åŽå°±ä¸€ç›´éƒ½æ˜¯é…ç½®,æ­£å¸¸é…ç½®å°±å¥½,é€‰æ‹©æ²¡æœ‰è¿žæŽ¥,å°±å¯ä»¥åˆ›å»ºæœ¬åœ°è´¦å·&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341581.png" alt="image-20240106174320712">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341019.png" alt="image-20240106174335945">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051341025.png" alt="image-20240106174424437">&lt;/p>
&lt;p>å®‰è£…å®Œæˆä¹‹åŽ,æ˜¯æ²¡æœ‰ç½‘ç»œçš„,éœ€è¦å®‰è£…vm-tools&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051345365.png" alt="image-20240106174524696">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051346760.png" alt="image-20240106174545175">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051347491.png" alt="image-20240106174556748">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051348197.png" alt="image-20240106174616569">&lt;/p>
&lt;p>æ­£å¸¸å®‰è£…è½¯ä»¶çš„æ­¥éª¤å°±å¯ä»¥äº†&lt;/p>
&lt;h1 id="å›ºå®šip">å›ºå®šIP&lt;/h1>
&lt;p>é…ç½®å®Œäº†,æœ€å¥½æ˜¯é‡å¯ä¸‹vmwareå’Œè™šæ‹Ÿæœº,å’Œç¦ç”¨å¼€å¯ win10ä¸Šçš„vmare8ç½‘å¡&lt;/p>
&lt;p>1.vmareé…ç½®
&lt;img src="https://image.runtimes.cc/202404051348330.png" alt="">&lt;/p>
&lt;p>2.ç”µè„‘é…ç½®,è™šæ‹Ÿæœºé…ç½®&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051349925.png" alt="">&lt;/p></content></item><item><title>Flarum</title><link>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/flarum/</link><pubDate>Sun, 04 May 2025 18:52:43 +0000</pubDate><guid>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/flarum/</guid><description>&lt;h1 id="flarum-éƒ¨ç½²">Flarum éƒ¨ç½²&lt;/h1>
&lt;ul>
&lt;li>
&lt;p>Ubuntu 24.04&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£… PHPã€MariaDBã€Nginxã€Composer&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£…çš„ç›®å½•æ˜¯åœ¨&lt;code>/home/ubuntu/flarum/&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h1 id="å®‰è£…flarum">å®‰è£…Flarum&lt;/h1>
&lt;h2 id="-å®‰è£…php">âœ… å®‰è£…PHP&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo apt update &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sudo apt upgrade -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install -y &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> nginx &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-cli &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-mbstring &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> unzip &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-gd &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-mysql &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-xml &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-zip &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-bcmath &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-fpm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># éªŒè¯ç‰ˆæœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>php -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-å®‰è£…-composer">âœ… å®‰è£… Composer&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cd ~
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -sS https://getcomposer.org/installer | php
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mv composer.phar /usr/local/bin/composer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># éªŒè¯ç‰ˆæœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>composer -V
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-å®‰è£…-flarum">âœ… å®‰è£… Flarum&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cd ~
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir flarum
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>composer create-project flarum/flarum flarum
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-å®‰è£…mariadb">âœ… å®‰è£…MariaDB&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">å®‰è£…æ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install mariadb&lt;span style="color:#f92672">-&lt;/span>server &lt;span style="color:#f92672">-&lt;/span>y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl enable mariadb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl &lt;span style="color:#66d9ef">start&lt;/span> mariadb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">åˆå§‹åŒ–&lt;/span>,&lt;span style="color:#960050;background-color:#1e0010">è®¾ç½®å¯†ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mysql_secure_installation
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">ç™»å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mysql &lt;span style="color:#f92672">-&lt;/span>u root &lt;span style="color:#f92672">-&lt;/span>p
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">è®¾ç½®å¯†ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">USER&lt;/span> &lt;span style="color:#e6db74">&amp;#39;root&amp;#39;&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#e6db74">&amp;#39;localhost&amp;#39;&lt;/span> IDENTIFIED &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#e6db74">&amp;#39;MyRootPass123!&amp;#39;&lt;/span> ;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">è®¾ç½®è¿œç¨‹è®¿é—®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">USER&lt;/span> &lt;span style="color:#e6db74">&amp;#39;root&amp;#39;&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#e6db74">&amp;#39;%&amp;#39;&lt;/span> IDENTIFIED &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#e6db74">&amp;#39;MyRootPass123!&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">è®¾ç½®æƒé™&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">PRIVILEGES&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> &lt;span style="color:#f92672">*&lt;/span>.&lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">TO&lt;/span> &lt;span style="color:#e6db74">&amp;#39;root&amp;#39;&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#e6db74">&amp;#39;%&amp;#39;&lt;/span> &lt;span style="color:#66d9ef">WITH&lt;/span> &lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">OPTION&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">åˆ›å»ºæ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">DATABASE&lt;/span> flarum CHARACTER &lt;span style="color:#66d9ef">SET&lt;/span> utf8mb4 &lt;span style="color:#66d9ef">COLLATE&lt;/span> utf8mb4_unicode_ci;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">åˆ·æ–°æƒé™&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FLUSH &lt;span style="color:#66d9ef">PRIVILEGES&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>EXIT;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">å¼€å¯è¿œç¨‹è®¿é—®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo vim &lt;span style="color:#f92672">/&lt;/span>etc&lt;span style="color:#f92672">/&lt;/span>mysql&lt;span style="color:#f92672">/&lt;/span>mariadb.conf.d&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#ae81ff">50&lt;/span>&lt;span style="color:#f92672">-&lt;/span>server.cnf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind&lt;span style="color:#f92672">-&lt;/span>address &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">127&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#f92672">-&amp;gt;&lt;/span> bind&lt;span style="color:#f92672">-&lt;/span>address &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl &lt;span style="color:#66d9ef">restart&lt;/span> mariadb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-é…ç½®nginx">âœ… é…ç½®Nginx&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-nginx" data-lang="nginx">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">server&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">listen&lt;/span> &lt;span style="color:#ae81ff">80&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">server_name&lt;/span> &lt;span style="color:#e6db74">_&lt;/span>; &lt;span style="color:#75715e"># â† å¦‚æžœæ²¡æœ‰åŸŸåï¼Œå¯ä»¥å†™ä½ çš„å…¬ç½‘ IP
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">root&lt;/span> &lt;span style="color:#e6db74">/home/ubuntu/flarum/public&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">index&lt;/span> &lt;span style="color:#e6db74">index.php&lt;/span> &lt;span style="color:#e6db74">index.html&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># URL é‡å†™è§„åˆ™
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">location&lt;/span> &lt;span style="color:#e6db74">/&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">try_files&lt;/span> $uri $uri/ &lt;span style="color:#e6db74">/index.php?&lt;/span>$query_string;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># PHP è§£æžè®¾ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">location&lt;/span> ~ &lt;span style="color:#e6db74">\.php$&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">include&lt;/span> &lt;span style="color:#e6db74">snippets/fastcgi-php.conf&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">fastcgi_pass&lt;/span> &lt;span style="color:#e6db74">unix:/run/php/php8.3-fpm.sock&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">fastcgi_param&lt;/span> &lt;span style="color:#e6db74">SCRIPT_FILENAME&lt;/span> $document_root$fastcgi_script_name;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ç¦æ­¢è®¿é—®éšè—æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">location&lt;/span> ~ &lt;span style="color:#e6db74">/\.ht&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">deny&lt;/span> &lt;span style="color:#e6db74">all&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ç¼“å­˜é™æ€èµ„æº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">location&lt;/span> ~&lt;span style="color:#e6db74">*&lt;/span> &lt;span style="color:#e6db74">\.(?:ico|css|js|gif|jpe?g|png|woff2?|ttf|svg|eot)&lt;/span>$ {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">expires&lt;/span> &lt;span style="color:#e6db74">6M&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">access_log&lt;/span> &lt;span style="color:#66d9ef">off&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">add_header&lt;/span> &lt;span style="color:#e6db74">Cache-Control&lt;/span> &lt;span style="color:#e6db74">&amp;#34;public&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-ä¿®æ”¹æ–‡ä»¶å…¨æ–°">âœ… ä¿®æ”¹æ–‡ä»¶å…¨æ–°&lt;/h2>
&lt;p>åˆ°è¿™ä¸€æ­¥,ä½¿ç”¨IPè®¿é—®,ä¼š404,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŽˆæƒ&lt;/p></description><content>&lt;h1 id="flarum-éƒ¨ç½²">Flarum éƒ¨ç½²&lt;/h1>
&lt;ul>
&lt;li>
&lt;p>Ubuntu 24.04&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£… PHPã€MariaDBã€Nginxã€Composer&lt;/p>
&lt;/li>
&lt;li>
&lt;p>å®‰è£…çš„ç›®å½•æ˜¯åœ¨&lt;code>/home/ubuntu/flarum/&lt;/code>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h1 id="å®‰è£…flarum">å®‰è£…Flarum&lt;/h1>
&lt;h2 id="-å®‰è£…php">âœ… å®‰è£…PHP&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo apt update &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> sudo apt upgrade -y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install -y &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> nginx &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-cli &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-mbstring &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> unzip &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-gd &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-mysql &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-xml &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-curl &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-zip &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-bcmath &lt;span style="color:#ae81ff">\
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#ae81ff">&lt;/span> php-fpm
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># éªŒè¯ç‰ˆæœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>php -v
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-å®‰è£…-composer">âœ… å®‰è£… Composer&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cd ~
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>curl -sS https://getcomposer.org/installer | php
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mv composer.phar /usr/local/bin/composer
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># éªŒè¯ç‰ˆæœ¬&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>composer -V
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-å®‰è£…-flarum">âœ… å®‰è£… Flarum&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>cd ~
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>mkdir flarum
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>composer create-project flarum/flarum flarum
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-å®‰è£…mariadb">âœ… å®‰è£…MariaDB&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-sql" data-lang="sql">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">å®‰è£…æ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo apt install mariadb&lt;span style="color:#f92672">-&lt;/span>server &lt;span style="color:#f92672">-&lt;/span>y
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl enable mariadb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl &lt;span style="color:#66d9ef">start&lt;/span> mariadb
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">åˆå§‹åŒ–&lt;/span>,&lt;span style="color:#960050;background-color:#1e0010">è®¾ç½®å¯†ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mysql_secure_installation
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">ç™»å½•&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo mysql &lt;span style="color:#f92672">-&lt;/span>u root &lt;span style="color:#f92672">-&lt;/span>p
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">è®¾ç½®å¯†ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">ALTER&lt;/span> &lt;span style="color:#66d9ef">USER&lt;/span> &lt;span style="color:#e6db74">&amp;#39;root&amp;#39;&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#e6db74">&amp;#39;localhost&amp;#39;&lt;/span> IDENTIFIED &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#e6db74">&amp;#39;MyRootPass123!&amp;#39;&lt;/span> ;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">è®¾ç½®è¿œç¨‹è®¿é—®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">USER&lt;/span> &lt;span style="color:#e6db74">&amp;#39;root&amp;#39;&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#e6db74">&amp;#39;%&amp;#39;&lt;/span> IDENTIFIED &lt;span style="color:#66d9ef">BY&lt;/span> &lt;span style="color:#e6db74">&amp;#39;MyRootPass123!&amp;#39;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">è®¾ç½®æƒé™&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">ALL&lt;/span> &lt;span style="color:#66d9ef">PRIVILEGES&lt;/span> &lt;span style="color:#66d9ef">ON&lt;/span> &lt;span style="color:#f92672">*&lt;/span>.&lt;span style="color:#f92672">*&lt;/span> &lt;span style="color:#66d9ef">TO&lt;/span> &lt;span style="color:#e6db74">&amp;#39;root&amp;#39;&lt;/span>&lt;span style="color:#f92672">@&lt;/span>&lt;span style="color:#e6db74">&amp;#39;%&amp;#39;&lt;/span> &lt;span style="color:#66d9ef">WITH&lt;/span> &lt;span style="color:#66d9ef">GRANT&lt;/span> &lt;span style="color:#66d9ef">OPTION&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">åˆ›å»ºæ•°æ®åº“&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">CREATE&lt;/span> &lt;span style="color:#66d9ef">DATABASE&lt;/span> flarum CHARACTER &lt;span style="color:#66d9ef">SET&lt;/span> utf8mb4 &lt;span style="color:#66d9ef">COLLATE&lt;/span> utf8mb4_unicode_ci;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">åˆ·æ–°æƒé™&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>FLUSH &lt;span style="color:#66d9ef">PRIVILEGES&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">é€€å‡º&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>EXIT;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">#&lt;/span> &lt;span style="color:#960050;background-color:#1e0010">å¼€å¯è¿œç¨‹è®¿é—®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo vim &lt;span style="color:#f92672">/&lt;/span>etc&lt;span style="color:#f92672">/&lt;/span>mysql&lt;span style="color:#f92672">/&lt;/span>mariadb.conf.d&lt;span style="color:#f92672">/&lt;/span>&lt;span style="color:#ae81ff">50&lt;/span>&lt;span style="color:#f92672">-&lt;/span>server.cnf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>bind&lt;span style="color:#f92672">-&lt;/span>address &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">127&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">1&lt;/span> &lt;span style="color:#f92672">-&amp;gt;&lt;/span> bind&lt;span style="color:#f92672">-&lt;/span>address &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>.&lt;span style="color:#ae81ff">0&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo systemctl &lt;span style="color:#66d9ef">restart&lt;/span> mariadb
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-é…ç½®nginx">âœ… é…ç½®Nginx&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-nginx" data-lang="nginx">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">server&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">listen&lt;/span> &lt;span style="color:#ae81ff">80&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">server_name&lt;/span> &lt;span style="color:#e6db74">_&lt;/span>; &lt;span style="color:#75715e"># â† å¦‚æžœæ²¡æœ‰åŸŸåï¼Œå¯ä»¥å†™ä½ çš„å…¬ç½‘ IP
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">root&lt;/span> &lt;span style="color:#e6db74">/home/ubuntu/flarum/public&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">index&lt;/span> &lt;span style="color:#e6db74">index.php&lt;/span> &lt;span style="color:#e6db74">index.html&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># URL é‡å†™è§„åˆ™
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">location&lt;/span> &lt;span style="color:#e6db74">/&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">try_files&lt;/span> $uri $uri/ &lt;span style="color:#e6db74">/index.php?&lt;/span>$query_string;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># PHP è§£æžè®¾ç½®
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">location&lt;/span> ~ &lt;span style="color:#e6db74">\.php$&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">include&lt;/span> &lt;span style="color:#e6db74">snippets/fastcgi-php.conf&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">fastcgi_pass&lt;/span> &lt;span style="color:#e6db74">unix:/run/php/php8.3-fpm.sock&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">fastcgi_param&lt;/span> &lt;span style="color:#e6db74">SCRIPT_FILENAME&lt;/span> $document_root$fastcgi_script_name;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ç¦æ­¢è®¿é—®éšè—æ–‡ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">location&lt;/span> ~ &lt;span style="color:#e6db74">/\.ht&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">deny&lt;/span> &lt;span style="color:#e6db74">all&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># ç¼“å­˜é™æ€èµ„æº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#f92672">location&lt;/span> ~&lt;span style="color:#e6db74">*&lt;/span> &lt;span style="color:#e6db74">\.(?:ico|css|js|gif|jpe?g|png|woff2?|ttf|svg|eot)&lt;/span>$ {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">expires&lt;/span> &lt;span style="color:#e6db74">6M&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">access_log&lt;/span> &lt;span style="color:#66d9ef">off&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">add_header&lt;/span> &lt;span style="color:#e6db74">Cache-Control&lt;/span> &lt;span style="color:#e6db74">&amp;#34;public&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-ä¿®æ”¹æ–‡ä»¶å…¨æ–°">âœ… ä¿®æ”¹æ–‡ä»¶å…¨æ–°&lt;/h2>
&lt;p>åˆ°è¿™ä¸€æ­¥,ä½¿ç”¨IPè®¿é—®,ä¼š404,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æŽˆæƒ&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>sudo chown -R www-data:www-data /home/ubuntu/flarum
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo chmod -R &lt;span style="color:#ae81ff">775&lt;/span> /home/ubuntu/flarum/storage
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo chmod -R &lt;span style="color:#ae81ff">775&lt;/span> /home/ubuntu/flarum/public/assets
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>sudo chmod +x /home/ubuntu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="-é…ç½®åŸŸå">âœ… é…ç½®åŸŸå&lt;/h2>
&lt;p>Cloudflareå¼€å¯äº†æ­£å¸¸CDN,è¿˜éœ€è¦ä¿®æ”¹phpçš„é…ç½®æ–‡ä»¶
ä¿®æ”¹flarumç›®å½•ä¸‹çš„config.php&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>vim ~/flarum/config.php
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;url&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#e6db74">&amp;#39;http://&amp;lt;åŽŸæ¥çš„IP&amp;gt;&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ä¿®æ”¹æˆ
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">&amp;#39;url&amp;#39;&lt;/span> &lt;span style="color:#f92672">=&lt;/span>&amp;gt; &lt;span style="color:#e6db74">&amp;#39;https://forum.example.com&amp;#39;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>php flarum cache:clear
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h1 id="é…ç½®">é…ç½®&lt;/h1>
&lt;h2 id="é…ç½®é‚®ç®±">ðŸ“¤é…ç½®é‚®ç®±&lt;/h2>
&lt;p>é©±åŠ¨:smtp&lt;/p>
&lt;p>ä¸»æœº:smtp.gmail.com&lt;/p>
&lt;p>é¡¿å£:587&lt;/p>
&lt;p>åŠ å¯†åè®®:tls&lt;/p>
&lt;p>ç”¨æˆ·å:å‘é€éªŒè¯ç çš„é‚®ç®±&lt;/p>
&lt;p>å¯†ç :Gmailåº”ç”¨ç¨‹åºçš„ä¸“ç”¨å¯†ç &lt;/p></content></item><item><title>nexus3</title><link>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/nexus-3/</link><pubDate>Tue, 12 Mar 2024 18:52:43 +0000</pubDate><guid>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/nexus-3/</guid><description>&lt;h1 id="dockerä»“åº“">Dockerä»“åº“&lt;/h1>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ç±»åž‹&lt;/th>
&lt;th>ç«¯å£&lt;/th>
&lt;th>ä»“åº“åå­—&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Host&lt;/td>
&lt;td>9083&lt;/td>
&lt;td>My-docker-host&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>proxy&lt;/td>
&lt;td>&lt;/td>
&lt;td>My-docker-proxy&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>group&lt;/td>
&lt;td>9082&lt;/td>
&lt;td>My-docker-group&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>åˆ›å»ºä¸€ä¸ªå­˜å‚¨ç›®å½•&lt;/strong>&lt;/p>
&lt;p>åå­—éšä¾¿èµ·,æ²¡æœ‰å¤ªå¤šå½±å“&lt;/p>
&lt;p>![image-20240917104642184](../../../../../../Library/Application Support/typora-user-images/image-20240917104642184.png)&lt;/p>
&lt;p>åˆ›å»ºdocker hostä»“åº“&lt;/p>
&lt;p>![image-20240917104411323](../../../../../../Library/Application Support/typora-user-images/image-20240917104411323.png)&lt;/p>
&lt;p>![image-20240917104515460](../../../../../../Library/Application Support/typora-user-images/image-20240917104515460.png)&lt;/p>
&lt;p>![image-20240917104240181](../../../../../../Library/Application Support/typora-user-images/image-20240917104240181.png)&lt;/p>
&lt;p>åˆ›å»ºproxyä»“åº“&lt;/p>
&lt;p>![image-20240917113108378](../../../../../../Library/Application Support/typora-user-images/image-20240917113108378.png)&lt;/p>
&lt;p>![image-20240917113128237](../../../../../../Library/Application Support/typora-user-images/image-20240917113128237.png)&lt;/p>
&lt;p>group&lt;/p>
&lt;p>![image-20240917113647416](../../../../../../Library/Application Support/typora-user-images/image-20240917113647416.png)&lt;/p>
&lt;p>dockerå®¢æˆ·ç«¯é…ç½®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># vim /etc/docker/daemon.json&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;insecure-registries&amp;#34;&lt;/span>: &lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#e6db74">&amp;#34;54.255.206.44:9082&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;54.255.206.44:9083&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># éœ€è¦é‡å¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl restart docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç™»å½•&lt;/p>
&lt;p>ç™»å½•ä¹‹åŽå‡­è¯ä¿å­˜åœ¨&lt;code>/.docker/config.json&lt;/code>æˆ–è€…æ˜¯åœ¨,éƒ¨ç½²çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜,å°±æ˜¯jenkinsæ‰“åŒ…ä¹‹åŽdocker loginå¯ä»¥,ä½†æ˜¯pushçš„æ—¶å€™å°±æç¤ºæ²¡æœ‰æŽˆæƒ,æš‚æ—¶çš„è§£å†³åŠžæ³•æ˜¯,å®¿ä¸»æœºdocker loginä¸‹,ä¿å­˜å‡­è¯,ç„¶åŽjenkinså®¹å™¨æŒ‚è½½&lt;code>/root/.docker/config.json&lt;/code>è¿™ä¸ªæ–‡ä»¶,jenkinsæ‰“åŒ…å°±å¯ä»¥ä¸ç”¨ç™»å½•,ç›´æŽ¥æŽ¨é€&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>root@anthony:~# docker login http://54.255.206.44:9083
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Username: admin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Password:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Error response from daemon: login attempt to http://54.255.206.44:9083/v2/ failed with status: &lt;span style="color:#ae81ff">401&lt;/span> Unauthorized
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ----------------------------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root@anthony:~# docker login http://54.255.206.44:9082
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Username: admin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Password:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Configure a credential helper to remove this warning. See
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>https://docs.docker.com/engine/reference/commandline/login/#credentials-store
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Login Succeeded
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é•œåƒæ“ä½œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># pullé•œåƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker pull nginx:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç»™é•œåƒæ‰“tag&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker tag nginx:latest 54.255.206.44:9082/my-docker-host/nginx:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æŽ¨é€é•œåƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker push 54.255.206.44:9082/my-docker-host/nginx:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description><content>&lt;h1 id="dockerä»“åº“">Dockerä»“åº“&lt;/h1>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>ç±»åž‹&lt;/th>
&lt;th>ç«¯å£&lt;/th>
&lt;th>ä»“åº“åå­—&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>Host&lt;/td>
&lt;td>9083&lt;/td>
&lt;td>My-docker-host&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>proxy&lt;/td>
&lt;td>&lt;/td>
&lt;td>My-docker-proxy&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>group&lt;/td>
&lt;td>9082&lt;/td>
&lt;td>My-docker-group&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>åˆ›å»ºä¸€ä¸ªå­˜å‚¨ç›®å½•&lt;/strong>&lt;/p>
&lt;p>åå­—éšä¾¿èµ·,æ²¡æœ‰å¤ªå¤šå½±å“&lt;/p>
&lt;p>![image-20240917104642184](../../../../../../Library/Application Support/typora-user-images/image-20240917104642184.png)&lt;/p>
&lt;p>åˆ›å»ºdocker hostä»“åº“&lt;/p>
&lt;p>![image-20240917104411323](../../../../../../Library/Application Support/typora-user-images/image-20240917104411323.png)&lt;/p>
&lt;p>![image-20240917104515460](../../../../../../Library/Application Support/typora-user-images/image-20240917104515460.png)&lt;/p>
&lt;p>![image-20240917104240181](../../../../../../Library/Application Support/typora-user-images/image-20240917104240181.png)&lt;/p>
&lt;p>åˆ›å»ºproxyä»“åº“&lt;/p>
&lt;p>![image-20240917113108378](../../../../../../Library/Application Support/typora-user-images/image-20240917113108378.png)&lt;/p>
&lt;p>![image-20240917113128237](../../../../../../Library/Application Support/typora-user-images/image-20240917113128237.png)&lt;/p>
&lt;p>group&lt;/p>
&lt;p>![image-20240917113647416](../../../../../../Library/Application Support/typora-user-images/image-20240917113647416.png)&lt;/p>
&lt;p>dockerå®¢æˆ·ç«¯é…ç½®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># vim /etc/docker/daemon.json&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">{&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;insecure-registries&amp;#34;&lt;/span>: &lt;span style="color:#f92672">[&lt;/span>&lt;span style="color:#e6db74">&amp;#34;54.255.206.44:9082&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;54.255.206.44:9083&amp;#34;&lt;/span>&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># éœ€è¦é‡å¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl daemon-reload
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>systemctl restart docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>ç™»å½•&lt;/p>
&lt;p>ç™»å½•ä¹‹åŽå‡­è¯ä¿å­˜åœ¨&lt;code>/.docker/config.json&lt;/code>æˆ–è€…æ˜¯åœ¨,éƒ¨ç½²çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªé—®é¢˜,å°±æ˜¯jenkinsæ‰“åŒ…ä¹‹åŽdocker loginå¯ä»¥,ä½†æ˜¯pushçš„æ—¶å€™å°±æç¤ºæ²¡æœ‰æŽˆæƒ,æš‚æ—¶çš„è§£å†³åŠžæ³•æ˜¯,å®¿ä¸»æœºdocker loginä¸‹,ä¿å­˜å‡­è¯,ç„¶åŽjenkinså®¹å™¨æŒ‚è½½&lt;code>/root/.docker/config.json&lt;/code>è¿™ä¸ªæ–‡ä»¶,jenkinsæ‰“åŒ…å°±å¯ä»¥ä¸ç”¨ç™»å½•,ç›´æŽ¥æŽ¨é€&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>root@anthony:~# docker login http://54.255.206.44:9083
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Username: admin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Password:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Error response from daemon: login attempt to http://54.255.206.44:9083/v2/ failed with status: &lt;span style="color:#ae81ff">401&lt;/span> Unauthorized
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ----------------------------------------------------------------------------&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>root@anthony:~# docker login http://54.255.206.44:9082
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Username: admin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Password:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Configure a credential helper to remove this warning. See
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>https://docs.docker.com/engine/reference/commandline/login/#credentials-store
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Login Succeeded
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é•œåƒæ“ä½œ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># pullé•œåƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker pull nginx:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># ç»™é•œåƒæ‰“tag&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker tag nginx:latest 54.255.206.44:9082/my-docker-host/nginx:latest
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># æŽ¨é€é•œåƒ&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>docker push 54.255.206.44:9082/my-docker-host/nginx:latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></content></item><item><title>SpringBooté…ç½®Gmail</title><link>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/springboot%E9%85%8D%E7%BD%AEgmail/</link><pubDate>Sat, 02 Mar 2024 18:52:43 +0000</pubDate><guid>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/springboot%E9%85%8D%E7%BD%AEgmail/</guid><description>&lt;p>&lt;img src="https://image.runtimes.cc/202404051400542.png" alt="image-20240302190257438">&lt;/p>
&lt;p>ç”³è¯·åº”ç”¨ç¨‹åºéªŒè¯ç &lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051400643.png" alt="image-20240302184916544">&lt;/p>
&lt;p>é…ç½®äºŒæ­¥éªŒè¯&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051400904.png" alt="image-20240302185000050">&lt;/p>
&lt;p>è¦é…ç½®äºŒæ­¥éªŒè¯,æ‰èƒ½çœ‹åˆ°åº”ç”¨ç¨‹åºçš„é€‰é¡¹&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051402469.png" alt="image-20240302185040456">&lt;/p>
&lt;p>æœ€åŽå°±èƒ½èŽ·å–åˆ°åº”ç”¨ç¨‹åºéªŒè¯ç &lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051402369.png" alt="image-20240302185121257">&lt;/p>
&lt;p>å¼•å…¥ä»£ç &lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span style="color:#f92672">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-mail&lt;span style="color:#f92672">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>application.propertiesæ–‡ä»¶é…ç½®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-properties" data-lang="properties">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.host&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">smtp.gmail.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‚®ä»¶æœåŠ¡å™¨ç«¯å£å·&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.port&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">587&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‚®ä»¶å‘é€æ–¹çš„ç”µå­é‚®ä»¶åœ°å€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.username&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">ä½ çš„Gmailé‚®ç®±è´¦å·&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‚®ä»¶å‘é€æ–¹çš„å¯†ç æˆ–åº”ç”¨ç¨‹åºä¸“ç”¨å¯†ç ä¸€å®šè¦å¼€å¯äº†ä¸¤æ­¥éªŒè¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.password&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">åº”ç”¨ç¨‹åºä¸“ç”¨å¯†ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¯ç”¨TLSåŠ å¯†&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.properties.mail.smtp.starttls.enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># éªŒè¯é‚®ä»¶æœåŠ¡å™¨çš„èº«ä»½&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.properties.mail.smtp.auth&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‚®ä»¶ä¼ è¾“åè®®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.properties.mail.transport.protocol&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">smtp&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é…ç½®çš„ä»£ç &lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">EmailUtil&lt;/span> &lt;span style="color:#66d9ef">implements&lt;/span> EmailService
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#66d9ef">final&lt;/span> Logger logger &lt;span style="color:#f92672">=&lt;/span> LoggerFactory.&lt;span style="color:#a6e22e">getLogger&lt;/span>(&lt;span style="color:#66d9ef">this&lt;/span>.&lt;span style="color:#a6e22e">getClass&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//Spring Boot æä¾›äº†ä¸€ä¸ªå‘é€é‚®ä»¶çš„ç®€å•æŠ½è±¡ï¼Œä½¿ç”¨çš„æ˜¯ä¸‹é¢è¿™ä¸ªæŽ¥å£ï¼Œè¿™é‡Œç›´æŽ¥æ³¨å…¥å³å¯ä½¿ç”¨&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> JavaMailSender mailSender;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// é…ç½®æ–‡ä»¶ä¸­æˆ‘çš„è°·æ­Œé‚®ç®±&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Value&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;${spring.mail.username}&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> String from;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * ç®€å•æ–‡æœ¬é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendSimpleMail&lt;/span>(String to, String subject, String content) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//åˆ›å»ºSimpleMailMessageå¯¹è±¡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SimpleMailMessage message &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> SimpleMailMessage();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶å‘é€äºº&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setFrom&lt;/span>(from);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶æŽ¥æ”¶äºº&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setTo&lt;/span>(to);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶ä¸»é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setSubject&lt;/span>(subject);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶å†…å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setText&lt;/span>(content);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//å‘é€é‚®ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mailSender.&lt;span style="color:#a6e22e">send&lt;/span>(message);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * htmlé‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº,å¤šä¸ªæ—¶å‚æ•°å½¢å¼ ï¼š&amp;#34;xxx@xxx.com,xxx@xxx.com,xxx@xxx.com&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendHtmlMail&lt;/span>(String to, String subject, String content) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//èŽ·å–MimeMessageå¯¹è±¡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MimeMessage message &lt;span style="color:#f92672">=&lt;/span> mailSender.&lt;span style="color:#a6e22e">createMimeMessage&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MimeMessageHelper messageHelper;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageHelper &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> MimeMessageHelper(message, &lt;span style="color:#66d9ef">true&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶å‘é€äºº&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageHelper.&lt;span style="color:#a6e22e">setFrom&lt;/span>(from);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶æŽ¥æ”¶äºº,è®¾ç½®å¤šä¸ªæ”¶ä»¶äººåœ°å€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> InternetAddress&lt;span style="color:#f92672">[]&lt;/span> internetAddressTo &lt;span style="color:#f92672">=&lt;/span> InternetAddress.&lt;span style="color:#a6e22e">parse&lt;/span>(to);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageHelper.&lt;span style="color:#a6e22e">setTo&lt;/span>(internetAddressTo);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//messageHelper.setTo(to);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶ä¸»é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setSubject&lt;/span>(subject);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶å†…å®¹ï¼Œhtmlæ ¼å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageHelper.&lt;span style="color:#a6e22e">setText&lt;/span>(content, &lt;span style="color:#66d9ef">true&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//å‘é€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mailSender.&lt;span style="color:#a6e22e">send&lt;/span>(message);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//æ—¥å¿—ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger.&lt;span style="color:#a6e22e">info&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;é‚®ä»¶å·²ç»å‘é€ã€‚&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">catch&lt;/span> (Exception e) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger.&lt;span style="color:#a6e22e">error&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;å‘é€é‚®ä»¶æ—¶å‘ç”Ÿå¼‚å¸¸ï¼&amp;#34;&lt;/span>, e);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * å¸¦é™„ä»¶çš„é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param filePath é™„ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendAttachmentsMail&lt;/span>(String to, String subject, String content, String filePath) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MimeMessage message &lt;span style="color:#f92672">=&lt;/span> mailSender.&lt;span style="color:#a6e22e">createMimeMessage&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MimeMessageHelper helper &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> MimeMessageHelper(message, &lt;span style="color:#66d9ef">true&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">setFrom&lt;/span>(from);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">setTo&lt;/span>(to);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">setSubject&lt;/span>(subject);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">setText&lt;/span>(content, &lt;span style="color:#66d9ef">true&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FileSystemResource file &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> FileSystemResource(&lt;span style="color:#66d9ef">new&lt;/span> File(filePath));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> String fileName &lt;span style="color:#f92672">=&lt;/span> filePath.&lt;span style="color:#a6e22e">substring&lt;/span>(filePath.&lt;span style="color:#a6e22e">lastIndexOf&lt;/span>(File.&lt;span style="color:#a6e22e">separator&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">addAttachment&lt;/span>(fileName, file);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mailSender.&lt;span style="color:#a6e22e">send&lt;/span>(message);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//æ—¥å¿—ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger.&lt;span style="color:#a6e22e">info&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;é‚®ä»¶å·²ç»å‘é€ã€‚&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">catch&lt;/span> (Exception e) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger.&lt;span style="color:#a6e22e">error&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;å‘é€é‚®ä»¶æ—¶å‘ç”Ÿå¼‚å¸¸ï¼&amp;#34;&lt;/span>, e);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * éªŒè¯é‚®ç®±æ ¼å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param email
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @return
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">boolean&lt;/span> &lt;span style="color:#a6e22e">isEmail&lt;/span>(String email) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (email &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#66d9ef">null&lt;/span> &lt;span style="color:#f92672">||&lt;/span> email.&lt;span style="color:#a6e22e">length&lt;/span>() &lt;span style="color:#f92672">&amp;lt;&lt;/span> 1 &lt;span style="color:#f92672">||&lt;/span> email.&lt;span style="color:#a6e22e">length&lt;/span>() &lt;span style="color:#f92672">&amp;gt;&lt;/span> 256) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Pattern pattern &lt;span style="color:#f92672">=&lt;/span> Pattern.&lt;span style="color:#a6e22e">compile&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> pattern.&lt;span style="color:#a6e22e">matcher&lt;/span>(email).&lt;span style="color:#a6e22e">matches&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">interface&lt;/span> &lt;span style="color:#a6e22e">EmailService&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * å‘é€æ–‡æœ¬é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendSimpleMail&lt;/span>(String to, String subject, String content);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * å‘é€HTMLé‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendHtmlMail&lt;/span>(String to, String subject, String content);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * å‘é€å¸¦é™„ä»¶çš„é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param filePath é™„ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendAttachmentsMail&lt;/span>(String to, String subject, String content, String filePath);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">CodeUtil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> StringRedisTemplate redisTemplate;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> String &lt;span style="color:#a6e22e">generateVerificationCode&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ç”Ÿæˆ6ä½éšæœºæ•°å­—éªŒè¯ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> String.&lt;span style="color:#a6e22e">valueOf&lt;/span>((&lt;span style="color:#66d9ef">int&lt;/span>) ((Math.&lt;span style="color:#a6e22e">random&lt;/span>() &lt;span style="color:#f92672">*&lt;/span> 9 &lt;span style="color:#f92672">+&lt;/span> 1) &lt;span style="color:#f92672">*&lt;/span> 100000));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// éªŒè¯éªŒè¯ç æ˜¯å¦æ­£ç¡®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">boolean&lt;/span> &lt;span style="color:#a6e22e">verifyCode&lt;/span>(String userId, String code,String key) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key &lt;span style="color:#f92672">=&lt;/span> key &lt;span style="color:#f92672">+&lt;/span> userId;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> String storedCode &lt;span style="color:#f92672">=&lt;/span> redisTemplate.&lt;span style="color:#a6e22e">opsForValue&lt;/span>().&lt;span style="color:#a6e22e">get&lt;/span>(key);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> code.&lt;span style="color:#a6e22e">equals&lt;/span>(storedCode);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//åˆ é™¤redisä¸­éªŒè¯ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">deleteCode&lt;/span>(String userId,String key) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key &lt;span style="color:#f92672">=&lt;/span> key &lt;span style="color:#f92672">+&lt;/span> userId;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redisTemplate.&lt;span style="color:#a6e22e">delete&lt;/span>(key);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">//å†™åœ¨éœ€è¦å‘é€éªŒè¯ç çš„åœ°æ–¹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">//å­˜å‚¨æ—¶é—´&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#66d9ef">static&lt;/span> &lt;span style="color:#66d9ef">final&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> EXPIRATION_TIME_IN_MINUTES &lt;span style="color:#f92672">=&lt;/span> 3;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é”®å&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#66d9ef">static&lt;/span> &lt;span style="color:#66d9ef">final&lt;/span> String KEY_PREFIX &lt;span style="color:#f92672">==&lt;/span>&lt;span style="color:#e6db74">&amp;#34;xxx&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key&lt;span style="color:#f92672">=&lt;/span>KEY_PREFIX&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#e6db74">&amp;#34;123456&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redisTemplate.&lt;span style="color:#a6e22e">opsForValue&lt;/span>().&lt;span style="color:#a6e22e">set&lt;/span>(key, éšæœºæ•°å­—éªŒè¯ç , EXPIRATION_TIME_IN_MINUTES, TimeUnit.&lt;span style="color:#a6e22e">MINUTES&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description><content>&lt;p>&lt;img src="https://image.runtimes.cc/202404051400542.png" alt="image-20240302190257438">&lt;/p>
&lt;p>ç”³è¯·åº”ç”¨ç¨‹åºéªŒè¯ç &lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051400643.png" alt="image-20240302184916544">&lt;/p>
&lt;p>é…ç½®äºŒæ­¥éªŒè¯&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051400904.png" alt="image-20240302185000050">&lt;/p>
&lt;p>è¦é…ç½®äºŒæ­¥éªŒè¯,æ‰èƒ½çœ‹åˆ°åº”ç”¨ç¨‹åºçš„é€‰é¡¹&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051402469.png" alt="image-20240302185040456">&lt;/p>
&lt;p>æœ€åŽå°±èƒ½èŽ·å–åˆ°åº”ç”¨ç¨‹åºéªŒè¯ç &lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051402369.png" alt="image-20240302185121257">&lt;/p>
&lt;p>å¼•å…¥ä»£ç &lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;groupId&amp;gt;&lt;/span>org.springframework.boot&lt;span style="color:#f92672">&amp;lt;/groupId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;lt;artifactId&amp;gt;&lt;/span>spring-boot-starter-mail&lt;span style="color:#f92672">&amp;lt;/artifactId&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;/dependency&amp;gt;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>application.propertiesæ–‡ä»¶é…ç½®&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-properties" data-lang="properties">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.host&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">smtp.gmail.com&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‚®ä»¶æœåŠ¡å™¨ç«¯å£å·&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.port&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">587&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‚®ä»¶å‘é€æ–¹çš„ç”µå­é‚®ä»¶åœ°å€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.username&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">ä½ çš„Gmailé‚®ç®±è´¦å·&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‚®ä»¶å‘é€æ–¹çš„å¯†ç æˆ–åº”ç”¨ç¨‹åºä¸“ç”¨å¯†ç ä¸€å®šè¦å¼€å¯äº†ä¸¤æ­¥éªŒè¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.password&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">åº”ç”¨ç¨‹åºä¸“ç”¨å¯†ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># å¯ç”¨TLSåŠ å¯†&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.properties.mail.smtp.starttls.enable&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># éªŒè¯é‚®ä»¶æœåŠ¡å™¨çš„èº«ä»½&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.properties.mail.smtp.auth&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">true&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># é‚®ä»¶ä¼ è¾“åè®®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">spring.mail.properties.mail.transport.protocol&lt;/span>&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">smtp&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>é…ç½®çš„ä»£ç &lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">EmailUtil&lt;/span> &lt;span style="color:#66d9ef">implements&lt;/span> EmailService
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#66d9ef">final&lt;/span> Logger logger &lt;span style="color:#f92672">=&lt;/span> LoggerFactory.&lt;span style="color:#a6e22e">getLogger&lt;/span>(&lt;span style="color:#66d9ef">this&lt;/span>.&lt;span style="color:#a6e22e">getClass&lt;/span>());
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//Spring Boot æä¾›äº†ä¸€ä¸ªå‘é€é‚®ä»¶çš„ç®€å•æŠ½è±¡ï¼Œä½¿ç”¨çš„æ˜¯ä¸‹é¢è¿™ä¸ªæŽ¥å£ï¼Œè¿™é‡Œç›´æŽ¥æ³¨å…¥å³å¯ä½¿ç”¨&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> JavaMailSender mailSender;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// é…ç½®æ–‡ä»¶ä¸­æˆ‘çš„è°·æ­Œé‚®ç®±&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Value&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;${spring.mail.username}&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> String from;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * ç®€å•æ–‡æœ¬é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendSimpleMail&lt;/span>(String to, String subject, String content) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//åˆ›å»ºSimpleMailMessageå¯¹è±¡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> SimpleMailMessage message &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> SimpleMailMessage();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶å‘é€äºº&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setFrom&lt;/span>(from);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶æŽ¥æ”¶äºº&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setTo&lt;/span>(to);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶ä¸»é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setSubject&lt;/span>(subject);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶å†…å®¹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setText&lt;/span>(content);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//å‘é€é‚®ä»¶&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mailSender.&lt;span style="color:#a6e22e">send&lt;/span>(message);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * htmlé‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº,å¤šä¸ªæ—¶å‚æ•°å½¢å¼ ï¼š&amp;#34;xxx@xxx.com,xxx@xxx.com,xxx@xxx.com&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendHtmlMail&lt;/span>(String to, String subject, String content) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//èŽ·å–MimeMessageå¯¹è±¡&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MimeMessage message &lt;span style="color:#f92672">=&lt;/span> mailSender.&lt;span style="color:#a6e22e">createMimeMessage&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MimeMessageHelper messageHelper;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageHelper &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> MimeMessageHelper(message, &lt;span style="color:#66d9ef">true&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶å‘é€äºº&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageHelper.&lt;span style="color:#a6e22e">setFrom&lt;/span>(from);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶æŽ¥æ”¶äºº,è®¾ç½®å¤šä¸ªæ”¶ä»¶äººåœ°å€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> InternetAddress&lt;span style="color:#f92672">[]&lt;/span> internetAddressTo &lt;span style="color:#f92672">=&lt;/span> InternetAddress.&lt;span style="color:#a6e22e">parse&lt;/span>(to);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageHelper.&lt;span style="color:#a6e22e">setTo&lt;/span>(internetAddressTo);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//messageHelper.setTo(to);&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶ä¸»é¢˜&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> message.&lt;span style="color:#a6e22e">setSubject&lt;/span>(subject);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é‚®ä»¶å†…å®¹ï¼Œhtmlæ ¼å¼&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> messageHelper.&lt;span style="color:#a6e22e">setText&lt;/span>(content, &lt;span style="color:#66d9ef">true&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//å‘é€&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mailSender.&lt;span style="color:#a6e22e">send&lt;/span>(message);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//æ—¥å¿—ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger.&lt;span style="color:#a6e22e">info&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;é‚®ä»¶å·²ç»å‘é€ã€‚&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">catch&lt;/span> (Exception e) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger.&lt;span style="color:#a6e22e">error&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;å‘é€é‚®ä»¶æ—¶å‘ç”Ÿå¼‚å¸¸ï¼&amp;#34;&lt;/span>, e);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * å¸¦é™„ä»¶çš„é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param filePath é™„ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Override&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendAttachmentsMail&lt;/span>(String to, String subject, String content, String filePath) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MimeMessage message &lt;span style="color:#f92672">=&lt;/span> mailSender.&lt;span style="color:#a6e22e">createMimeMessage&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">try&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MimeMessageHelper helper &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> MimeMessageHelper(message, &lt;span style="color:#66d9ef">true&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">setFrom&lt;/span>(from);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">setTo&lt;/span>(to);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">setSubject&lt;/span>(subject);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">setText&lt;/span>(content, &lt;span style="color:#66d9ef">true&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> FileSystemResource file &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#66d9ef">new&lt;/span> FileSystemResource(&lt;span style="color:#66d9ef">new&lt;/span> File(filePath));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> String fileName &lt;span style="color:#f92672">=&lt;/span> filePath.&lt;span style="color:#a6e22e">substring&lt;/span>(filePath.&lt;span style="color:#a6e22e">lastIndexOf&lt;/span>(File.&lt;span style="color:#a6e22e">separator&lt;/span>));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> helper.&lt;span style="color:#a6e22e">addAttachment&lt;/span>(fileName, file);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> mailSender.&lt;span style="color:#a6e22e">send&lt;/span>(message);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//æ—¥å¿—ä¿¡æ¯&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger.&lt;span style="color:#a6e22e">info&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;é‚®ä»¶å·²ç»å‘é€ã€‚&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> } &lt;span style="color:#66d9ef">catch&lt;/span> (Exception e) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> logger.&lt;span style="color:#a6e22e">error&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;å‘é€é‚®ä»¶æ—¶å‘ç”Ÿå¼‚å¸¸ï¼&amp;#34;&lt;/span>, e);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * éªŒè¯é‚®ç®±æ ¼å¼
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param email
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @return
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">boolean&lt;/span> &lt;span style="color:#a6e22e">isEmail&lt;/span>(String email) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (email &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#66d9ef">null&lt;/span> &lt;span style="color:#f92672">||&lt;/span> email.&lt;span style="color:#a6e22e">length&lt;/span>() &lt;span style="color:#f92672">&amp;lt;&lt;/span> 1 &lt;span style="color:#f92672">||&lt;/span> email.&lt;span style="color:#a6e22e">length&lt;/span>() &lt;span style="color:#f92672">&amp;gt;&lt;/span> 256) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> &lt;span style="color:#66d9ef">false&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Pattern pattern &lt;span style="color:#f92672">=&lt;/span> Pattern.&lt;span style="color:#a6e22e">compile&lt;/span>(&lt;span style="color:#e6db74">&amp;#34;^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$&amp;#34;&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> pattern.&lt;span style="color:#a6e22e">matcher&lt;/span>(email).&lt;span style="color:#a6e22e">matches&lt;/span>();
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">interface&lt;/span> &lt;span style="color:#a6e22e">EmailService&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * å‘é€æ–‡æœ¬é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendSimpleMail&lt;/span>(String to, String subject, String content);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * å‘é€HTMLé‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendHtmlMail&lt;/span>(String to, String subject, String content);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">/**
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * å‘é€å¸¦é™„ä»¶çš„é‚®ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> *
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param to æ”¶ä»¶äºº
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param subject ä¸»é¢˜
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param content å†…å®¹
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> * @param filePath é™„ä»¶
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"> */&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">sendAttachmentsMail&lt;/span>(String to, String subject, String content, String filePath);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#a6e22e">@Service&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">class&lt;/span> &lt;span style="color:#a6e22e">CodeUtil&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">@Autowired&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> StringRedisTemplate redisTemplate;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> String &lt;span style="color:#a6e22e">generateVerificationCode&lt;/span>() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// ç”Ÿæˆ6ä½éšæœºæ•°å­—éªŒè¯ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> String.&lt;span style="color:#a6e22e">valueOf&lt;/span>((&lt;span style="color:#66d9ef">int&lt;/span>) ((Math.&lt;span style="color:#a6e22e">random&lt;/span>() &lt;span style="color:#f92672">*&lt;/span> 9 &lt;span style="color:#f92672">+&lt;/span> 1) &lt;span style="color:#f92672">*&lt;/span> 100000));
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// éªŒè¯éªŒè¯ç æ˜¯å¦æ­£ç¡®&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">boolean&lt;/span> &lt;span style="color:#a6e22e">verifyCode&lt;/span>(String userId, String code,String key) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key &lt;span style="color:#f92672">=&lt;/span> key &lt;span style="color:#f92672">+&lt;/span> userId;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> String storedCode &lt;span style="color:#f92672">=&lt;/span> redisTemplate.&lt;span style="color:#a6e22e">opsForValue&lt;/span>().&lt;span style="color:#a6e22e">get&lt;/span>(key);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span> code.&lt;span style="color:#a6e22e">equals&lt;/span>(storedCode);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//åˆ é™¤redisä¸­éªŒè¯ç &lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">public&lt;/span> &lt;span style="color:#66d9ef">void&lt;/span> &lt;span style="color:#a6e22e">deleteCode&lt;/span>(String userId,String key) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key &lt;span style="color:#f92672">=&lt;/span> key &lt;span style="color:#f92672">+&lt;/span> userId;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> redisTemplate.&lt;span style="color:#a6e22e">delete&lt;/span>(key);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-java" data-lang="java">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">//å†™åœ¨éœ€è¦å‘é€éªŒè¯ç çš„åœ°æ–¹&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">//å­˜å‚¨æ—¶é—´&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#66d9ef">static&lt;/span> &lt;span style="color:#66d9ef">final&lt;/span> &lt;span style="color:#66d9ef">int&lt;/span> EXPIRATION_TIME_IN_MINUTES &lt;span style="color:#f92672">=&lt;/span> 3;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">//é”®å&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">private&lt;/span> &lt;span style="color:#66d9ef">static&lt;/span> &lt;span style="color:#66d9ef">final&lt;/span> String KEY_PREFIX &lt;span style="color:#f92672">==&lt;/span>&lt;span style="color:#e6db74">&amp;#34;xxx&amp;#34;&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> key&lt;span style="color:#f92672">=&lt;/span>KEY_PREFIX&lt;span style="color:#f92672">+&lt;/span>&lt;span style="color:#e6db74">&amp;#34;123456&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>redisTemplate.&lt;span style="color:#a6e22e">opsForValue&lt;/span>().&lt;span style="color:#a6e22e">set&lt;/span>(key, éšæœºæ•°å­—éªŒè¯ç , EXPIRATION_TIME_IN_MINUTES, TimeUnit.&lt;span style="color:#a6e22e">MINUTES&lt;/span>);
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></content></item><item><title>é¢è¯•è®°å½•</title><link>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/</link><pubDate>Tue, 01 Aug 2023 20:54:00 +0000</pubDate><guid>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/%E9%9D%A2%E8%AF%95%E8%AE%B0%E5%BD%95/</guid><description>&lt;p>{% timeline è‡³ä»Š ,color %}&lt;/p>
&lt;!-- timeline 2023-08-01 yb -->
&lt;ol>
&lt;li>mysql ä¸»ä»Žå¤åˆ¶å¼‚å¸¸æ€Žä¹ˆåŠž&lt;/li>
&lt;li>ThreadLocal æ²¡æœ‰ç­”ä¸Šæ¥&lt;/li>
&lt;li>å¼ºåº”ç”¨,å¼±å¼•ç”¨&lt;/li>
&lt;li>mybatisæºç ,myabtisæ€Žä¹ˆé€šè¿‡æŽ¥å£è°ƒç”¨åˆ°sqlçš„&lt;/li>
&lt;li>RabbitMQ å’Œ RocketMQçš„åŒºåˆ«&lt;/li>
&lt;li>Redisçš„æ•°æ®ç»“æž„æœ‰å“ªäº›&lt;/li>
&lt;li>é‡æž„ä»£ç ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼&lt;/li>
&lt;li>Spring Cloudçš„å¸¸ç”¨ç»„ä»¶&lt;/li>
&lt;li>violateå…³é”®å­—&lt;/li>
&lt;li>å®žçŽ°å¤šæ•°æ®æº&lt;/li>
&lt;li>Springäº‹åŠ¡ä¼ æ’­&lt;/li>
&lt;/ol>
&lt;!-- endtimeline -->
&lt;p>{% endtimeline %}&lt;/p></description><content>&lt;p>{% timeline è‡³ä»Š ,color %}&lt;/p>
&lt;!-- timeline 2023-08-01 yb -->
&lt;ol>
&lt;li>mysql ä¸»ä»Žå¤åˆ¶å¼‚å¸¸æ€Žä¹ˆåŠž&lt;/li>
&lt;li>ThreadLocal æ²¡æœ‰ç­”ä¸Šæ¥&lt;/li>
&lt;li>å¼ºåº”ç”¨,å¼±å¼•ç”¨&lt;/li>
&lt;li>mybatisæºç ,myabtisæ€Žä¹ˆé€šè¿‡æŽ¥å£è°ƒç”¨åˆ°sqlçš„&lt;/li>
&lt;li>RabbitMQ å’Œ RocketMQçš„åŒºåˆ«&lt;/li>
&lt;li>Redisçš„æ•°æ®ç»“æž„æœ‰å“ªäº›&lt;/li>
&lt;li>é‡æž„ä»£ç ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼&lt;/li>
&lt;li>Spring Cloudçš„å¸¸ç”¨ç»„ä»¶&lt;/li>
&lt;li>violateå…³é”®å­—&lt;/li>
&lt;li>å®žçŽ°å¤šæ•°æ®æº&lt;/li>
&lt;li>Springäº‹åŠ¡ä¼ æ’­&lt;/li>
&lt;/ol>
&lt;!-- endtimeline -->
&lt;p>{% endtimeline %}&lt;/p></content></item><item><title>Walineéƒ¨ç½²</title><link>https://connorzhangyu.com/posts/waline/</link><pubDate>Tue, 25 Jul 2023 00:05:46 +0000</pubDate><guid>https://connorzhangyu.com/posts/waline/</guid><description>&lt;p>æŸ¥çœ‹Walineæ–‡æ¡£,å¹¶ç‚¹å‡»&lt;code>Deploy&lt;/code>,æ–‡æ¡£ä¸Šæœ‰å¤§æ¦‚æ­¥éª¤,ä¹Ÿå¯ä»¥å‚è€ƒ,è¦ä½¿ç”¨å…è´¹çš„æ•°æ®åº“,æˆ‘å°±é€‰æ‹©&lt;code>MongoDB&lt;/code>,å¯ä»¥å…è´¹ç”³è¯·&lt;/p>
&lt;p>&lt;a href="https://waline.js.org/guide/deploy/vercel.html">Waline-Verceléƒ¨ç½²&lt;/a>&lt;/p>
&lt;p>éƒ¨ç½²Walineåˆ°Vercel
&lt;img src="https://image.runtimes.cc/202404051403234.png" alt="image-20230724225259528">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404626.png" alt="image-20230724225326229">&lt;/p>
&lt;p>æ‰“å¼€Vercelåˆ†é…çš„åœ°å€,æµ‹è¯•è¯„è®º,å°±ä¼šæ˜¾ç¤ºä¸‹å›¾,æ˜¯å› ä¸ºéœ€è¦é…ç½®æ•°æ®åº“
&lt;img src="https://image.runtimes.cc/202404051404342.png" alt="image-20230724225745349">&lt;/p>
&lt;p>ç”³è¯·å…è´¹çš„&lt;code>MongoDB&lt;/code>&lt;/p>
&lt;p>è®¿é—®&lt;a href="https://www.mongodb.com/zh-cn">MongoDBå®˜ç½‘&lt;/a>,å¹¶ç‚¹å‡»å…è´¹å¼€å§‹ä½¿ç”¨,è·³è½¬åˆ°æ³¨å†Œé¡µé¢,ç‚¹å‡»ä½¿ç”¨Googleè´¦å·ç™»é™†,ä¹Ÿå¯ä»¥è‡ªå·±æ³¨å†Œ,è¿™é‡Œæ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨Googleç™»é™†,ç™»é™†ä¹‹åŽéœ€è¦åŒæ„ä¸€äº›åè®®,å’Œè°ƒæŸ¥,éšä¾¿å¡«å†™,æ²¡æœ‰å¾ˆå¤§å…³ç³»&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404429.png" alt="image-20230724225938394">&lt;/p>
&lt;p>é€‰æ‹©å…è´¹çš„,å¹¶ç‚¹å‡»ä¸‹é¢çš„Create&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404269.png" alt="image-20230724230315868">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404594.png" alt="image-20230724230343845">&lt;/p>
&lt;p>ç­‰å¾…ä¸€ä¼š,ä¼šè‡ªåŠ¨å¼€å§‹åˆ›å»º&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404821.png" alt="image-20230724230509021">&lt;/p>
&lt;p>åˆ›å»ºæˆåŠŸ,ç„¶åŽç‚¹å‡»,Connect,è®¾ç½®ip,è®¾ç½®ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®&lt;/p>
&lt;p>ç‚¹å‡»Choose a connection method,åœ¨å¼¹å‡ºçš„çª—å£é€‰æ‹©&lt;code>Compass&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404159.png" alt="image-20230724231046357">&lt;/p>
&lt;p>èŽ·å–é“¾æŽ¥åœ°å€,è¿™é‡Œæœ‰ä¸ªå‘,Waineä½¿ç”¨çš„åŒ…æ¯”è¾ƒæ—§,æ–°ç‰ˆæœ¬çš„åè®®æ˜¯:mongod+srv,æ—§ç‰ˆæœ¬ä½¿ç”¨çš„mongodb,è¿™é‡Œçš„é€‰é¡¹,è¦ä½¿ç”¨æ—§ç‰ˆæœ¬,&lt;code>1.11 or earlier&lt;/code>&lt;/p>
&lt;p>æ­¥éª¤1èŽ·å–åˆ°çš„æ˜¯:MONGO_HOST&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405802.png" alt="image-20230725001040403">&lt;/p>
&lt;p>æŸ¥çœ‹Walineæ–‡æ¡£,æŸ¥çœ‹MongoDBéœ€è¦çš„çŽ¯å¢ƒé…ç½®&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405587.png" alt="image-20230724231654843">&lt;/p>
&lt;p>å…·ä½“çš„é…ç½®å¦‚ä¸‹:&lt;/p>
&lt;ol>
&lt;li>MONGO_HOST å°±æ˜¯ä»Žä¸Šé¢çš„æ­¥éª¤ä¸€ èŽ·å–åˆ°çš„&lt;/li>
&lt;li>é»˜è®¤ssl=true&lt;/li>
&lt;li>MONGO_AUTHSOURCE ä»Žä¸Šé¢æ­¥éª¤4èŽ·å–åˆ°çš„&lt;/li>
&lt;li>MONGO_USER å‰é¢åˆ›å»ºçš„ç”¨æˆ·å&lt;/li>
&lt;li>MONGO_PASSWORD å‰é¢åˆ›å»ºçš„å¯†ç &lt;/li>
&lt;li>MONGO_PORT è®¾ç½®é»˜è®¤å€¼&lt;/li>
&lt;li>MONGO_REPLICASET å¦‚æžœæ˜¯é»˜è®¤å€¼çš„è¯,å°±æ˜¯Cluster0, è‡ªå·±ä¿®æ”¹çš„è¯,å°±ç”¨è‡ªå·±çš„&lt;/li>
&lt;li>MONGO_DB = waline, è¿™ä¸ªå€¼ä¹Ÿå¯ä»¥éšä¾¿å¡«, ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºåº“,walineä¼šè‡ªåŠ¨åˆ›å»º&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405827.png" alt="image-20230725001132730">&lt;/p>
&lt;p>çŽ¯å¢ƒå˜é‡é…ç½®å¥½ä¹‹åŽ,é‡æ–°éƒ¨ç½²ä¸‹å°±è¡Œäº†&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405198.png" alt="image-20230725001724373">&lt;/p>
&lt;p>è¯„è®ºåœ°å€æ˜¯:&lt;code>vercelåˆ†é…çš„åŸŸå&lt;/code>&lt;/p>
&lt;p>åŽå°ç³»ç»Ÿæ˜¯:&lt;code>vercelåˆ†é…çš„åŸŸå/ui&lt;/code>&lt;/p></description><content>&lt;p>æŸ¥çœ‹Walineæ–‡æ¡£,å¹¶ç‚¹å‡»&lt;code>Deploy&lt;/code>,æ–‡æ¡£ä¸Šæœ‰å¤§æ¦‚æ­¥éª¤,ä¹Ÿå¯ä»¥å‚è€ƒ,è¦ä½¿ç”¨å…è´¹çš„æ•°æ®åº“,æˆ‘å°±é€‰æ‹©&lt;code>MongoDB&lt;/code>,å¯ä»¥å…è´¹ç”³è¯·&lt;/p>
&lt;p>&lt;a href="https://waline.js.org/guide/deploy/vercel.html">Waline-Verceléƒ¨ç½²&lt;/a>&lt;/p>
&lt;p>éƒ¨ç½²Walineåˆ°Vercel
&lt;img src="https://image.runtimes.cc/202404051403234.png" alt="image-20230724225259528">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404626.png" alt="image-20230724225326229">&lt;/p>
&lt;p>æ‰“å¼€Vercelåˆ†é…çš„åœ°å€,æµ‹è¯•è¯„è®º,å°±ä¼šæ˜¾ç¤ºä¸‹å›¾,æ˜¯å› ä¸ºéœ€è¦é…ç½®æ•°æ®åº“
&lt;img src="https://image.runtimes.cc/202404051404342.png" alt="image-20230724225745349">&lt;/p>
&lt;p>ç”³è¯·å…è´¹çš„&lt;code>MongoDB&lt;/code>&lt;/p>
&lt;p>è®¿é—®&lt;a href="https://www.mongodb.com/zh-cn">MongoDBå®˜ç½‘&lt;/a>,å¹¶ç‚¹å‡»å…è´¹å¼€å§‹ä½¿ç”¨,è·³è½¬åˆ°æ³¨å†Œé¡µé¢,ç‚¹å‡»ä½¿ç”¨Googleè´¦å·ç™»é™†,ä¹Ÿå¯ä»¥è‡ªå·±æ³¨å†Œ,è¿™é‡Œæ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨Googleç™»é™†,ç™»é™†ä¹‹åŽéœ€è¦åŒæ„ä¸€äº›åè®®,å’Œè°ƒæŸ¥,éšä¾¿å¡«å†™,æ²¡æœ‰å¾ˆå¤§å…³ç³»&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404429.png" alt="image-20230724225938394">&lt;/p>
&lt;p>é€‰æ‹©å…è´¹çš„,å¹¶ç‚¹å‡»ä¸‹é¢çš„Create&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404269.png" alt="image-20230724230315868">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404594.png" alt="image-20230724230343845">&lt;/p>
&lt;p>ç­‰å¾…ä¸€ä¼š,ä¼šè‡ªåŠ¨å¼€å§‹åˆ›å»º&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404821.png" alt="image-20230724230509021">&lt;/p>
&lt;p>åˆ›å»ºæˆåŠŸ,ç„¶åŽç‚¹å‡»,Connect,è®¾ç½®ip,è®¾ç½®ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®&lt;/p>
&lt;p>ç‚¹å‡»Choose a connection method,åœ¨å¼¹å‡ºçš„çª—å£é€‰æ‹©&lt;code>Compass&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404159.png" alt="image-20230724231046357">&lt;/p>
&lt;p>èŽ·å–é“¾æŽ¥åœ°å€,è¿™é‡Œæœ‰ä¸ªå‘,Waineä½¿ç”¨çš„åŒ…æ¯”è¾ƒæ—§,æ–°ç‰ˆæœ¬çš„åè®®æ˜¯:mongod+srv,æ—§ç‰ˆæœ¬ä½¿ç”¨çš„mongodb,è¿™é‡Œçš„é€‰é¡¹,è¦ä½¿ç”¨æ—§ç‰ˆæœ¬,&lt;code>1.11 or earlier&lt;/code>&lt;/p>
&lt;p>æ­¥éª¤1èŽ·å–åˆ°çš„æ˜¯:MONGO_HOST&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405802.png" alt="image-20230725001040403">&lt;/p>
&lt;p>æŸ¥çœ‹Walineæ–‡æ¡£,æŸ¥çœ‹MongoDBéœ€è¦çš„çŽ¯å¢ƒé…ç½®&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405587.png" alt="image-20230724231654843">&lt;/p>
&lt;p>å…·ä½“çš„é…ç½®å¦‚ä¸‹:&lt;/p>
&lt;ol>
&lt;li>MONGO_HOST å°±æ˜¯ä»Žä¸Šé¢çš„æ­¥éª¤ä¸€ èŽ·å–åˆ°çš„&lt;/li>
&lt;li>é»˜è®¤ssl=true&lt;/li>
&lt;li>MONGO_AUTHSOURCE ä»Žä¸Šé¢æ­¥éª¤4èŽ·å–åˆ°çš„&lt;/li>
&lt;li>MONGO_USER å‰é¢åˆ›å»ºçš„ç”¨æˆ·å&lt;/li>
&lt;li>MONGO_PASSWORD å‰é¢åˆ›å»ºçš„å¯†ç &lt;/li>
&lt;li>MONGO_PORT è®¾ç½®é»˜è®¤å€¼&lt;/li>
&lt;li>MONGO_REPLICASET å¦‚æžœæ˜¯é»˜è®¤å€¼çš„è¯,å°±æ˜¯Cluster0, è‡ªå·±ä¿®æ”¹çš„è¯,å°±ç”¨è‡ªå·±çš„&lt;/li>
&lt;li>MONGO_DB = waline, è¿™ä¸ªå€¼ä¹Ÿå¯ä»¥éšä¾¿å¡«, ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºåº“,walineä¼šè‡ªåŠ¨åˆ›å»º&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405827.png" alt="image-20230725001132730">&lt;/p>
&lt;p>çŽ¯å¢ƒå˜é‡é…ç½®å¥½ä¹‹åŽ,é‡æ–°éƒ¨ç½²ä¸‹å°±è¡Œäº†&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405198.png" alt="image-20230725001724373">&lt;/p>
&lt;p>è¯„è®ºåœ°å€æ˜¯:&lt;code>vercelåˆ†é…çš„åŸŸå&lt;/code>&lt;/p>
&lt;p>åŽå°ç³»ç»Ÿæ˜¯:&lt;code>vercelåˆ†é…çš„åŸŸå/ui&lt;/code>&lt;/p></content></item><item><title>Walineéƒ¨ç½²</title><link>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/waline/</link><pubDate>Tue, 25 Jul 2023 00:05:46 +0000</pubDate><guid>https://connorzhangyu.com/posts/%E8%AE%B0%E5%BD%95/waline/</guid><description>&lt;p>æŸ¥çœ‹Walineæ–‡æ¡£,å¹¶ç‚¹å‡»&lt;code>Deploy&lt;/code>,æ–‡æ¡£ä¸Šæœ‰å¤§æ¦‚æ­¥éª¤,ä¹Ÿå¯ä»¥å‚è€ƒ,è¦ä½¿ç”¨å…è´¹çš„æ•°æ®åº“,æˆ‘å°±é€‰æ‹©&lt;code>MongoDB&lt;/code>,å¯ä»¥å…è´¹ç”³è¯·&lt;/p>
&lt;p>&lt;a href="https://waline.js.org/guide/deploy/vercel.html">Waline-Verceléƒ¨ç½²&lt;/a>&lt;/p>
&lt;p>éƒ¨ç½²Walineåˆ°Vercel
&lt;img src="https://image.runtimes.cc/202404051403234.png" alt="image-20230724225259528">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404626.png" alt="image-20230724225326229">&lt;/p>
&lt;p>æ‰“å¼€Vercelåˆ†é…çš„åœ°å€,æµ‹è¯•è¯„è®º,å°±ä¼šæ˜¾ç¤ºä¸‹å›¾,æ˜¯å› ä¸ºéœ€è¦é…ç½®æ•°æ®åº“
&lt;img src="https://image.runtimes.cc/202404051404342.png" alt="image-20230724225745349">&lt;/p>
&lt;p>ç”³è¯·å…è´¹çš„&lt;code>MongoDB&lt;/code>&lt;/p>
&lt;p>è®¿é—®&lt;a href="https://www.mongodb.com/zh-cn">MongoDBå®˜ç½‘&lt;/a>,å¹¶ç‚¹å‡»å…è´¹å¼€å§‹ä½¿ç”¨,è·³è½¬åˆ°æ³¨å†Œé¡µé¢,ç‚¹å‡»ä½¿ç”¨Googleè´¦å·ç™»é™†,ä¹Ÿå¯ä»¥è‡ªå·±æ³¨å†Œ,è¿™é‡Œæ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨Googleç™»é™†,ç™»é™†ä¹‹åŽéœ€è¦åŒæ„ä¸€äº›åè®®,å’Œè°ƒæŸ¥,éšä¾¿å¡«å†™,æ²¡æœ‰å¾ˆå¤§å…³ç³»&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404429.png" alt="image-20230724225938394">&lt;/p>
&lt;p>é€‰æ‹©å…è´¹çš„,å¹¶ç‚¹å‡»ä¸‹é¢çš„Create&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404269.png" alt="image-20230724230315868">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404594.png" alt="image-20230724230343845">&lt;/p>
&lt;p>ç­‰å¾…ä¸€ä¼š,ä¼šè‡ªåŠ¨å¼€å§‹åˆ›å»º&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404821.png" alt="image-20230724230509021">&lt;/p>
&lt;p>åˆ›å»ºæˆåŠŸ,ç„¶åŽç‚¹å‡»,Connect,è®¾ç½®ip,è®¾ç½®ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®&lt;/p>
&lt;p>ç‚¹å‡»Choose a connection method,åœ¨å¼¹å‡ºçš„çª—å£é€‰æ‹©&lt;code>Compass&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404159.png" alt="image-20230724231046357">&lt;/p>
&lt;p>èŽ·å–é“¾æŽ¥åœ°å€,è¿™é‡Œæœ‰ä¸ªå‘,Waineä½¿ç”¨çš„åŒ…æ¯”è¾ƒæ—§,æ–°ç‰ˆæœ¬çš„åè®®æ˜¯:mongod+srv,æ—§ç‰ˆæœ¬ä½¿ç”¨çš„mongodb,è¿™é‡Œçš„é€‰é¡¹,è¦ä½¿ç”¨æ—§ç‰ˆæœ¬,&lt;code>1.11 or earlier&lt;/code>&lt;/p>
&lt;p>æ­¥éª¤1èŽ·å–åˆ°çš„æ˜¯:MONGO_HOST&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405802.png" alt="image-20230725001040403">&lt;/p>
&lt;p>æŸ¥çœ‹Walineæ–‡æ¡£,æŸ¥çœ‹MongoDBéœ€è¦çš„çŽ¯å¢ƒé…ç½®&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405587.png" alt="image-20230724231654843">&lt;/p>
&lt;p>å…·ä½“çš„é…ç½®å¦‚ä¸‹:&lt;/p>
&lt;ol>
&lt;li>MONGO_HOST å°±æ˜¯ä»Žä¸Šé¢çš„æ­¥éª¤ä¸€ èŽ·å–åˆ°çš„&lt;/li>
&lt;li>é»˜è®¤ssl=true&lt;/li>
&lt;li>MONGO_AUTHSOURCE ä»Žä¸Šé¢æ­¥éª¤4èŽ·å–åˆ°çš„&lt;/li>
&lt;li>MONGO_USER å‰é¢åˆ›å»ºçš„ç”¨æˆ·å&lt;/li>
&lt;li>MONGO_PASSWORD å‰é¢åˆ›å»ºçš„å¯†ç &lt;/li>
&lt;li>MONGO_PORT è®¾ç½®é»˜è®¤å€¼&lt;/li>
&lt;li>MONGO_REPLICASET å¦‚æžœæ˜¯é»˜è®¤å€¼çš„è¯,å°±æ˜¯Cluster0, è‡ªå·±ä¿®æ”¹çš„è¯,å°±ç”¨è‡ªå·±çš„&lt;/li>
&lt;li>MONGO_DB = waline, è¿™ä¸ªå€¼ä¹Ÿå¯ä»¥éšä¾¿å¡«, ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºåº“,walineä¼šè‡ªåŠ¨åˆ›å»º&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405827.png" alt="image-20230725001132730">&lt;/p>
&lt;p>çŽ¯å¢ƒå˜é‡é…ç½®å¥½ä¹‹åŽ,é‡æ–°éƒ¨ç½²ä¸‹å°±è¡Œäº†&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405198.png" alt="image-20230725001724373">&lt;/p>
&lt;p>è¯„è®ºåœ°å€æ˜¯:&lt;code>vercelåˆ†é…çš„åŸŸå&lt;/code>&lt;/p>
&lt;p>åŽå°ç³»ç»Ÿæ˜¯:&lt;code>vercelåˆ†é…çš„åŸŸå/ui&lt;/code>&lt;/p></description><content>&lt;p>æŸ¥çœ‹Walineæ–‡æ¡£,å¹¶ç‚¹å‡»&lt;code>Deploy&lt;/code>,æ–‡æ¡£ä¸Šæœ‰å¤§æ¦‚æ­¥éª¤,ä¹Ÿå¯ä»¥å‚è€ƒ,è¦ä½¿ç”¨å…è´¹çš„æ•°æ®åº“,æˆ‘å°±é€‰æ‹©&lt;code>MongoDB&lt;/code>,å¯ä»¥å…è´¹ç”³è¯·&lt;/p>
&lt;p>&lt;a href="https://waline.js.org/guide/deploy/vercel.html">Waline-Verceléƒ¨ç½²&lt;/a>&lt;/p>
&lt;p>éƒ¨ç½²Walineåˆ°Vercel
&lt;img src="https://image.runtimes.cc/202404051403234.png" alt="image-20230724225259528">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404626.png" alt="image-20230724225326229">&lt;/p>
&lt;p>æ‰“å¼€Vercelåˆ†é…çš„åœ°å€,æµ‹è¯•è¯„è®º,å°±ä¼šæ˜¾ç¤ºä¸‹å›¾,æ˜¯å› ä¸ºéœ€è¦é…ç½®æ•°æ®åº“
&lt;img src="https://image.runtimes.cc/202404051404342.png" alt="image-20230724225745349">&lt;/p>
&lt;p>ç”³è¯·å…è´¹çš„&lt;code>MongoDB&lt;/code>&lt;/p>
&lt;p>è®¿é—®&lt;a href="https://www.mongodb.com/zh-cn">MongoDBå®˜ç½‘&lt;/a>,å¹¶ç‚¹å‡»å…è´¹å¼€å§‹ä½¿ç”¨,è·³è½¬åˆ°æ³¨å†Œé¡µé¢,ç‚¹å‡»ä½¿ç”¨Googleè´¦å·ç™»é™†,ä¹Ÿå¯ä»¥è‡ªå·±æ³¨å†Œ,è¿™é‡Œæ˜¯ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨Googleç™»é™†,ç™»é™†ä¹‹åŽéœ€è¦åŒæ„ä¸€äº›åè®®,å’Œè°ƒæŸ¥,éšä¾¿å¡«å†™,æ²¡æœ‰å¾ˆå¤§å…³ç³»&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404429.png" alt="image-20230724225938394">&lt;/p>
&lt;p>é€‰æ‹©å…è´¹çš„,å¹¶ç‚¹å‡»ä¸‹é¢çš„Create&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404269.png" alt="image-20230724230315868">&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404594.png" alt="image-20230724230343845">&lt;/p>
&lt;p>ç­‰å¾…ä¸€ä¼š,ä¼šè‡ªåŠ¨å¼€å§‹åˆ›å»º&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404821.png" alt="image-20230724230509021">&lt;/p>
&lt;p>åˆ›å»ºæˆåŠŸ,ç„¶åŽç‚¹å‡»,Connect,è®¾ç½®ip,è®¾ç½®ä»»ä½•åœ°æ–¹éƒ½å¯ä»¥è®¿é—®&lt;/p>
&lt;p>ç‚¹å‡»Choose a connection method,åœ¨å¼¹å‡ºçš„çª—å£é€‰æ‹©&lt;code>Compass&lt;/code>&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051404159.png" alt="image-20230724231046357">&lt;/p>
&lt;p>èŽ·å–é“¾æŽ¥åœ°å€,è¿™é‡Œæœ‰ä¸ªå‘,Waineä½¿ç”¨çš„åŒ…æ¯”è¾ƒæ—§,æ–°ç‰ˆæœ¬çš„åè®®æ˜¯:mongod+srv,æ—§ç‰ˆæœ¬ä½¿ç”¨çš„mongodb,è¿™é‡Œçš„é€‰é¡¹,è¦ä½¿ç”¨æ—§ç‰ˆæœ¬,&lt;code>1.11 or earlier&lt;/code>&lt;/p>
&lt;p>æ­¥éª¤1èŽ·å–åˆ°çš„æ˜¯:MONGO_HOST&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405802.png" alt="image-20230725001040403">&lt;/p>
&lt;p>æŸ¥çœ‹Walineæ–‡æ¡£,æŸ¥çœ‹MongoDBéœ€è¦çš„çŽ¯å¢ƒé…ç½®&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405587.png" alt="image-20230724231654843">&lt;/p>
&lt;p>å…·ä½“çš„é…ç½®å¦‚ä¸‹:&lt;/p>
&lt;ol>
&lt;li>MONGO_HOST å°±æ˜¯ä»Žä¸Šé¢çš„æ­¥éª¤ä¸€ èŽ·å–åˆ°çš„&lt;/li>
&lt;li>é»˜è®¤ssl=true&lt;/li>
&lt;li>MONGO_AUTHSOURCE ä»Žä¸Šé¢æ­¥éª¤4èŽ·å–åˆ°çš„&lt;/li>
&lt;li>MONGO_USER å‰é¢åˆ›å»ºçš„ç”¨æˆ·å&lt;/li>
&lt;li>MONGO_PASSWORD å‰é¢åˆ›å»ºçš„å¯†ç &lt;/li>
&lt;li>MONGO_PORT è®¾ç½®é»˜è®¤å€¼&lt;/li>
&lt;li>MONGO_REPLICASET å¦‚æžœæ˜¯é»˜è®¤å€¼çš„è¯,å°±æ˜¯Cluster0, è‡ªå·±ä¿®æ”¹çš„è¯,å°±ç”¨è‡ªå·±çš„&lt;/li>
&lt;li>MONGO_DB = waline, è¿™ä¸ªå€¼ä¹Ÿå¯ä»¥éšä¾¿å¡«, ä¸ç”¨æ‰‹åŠ¨åˆ›å»ºåº“,walineä¼šè‡ªåŠ¨åˆ›å»º&lt;/li>
&lt;/ol>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405827.png" alt="image-20230725001132730">&lt;/p>
&lt;p>çŽ¯å¢ƒå˜é‡é…ç½®å¥½ä¹‹åŽ,é‡æ–°éƒ¨ç½²ä¸‹å°±è¡Œäº†&lt;/p>
&lt;p>&lt;img src="https://image.runtimes.cc/202404051405198.png" alt="image-20230725001724373">&lt;/p>
&lt;p>è¯„è®ºåœ°å€æ˜¯:&lt;code>vercelåˆ†é…çš„åŸŸå&lt;/code>&lt;/p>
&lt;p>åŽå°ç³»ç»Ÿæ˜¯:&lt;code>vercelåˆ†é…çš„åŸŸå/ui&lt;/code>&lt;/p></content></item></channel></rss>