<!doctype html><html lang=zh><head><title>ä½¿ç”¨ Docker å’Œ CI/CD å®ç° Java æœåŠ¡ä¸ Nginx Proxy Manager çš„è‡ªåŠ¨åŒ–éƒ¨ç½² :: Hello World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="ä½¿ç”¨ Docker å’Œ CI/CD å®ç° Java æœåŠ¡ä¸ Nginx Proxy Manager çš„è‡ªåŠ¨åŒ–éƒ¨ç½² åœ¨ç°ä»£å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒNginx Proxy Manager å¸¸è¢«ç”¨ä½œè½»é‡çº§çš„åå‘ä»£ç†ç®¡ç†å·¥å…·ï¼Œè€Œé€šè¿‡ Docker å’Œ CI/CD å·¥å…·ï¼ˆå¦‚ GitHub Actionsã€GitLab CI/CDï¼‰ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨åŒ–çš„éƒ¨ç½²å’Œé…ç½®ã€‚æœ¬ç¯‡åšå®¢å°†å¸¦ä½ ä¸€æ­¥æ­¥å®ç° Nginx Proxy Manager ä¸ Java æœåŠ¡çš„è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œé…ç½®ã€‚
ä¸€ã€èƒŒæ™¯ä¸ç›®æ ‡ ä¸ºä»€ä¹ˆé€‰æ‹© Nginx Proxy Managerï¼Ÿ
ç®€å•æ˜“ç”¨çš„ Web ç•Œé¢ã€‚ å†…ç½® Let&rsquo;s Encrypt è‡ªåŠ¨åŒ– SSL é…ç½®ã€‚ æ”¯æŒå¤šåŸŸåã€å¤šæœåŠ¡çš„åå‘ä»£ç†ã€‚ æˆ‘ä»¬çš„ç›®æ ‡ï¼š
ä½¿ç”¨ Docker éƒ¨ç½² Nginx Proxy Manager å’Œ Java æœåŠ¡ã€‚ åœ¨ CI/CD æµç¨‹ä¸­è‡ªåŠ¨åŒ–åå‘ä»£ç†é…ç½®ã€‚ æ”¯æŒå¤šç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰çš„åŠ¨æ€åˆ‡æ¢ã€‚ äºŒã€å‡†å¤‡å·¥ä½œ å®‰è£… Docker å’Œ Docker Compose
ç¡®ä¿æœåŠ¡å™¨å·²å®‰è£…ï¼š
Dockerï¼šå®‰è£…æŒ‡å— Docker Composeï¼šå®‰è£…æŒ‡å— å‡†å¤‡ä¸€ä¸ªè¿è¡Œä¸­çš„ Java æœåŠ¡
å‡è®¾ä½ å·²æœ‰ä¸€ä¸ª Java åº”ç”¨ï¼ˆå¦‚ Spring Boot é¡¹ç›®ï¼‰ï¼Œå¹¶æ‰“åŒ…æˆ Docker é•œåƒã€‚
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://connorzhangyu.com/posts/11143717-ed32-46f5-9ce6-5b4945a0c69b/><link rel=stylesheet href=https://connorzhangyu.com/styles.css><link rel="shortcut icon" href=https://connorzhangyu.com/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://connorzhangyu.com/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="Connor"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="og:title" content="ä½¿ç”¨ Docker å’Œ CI/CD å®ç° Java æœåŠ¡ä¸ Nginx Proxy Manager çš„è‡ªåŠ¨åŒ–éƒ¨ç½²"><meta property="og:description" content="ä½¿ç”¨ Docker å’Œ CI/CD å®ç° Java æœåŠ¡ä¸ Nginx Proxy Manager çš„è‡ªåŠ¨åŒ–éƒ¨ç½² åœ¨ç°ä»£å¾®æœåŠ¡æ¶æ„ä¸­ï¼ŒNginx Proxy Manager å¸¸è¢«ç”¨ä½œè½»é‡çº§çš„åå‘ä»£ç†ç®¡ç†å·¥å…·ï¼Œè€Œé€šè¿‡ Docker å’Œ CI/CD å·¥å…·ï¼ˆå¦‚ GitHub Actionsã€GitLab CI/CDï¼‰ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨åŒ–çš„éƒ¨ç½²å’Œé…ç½®ã€‚æœ¬ç¯‡åšå®¢å°†å¸¦ä½ ä¸€æ­¥æ­¥å®ç° Nginx Proxy Manager ä¸ Java æœåŠ¡çš„è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œé…ç½®ã€‚
ä¸€ã€èƒŒæ™¯ä¸ç›®æ ‡ ä¸ºä»€ä¹ˆé€‰æ‹© Nginx Proxy Managerï¼Ÿ
ç®€å•æ˜“ç”¨çš„ Web ç•Œé¢ã€‚ å†…ç½® Let&rsquo;s Encrypt è‡ªåŠ¨åŒ– SSL é…ç½®ã€‚ æ”¯æŒå¤šåŸŸåã€å¤šæœåŠ¡çš„åå‘ä»£ç†ã€‚ æˆ‘ä»¬çš„ç›®æ ‡ï¼š
ä½¿ç”¨ Docker éƒ¨ç½² Nginx Proxy Manager å’Œ Java æœåŠ¡ã€‚ åœ¨ CI/CD æµç¨‹ä¸­è‡ªåŠ¨åŒ–åå‘ä»£ç†é…ç½®ã€‚ æ”¯æŒå¤šç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰çš„åŠ¨æ€åˆ‡æ¢ã€‚ äºŒã€å‡†å¤‡å·¥ä½œ å®‰è£… Docker å’Œ Docker Compose
ç¡®ä¿æœåŠ¡å™¨å·²å®‰è£…ï¼š
Dockerï¼šå®‰è£…æŒ‡å— Docker Composeï¼šå®‰è£…æŒ‡å— å‡†å¤‡ä¸€ä¸ªè¿è¡Œä¸­çš„ Java æœåŠ¡
å‡è®¾ä½ å·²æœ‰ä¸€ä¸ª Java åº”ç”¨ï¼ˆå¦‚ Spring Boot é¡¹ç›®ï¼‰ï¼Œå¹¶æ‰“åŒ…æˆ Docker é•œåƒã€‚
"><meta property="og:url" content="https://connorzhangyu.com/posts/11143717-ed32-46f5-9ce6-5b4945a0c69b/"><meta property="og:site_name" content="Hello World"><meta property="og:image" content="https://connorzhangyu.com/"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2024-12-06 21:06:48 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>åº·çº³çš„è®°ä»‡å°æœ¬æœ¬</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;â–¾</li><li><ul class=menu__dropdown><li><a href=/about>å…³äº</a></li><li><a href=/showcase>ç²¾é€‰</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/about>å…³äº</a></li><li><a href=/showcase>ç²¾é€‰</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://connorzhangyu.com/posts/11143717-ed32-46f5-9ce6-5b4945a0c69b/>ä½¿ç”¨ Docker å’Œ CI/CD å®ç° Java æœåŠ¡ä¸ Nginx Proxy Manager çš„è‡ªåŠ¨åŒ–éƒ¨ç½²</a></h1><div class=post-meta><time class=post-date>2024-12-06</time><span class=post-author>Connor</span></div><div class=post-content><div><h1 id=ä½¿ç”¨-docker-å’Œ-cicd-å®ç°-java-æœåŠ¡ä¸-nginx-proxy-manager-çš„è‡ªåŠ¨åŒ–éƒ¨ç½²>ä½¿ç”¨ Docker å’Œ CI/CD å®ç° Java æœåŠ¡ä¸ Nginx Proxy Manager çš„è‡ªåŠ¨åŒ–éƒ¨ç½²<a href=#ä½¿ç”¨-docker-å’Œ-cicd-å®ç°-java-æœåŠ¡ä¸-nginx-proxy-manager-çš„è‡ªåŠ¨åŒ–éƒ¨ç½² class=hanchor arialabel=Anchor>&#8983;</a></h1><p>åœ¨ç°ä»£å¾®æœåŠ¡æ¶æ„ä¸­ï¼Œ<strong>Nginx Proxy Manager</strong> å¸¸è¢«ç”¨ä½œè½»é‡çº§çš„åå‘ä»£ç†ç®¡ç†å·¥å…·ï¼Œè€Œé€šè¿‡ <strong>Docker</strong> å’Œ <strong>CI/CD å·¥å…·</strong>ï¼ˆå¦‚ GitHub Actionsã€GitLab CI/CDï¼‰ï¼Œå¯ä»¥å®ç°è‡ªåŠ¨åŒ–çš„éƒ¨ç½²å’Œé…ç½®ã€‚æœ¬ç¯‡åšå®¢å°†å¸¦ä½ ä¸€æ­¥æ­¥å®ç° Nginx Proxy Manager ä¸ Java æœåŠ¡çš„è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œé…ç½®ã€‚</p><hr><h2 id=ä¸€èƒŒæ™¯ä¸ç›®æ ‡>ä¸€ã€èƒŒæ™¯ä¸ç›®æ ‡<a href=#ä¸€èƒŒæ™¯ä¸ç›®æ ‡ class=hanchor arialabel=Anchor>&#8983;</a></h2><p><strong>ä¸ºä»€ä¹ˆé€‰æ‹© Nginx Proxy Managerï¼Ÿ</strong></p><ul><li>ç®€å•æ˜“ç”¨çš„ Web ç•Œé¢ã€‚</li><li>å†…ç½® Let&rsquo;s Encrypt è‡ªåŠ¨åŒ– SSL é…ç½®ã€‚</li><li>æ”¯æŒå¤šåŸŸåã€å¤šæœåŠ¡çš„åå‘ä»£ç†ã€‚</li></ul><p><strong>æˆ‘ä»¬çš„ç›®æ ‡ï¼š</strong></p><ol><li>ä½¿ç”¨ Docker éƒ¨ç½² Nginx Proxy Manager å’Œ Java æœåŠ¡ã€‚</li><li>åœ¨ CI/CD æµç¨‹ä¸­è‡ªåŠ¨åŒ–åå‘ä»£ç†é…ç½®ã€‚</li><li>æ”¯æŒå¤šç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰çš„åŠ¨æ€åˆ‡æ¢ã€‚</li></ol><hr><h2 id=äºŒå‡†å¤‡å·¥ä½œ>äºŒã€å‡†å¤‡å·¥ä½œ<a href=#äºŒå‡†å¤‡å·¥ä½œ class=hanchor arialabel=Anchor>&#8983;</a></h2><ol><li><p><strong>å®‰è£… Docker å’Œ Docker Compose</strong><br>ç¡®ä¿æœåŠ¡å™¨å·²å®‰è£…ï¼š</p><ul><li>Dockerï¼š<a href=https://docs.docker.com/get-docker/>å®‰è£…æŒ‡å—</a></li><li>Docker Composeï¼š<a href=https://docs.docker.com/compose/install/>å®‰è£…æŒ‡å—</a></li></ul></li><li><p><strong>å‡†å¤‡ä¸€ä¸ªè¿è¡Œä¸­çš„ Java æœåŠ¡</strong><br>å‡è®¾ä½ å·²æœ‰ä¸€ä¸ª Java åº”ç”¨ï¼ˆå¦‚ Spring Boot é¡¹ç›®ï¼‰ï¼Œå¹¶æ‰“åŒ…æˆ Docker é•œåƒã€‚</p></li><li><p><strong>æ‹¥æœ‰ä¸€ä¸ªåŸŸåï¼ˆå¯é€‰ï¼‰</strong><br>å¦‚æœéœ€è¦é€šè¿‡åŸŸåè®¿é—®æœåŠ¡ï¼Œå¯ä»¥åœ¨ DNS é…ç½®ä¸­æŒ‡å‘ä½ çš„æœåŠ¡å™¨ IPã€‚</p></li></ol><hr><h2 id=ä¸‰docker-compose-é…ç½®>ä¸‰ã€Docker Compose é…ç½®<a href=#ä¸‰docker-compose-é…ç½® class=hanchor arialabel=Anchor>&#8983;</a></h2><p>ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹çš„ <code>docker-compose.yml</code> æ–‡ä»¶ï¼Œç”¨äºéƒ¨ç½² Nginx Proxy Manager å’Œ Java æœåŠ¡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>version</span>: <span style=color:#e6db74>&#39;3.8&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>services</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>nginx-proxy-manager</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>jc21/nginx-proxy-manager:latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>nginx-proxy-manager</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;80:80&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;443:443&#34;</span>
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;81:81&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>./data:/data</span>
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>./letsencrypt:/etc/letsencrypt</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>java-service</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>image</span>: <span style=color:#ae81ff>my-java-app:latest</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>container_name</span>: <span style=color:#ae81ff>java-service</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>restart</span>: <span style=color:#ae81ff>unless-stopped</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>SPRING_PROFILES_ACTIVE=prod</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>      - <span style=color:#e6db74>&#34;8080:8080&#34;</span>
</span></span></code></pre></div><p>å¯åŠ¨æœåŠ¡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose up -d
</span></span></code></pre></div><p>è®¿é—® Nginx Proxy Manager ç®¡ç†ç•Œé¢ï¼š<a href=http://%3c%E6%9C%8D%E5%8A%A1%E5%99%A8IP%3e:81>http://&lt;æœåŠ¡å™¨IP>:81</a><br>é»˜è®¤ç™»å½•è´¦å·ï¼š<strong><a href=mailto:admin@example.com>admin@example.com</a></strong>ï¼Œå¯†ç ï¼š<strong>changeme</strong>ã€‚</p><hr><h2 id=å››å‚æ•°åŒ–é…ç½®æ”¯æŒå¤šç¯å¢ƒ>å››ã€å‚æ•°åŒ–é…ç½®æ”¯æŒå¤šç¯å¢ƒ<a href=#å››å‚æ•°åŒ–é…ç½®æ”¯æŒå¤šç¯å¢ƒ class=hanchor arialabel=Anchor>&#8983;</a></h2><p>é€šè¿‡ <code>.env</code> æ–‡ä»¶ç®¡ç†ç¯å¢ƒå˜é‡ï¼Œä»¥æ”¯æŒä¸åŒçš„ç¯å¢ƒï¼ˆå¦‚å¼€å‘ã€æµ‹è¯•ã€ç”Ÿäº§ï¼‰ã€‚ä»¥ä¸‹æ˜¯ <code>.env</code> æ–‡ä»¶çš„ç¤ºä¾‹ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-env data-lang=env><span style=display:flex><span>SPRING_PROFILES_ACTIVE<span style=color:#f92672>=</span>prod
</span></span><span style=display:flex><span>NGINX_DOMAIN<span style=color:#f92672>=</span>myapp.example.com
</span></span><span style=display:flex><span>NGINX_FORWARD_HOST<span style=color:#f92672>=</span>java-service
</span></span><span style=display:flex><span>NGINX_FORWARD_PORT<span style=color:#f92672>=</span><span style=color:#ae81ff>8080</span>
</span></span></code></pre></div><p>åœ¨ <code>docker-compose.yml</code> ä¸­åŠ¨æ€åŠ è½½ç¯å¢ƒå˜é‡ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>environment</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>SPRING_PROFILES_ACTIVE=${SPRING_PROFILES_ACTIVE}</span>
</span></span></code></pre></div><p>è¿è¡Œæ—¶åŠ è½½ <code>.env</code> æ–‡ä»¶ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker-compose --env-file .env up -d
</span></span></code></pre></div><hr><h2 id=äº”è‡ªåŠ¨åŒ–åå‘ä»£ç†é…ç½®>äº”ã€è‡ªåŠ¨åŒ–åå‘ä»£ç†é…ç½®<a href=#äº”è‡ªåŠ¨åŒ–åå‘ä»£ç†é…ç½® class=hanchor arialabel=Anchor>&#8983;</a></h2><p>ä¸ºäº†è‡ªåŠ¨åŒ–é…ç½® Nginx Proxy Managerï¼Œå¯ä»¥é€‰æ‹©ä»¥ä¸‹ä¸¤ç§æ–¹å¼ï¼š</p><h3 id=æ–¹å¼-1ä½¿ç”¨-api-é…ç½®æ¨è>æ–¹å¼ 1ï¼šä½¿ç”¨ API é…ç½®ï¼ˆæ¨èï¼‰<a href=#æ–¹å¼-1ä½¿ç”¨-api-é…ç½®æ¨è class=hanchor arialabel=Anchor>&#8983;</a></h3><ol><li><p><strong>è·å– API Token</strong><br>ç™»å½• API è·å–ç®¡ç†å‘˜æƒé™çš„ Tokenï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X POST <span style=color:#e6db74>&#34;http://&lt;NGINX_PROXY_MANAGER_IP&gt;:81/api/tokens&#34;</span>        -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span>        -d <span style=color:#e6db74>&#39;{&#34;identity&#34;: &#34;admin@example.com&#34;, &#34;secret&#34;: &#34;password&#34;}&#39;</span>
</span></span></code></pre></div></li><li><p><strong>è‡ªåŠ¨åˆ›å»ºåå‘ä»£ç†è§„åˆ™</strong><br>é€šè¿‡ API åŠ¨æ€æ·»åŠ ä»£ç†è§„åˆ™ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>curl -X POST <span style=color:#e6db74>&#34;http://&lt;NGINX_PROXY_MANAGER_IP&gt;:81/api/nginx/proxy-hosts&#34;</span>        -H <span style=color:#e6db74>&#34;Authorization: Bearer &lt;TOKEN&gt;&#34;</span>        -H <span style=color:#e6db74>&#34;Content-Type: application/json&#34;</span>        -d <span style=color:#e6db74>&#39;{
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;domain_names&#34;: [&#34;${NGINX_DOMAIN}&#34;],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;forward_host&#34;: &#34;${NGINX_FORWARD_HOST}&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;forward_port&#34;: ${NGINX_FORWARD_PORT},
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;access_list_id&#34;: 0,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;certificate_id&#34;: 0,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      &#34;ssl_forced&#34;: false
</span></span></span><span style=display:flex><span><span style=color:#e6db74>    }&#39;</span>
</span></span></code></pre></div></li></ol><h3 id=æ–¹å¼-2ç›´æ¥æ“ä½œ-sqlite-æ•°æ®åº“>æ–¹å¼ 2ï¼šç›´æ¥æ“ä½œ SQLite æ•°æ®åº“<a href=#æ–¹å¼-2ç›´æ¥æ“ä½œ-sqlite-æ•°æ®åº“ class=hanchor arialabel=Anchor>&#8983;</a></h3><p>å¦‚æœä½ ç†Ÿæ‚‰ SQLiteï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹ Nginx Proxy Manager çš„ <code>data/database.sqlite</code> æ–‡ä»¶ï¼Œæ‰¹é‡æ·»åŠ è§„åˆ™ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>sqlite3 ./data/database.sqlite <span style=color:#e6db74>&lt;&lt;EOF
</span></span></span><span style=display:flex><span><span style=color:#e6db74>INSERT INTO proxy_host (domain_names, forward_host, forward_port, ...) VALUES (...);
</span></span></span><span style=display:flex><span><span style=color:#e6db74>EOF</span>
</span></span></code></pre></div><hr><h2 id=å…­é›†æˆåˆ°-cicd-æµç¨‹>å…­ã€é›†æˆåˆ° CI/CD æµç¨‹<a href=#å…­é›†æˆåˆ°-cicd-æµç¨‹ class=hanchor arialabel=Anchor>&#8983;</a></h2><p>ä»¥ä¸‹ä»¥ <strong>GitHub Actions</strong> ä¸ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ CI/CD æµç¨‹ä¸­è‡ªåŠ¨åŒ–éƒ¨ç½²å’Œé…ç½®ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>name</span>: <span style=color:#ae81ff>CI/CD for Java Service and Nginx Proxy Manager</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>on</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>push</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>branches</span>:
</span></span><span style=display:flex><span>      - <span style=color:#ae81ff>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>jobs</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>deploy</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>runs-on</span>: <span style=color:#ae81ff>ubuntu-latest</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>steps</span>:
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Checkout code</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>actions/checkout@v3</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Set up Docker</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>uses</span>: <span style=color:#ae81ff>docker/setup-buildx-action@v2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Deploy Java Service and Nginx Proxy Manager</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          docker-compose -f docker-compose.yml --env-file .env up -d</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>      - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>Configure Nginx Proxy Manager</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>run</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          curl -X POST &#34;http://nginx-proxy-manager:81/api/nginx/proxy-hosts&#34;               -H &#34;Authorization: Bearer ${{ secrets.NPM_API_TOKEN }}&#34;               -H &#34;Content-Type: application/json&#34;               -d &#39;{&#34;domain_names&#34;: [&#34;${NGINX_DOMAIN}&#34;], &#34;forward_host&#34;: &#34;${NGINX_FORWARD_HOST}&#34;, &#34;forward_port&#34;: ${NGINX_FORWARD_PORT}}&#39;</span>
</span></span></code></pre></div><hr><h2 id=ä¸ƒæ€»ç»“>ä¸ƒã€æ€»ç»“<a href=#ä¸ƒæ€»ç»“ class=hanchor arialabel=Anchor>&#8983;</a></h2><p>é€šè¿‡ä»¥ä¸Šæ–¹æ³•ï¼Œæˆ‘ä»¬å®ç°äº†ï¼š</p><ol><li><strong>Nginx Proxy Manager ä¸ Java æœåŠ¡çš„ Docker åŒ–éƒ¨ç½²</strong>ã€‚</li><li><strong>æ”¯æŒå¤šç¯å¢ƒçš„åŠ¨æ€ä»£ç†é…ç½®</strong>ã€‚</li><li><strong>ä¸ CI/CD æµç¨‹æ— ç¼é›†æˆï¼Œè‡ªåŠ¨åŒ–éƒ¨ç½²ä¸æµ‹è¯•</strong>ã€‚</li></ol><p>è¿™ä¸ä»…æé«˜äº†éƒ¨ç½²æ•ˆç‡ï¼Œè¿˜ä¿è¯äº†é…ç½®çš„ä¸€è‡´æ€§ï¼Œéå¸¸é€‚åˆç°ä»£åŒ–å¾®æœåŠ¡æ¶æ„çš„éœ€æ±‚ã€‚</p><hr><p>å¸Œæœ›è¿™ç¯‡å†…å®¹å¯¹ä½ æœ‰æ‰€å¸®åŠ©ï¼æ¬¢è¿è¯„è®ºä¸åˆ†äº«ï¼ ğŸ‰</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://connorzhangyu.com/posts/%E5%A6%82%E4%BD%95%E8%A7%84%E5%88%92-aws-%E5%AD%A6%E4%B9%A0%E4%B8%8E%E8%AE%A4%E8%AF%81%E8%B7%AF%E5%BE%84%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E6%9E%B6%E6%9E%84%E5%B8%88/><span class=button__icon>â†</span>
<span class=button__text>å¦‚ä½•è§„åˆ’ AWS å­¦ä¹ ä¸è®¤è¯è·¯å¾„ï¼šä»å…¥é—¨åˆ°æ¶æ„å¸ˆ</span>
</a></span><span class="button next"><a href=https://connorzhangyu.com/posts/flutter/><span class=button__text>Flutter</span>
<span class=button__icon>â†’</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>Â© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/mirus-ua/hugo-theme-re-terminal target=_blank>Theme</a> made by <a href=https://github.com/mirus-ua target=_blank>Mirus</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>