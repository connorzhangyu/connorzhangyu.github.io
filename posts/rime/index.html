<!doctype html><html lang=zh><head><title>Rime :: Hello World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Rime教程"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=../../posts/rime/><link rel=stylesheet href=../../styles.css><link rel="shortcut icon" href=../../img/theme-colors/orange.png><link rel=apple-touch-icon href=../../img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="Anthony"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="og:title" content="Rime"><meta property="og:description" content="Rime教程"><meta property="og:url" content="/posts/rime/"><meta property="og:site_name" content="Hello World"><meta property="og:image" content="https://image.runtimes.cc/202404051532600.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="软件"><meta property="article:published_time" content="2023-07-02 22:37:34 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=../../><div class=logo>康纳的记仇小本本</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=../../about>关于</a></li><li><a href=../../showcase>精选</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=../../about>关于</a></li><li><a href=../../showcase>精选</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=../../posts/rime/>Rime</a></h1><div class=post-meta><time class=post-date>2023-07-02</time><span class=post-author>Anthony</span></div><span class=post-tags>#<a href=../../tags/%E7%AC%94%E8%AE%B0/>笔记</a>&nbsp;
</span><img src=https://image.runtimes.cc/202404051532600.png class=post-cover alt=" " title="Cover Image"><div class=post-content><div><h1 id=基本概念>基本概念<a href=#基本概念 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>Rime 是一个输入法框架，并不是狭义上的“输入法”，而是将各种输入法的共性抽象出来的算法框架。通过不同的配置文件，Rime 可以支持多种输入方案（Schema），这个所谓的输入方案就是我们狭义上的“输入法”。比如朙月拼音输入法就是 Rime 自带的一种输入方案，另外还有比如四叶草输入法（https://github.com/fkxxyz/rime-cloverpinyin）等等。鼠须管、小狼毫、中州韵分别是 Rime 在不同操作系统下的实现程序。Rime 的配置、词库文件均使用文本方式，便于修改。所有文件均要求以 UTF-8 编码。在配置文件中，以 # 号开头表示注释。</p><h1 id=配置文件所在的目录>配置文件所在的目录<a href=#配置文件所在的目录 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>Rime 有两个重要的配置目录：</p><h2 id=共享配置目录>共享配置目录<a href=#共享配置目录 class=hanchor arialabel=Anchor>&#8983;</a></h2><ul><li>【中州韻】 <code>/usr/share/rime-data/</code></li><li>【小狼毫】 <code>"安裝目錄\data"</code></li><li>【鼠鬚管】 <code>"/Library/Input Methods/Squirrel.app/Contents/SharedSupport/"</code></li></ul><h2 id=用户配置目录>用户配置目录<a href=#用户配置目录 class=hanchor arialabel=Anchor>&#8983;</a></h2><ul><li>【中州韻】 <code>~/.config/ibus/rime/</code> （0.9.1 以下版本爲 <code>~/.ibus/rime/</code>）</li><li>【小狼毫】 <code>%APPDATA%\Rime</code></li><li>【鼠鬚管】 <code>~/Library/Rime/</code></li></ul><p>共享目录下放置的是 Rime 的预设配置，在软件版本更新时候，也会自动更新该目录下的文件。所以请不要修改该目录下的文件。</p><p>用户目录则放置用户自定义的配置文件。我们要做的修改都放在用户目录下。</p><p>对于鼠须管而言，用户目录初始时只有如下几个文件。</p><ul><li><p><code>installion.yaml</code> 文件记录的是当前 Rime 程序的版本信息。其中有一个字段 <code>installation_id</code> 用来在同步用户词典时唯一标记当前 Rime 程序。</p></li><li><p><code>user.yaml</code> 文件记录用户的使用状态。比如上次“重新部署”的时间戳，上次选择的输入方案等。</p></li><li><p><code>build</code> 目录下放的是每次“重新部署”后生成的文件。包括字典文件编译后生成的「.bin」文件，包括与自定义配置合并后生成的各种 yaml 配置文件。</p></li><li><p><code>xxx.userdb</code> 目录下放的是对应输入方案的用户词典。即用户在使用时候选择的词组、词频等动态信息，这个目录是实时更新的。</p></li><li><p><code>sync</code> 目录是用来做用户数据同步的。每个 <code>sync/installation_id</code> 目录对应不同电脑上的 Rime 程序的用户数据。（如果你由多台电脑安装了 Rime，并设置了同步。）按照作者的说法，Rime 的用户词典同步原理是：</p></li><li><p>手工从其他电脑复制或者从网盘自动同步 ⇒ <code>sync/*/*.userdb.txt</code> ⇒ 合并到本地 <code>*.userdb</code> ⇒ 导出到 <code>sync/&lt;installation_id>/*.userdb.txt</code>。</p></li></ul><h2 id=关于调试>关于调试<a href=#关于调试 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Rime 的日志目录放在如下为止：</p><ul><li>【中州韻】 <code>/tmp/rime.ibus.*</code></li><li>【小狼毫】 <code>%TEMP%\rime.weasel.*</code></li><li>【鼠鬚管】 <code>$TMPDIR/rime.squirrel.*</code></li><li>早期版本 <code>用户配置目录/rime.log</code></li></ul><h1 id=修改配置>修改配置<a href=#修改配置 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>如果想要修改配置，请不要直接修改原有的 <code>xxx.yaml</code> 文件，而是应该新建一份 <code>xxx.custom.yaml</code> 文件，其中 <code>xxx</code> 与原文件名相同。</p><p>在 <code>.custom.yaml</code> 文件中对于要修改的配置项，都需要放在 <code>patch</code> 根节点下面。</p><p>每次修改配置，都需要在鼠须管的菜单中选择“重新部署”后才能生效。</p><h2 id=修改候选词个数>修改候选词个数<a href=#修改候选词个数 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Rime 默认每次出现的候选词个数为 5 个，我们可以将其修改为 1~9 之间的任意数。</p><p>在用户目录下新建一个 <code>default.custom.yaml</code> 文件（<code>default.yaml</code> 文件可以在共享配置目录下找到），写入如下内容：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>patch</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;menu/page_size&#34;: </span><span style=color:#ae81ff>9</span>   <span style=color:#75715e># 字段名加不加双引号都可以</span>
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e># 或者是這樣</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>patch</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>menu</span>: 
</span></span><span style=display:flex><span>    <span style=color:#f92672>page_size</span>: <span style=color:#ae81ff>8</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 但是注意这种写法是覆盖整个 menu 字段。好在默认情况下，menu 下一级也只有 page_size 字段，如果是有多个下级字段，请不要这么写。 </span>
</span></span></code></pre></div><p>上面的 <code>default</code> 文件是修改所有输入方案的候选词个数，如果只想针对某个输入方案做调整，比如对于朙月输入方案，那么只需要在用户目录下建立 <code>luna_pinyin.custom.yaml</code> 文件并写入如上内容，再重新部署即可。（注意，对输入方案定义文件 <code>xxx.schema.yaml</code> 的修改，新建的文件名只需要是 <code>xxx.custom.yaml</code>，并不需要加上 <code>schema</code>，写成 <code>xxx.schema.custom.yaml</code> 这样。）</p><p>使用，使用快捷键<code>F4</code>，然后像拼音打字选候选字一样，选择就好</p><p>输入方案的可切换状态，请参考后续的 <code>switches</code> 章节</p><h2 id=主题>主题<a href=#主题 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>鼠须管的外观配置文件是 <code>squirrel.yaml</code>（小狼毫的外观配置文件是 <code>weasel.yaml</code>）。所以我们需要在用户配置目录下新建一个 <code>squirrel.custom.yaml</code>，参考或者拷贝开源项目的写法，通常有很多个主题，我们可以通过 <code>style/color_scheme</code> 来选择一个主题</p><p><a href=https://github.dev/ssnhd/rime/blob/25462b6e887a3c3ff9b77d193a4cf3d18c334c7f/%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6/luna_pinyin_simp.custom.yaml>开源项目的主题文件</a></p><blockquote><p>参考:</p><p><a href=https://www.hawu.me/others/2666>鼠须管输入法配置 - 哈呜.王 (hawu.me)</a></p><p><a href=https://zhuanlan.zhihu.com/p/474994157>Rime Squirrel 鼠须管输入法配置详解 - 知乎 (zhihu.com)</a></p></blockquote></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=../../posts/telegrambot/><span class=button__icon>←</span>
<span class=button__text>Telegram Bot</span>
</a></span><span class="button next"><a href=../../posts/wordpress/><span class=button__text>WordPress</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/mirus-ua/hugo-theme-re-terminal target=_blank>Theme</a> made by <a href=https://github.com/mirus-ua target=_blank>Mirus</a></span></div></div></footer><script type=text/javascript src=../../bundle.min.js></script></div></body></html>