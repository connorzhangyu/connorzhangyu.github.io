<!doctype html><html lang=zh><head><title>如何通过 EC2 实例连接 Amazon RDS 数据库 :: Hello World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="如何通过 EC2 实例连接 Amazon RDS 数据库 在云开发中，Amazon RDS 是一种强大而方便的托管数据库服务，但它通常处于一个受保护的私有网络中，无法直接从本地访问。如果你想在本地使用图形化工具（如 DBeaver 或 HeidiSQL）访问 RDS 数据库，可以通过 Amazon EC2 实例作为跳板实现。这篇文章将手把手教你如何完成这项操作。
1. 为什么需要通过 EC2 访问 RDS？ Amazon RDS 默认部署在私有子网中，只有同一网络中的资源可以访问。直接将 RDS 公开到公网会带来安全风险，因此更好的办法是利用 EC2 实例作为跳板，通过 SSH 隧道安全地访问 RDS。这种方式既能保证数据库的安全性，也能满足开发需求。
2. 准备工作 在开始操作之前，请确保以下内容已准备好：
RDS 实例信息：
记录 RDS 的连接端点（Endpoint）、端口（通常是 3306）以及数据库的用户名和密码。 EC2 实例信息：
确保 EC2 实例处于运行状态，并记录其公有 IP 地址（或域名）。 下载并保存 EC2 实例的 .pem SSH 密钥文件。 安全组配置：
RDS 安全组：允许 EC2 实例的安全组访问 RDS 的端口（如 3306）。 EC2 安全组：允许本地 IP 地址的 SSH 入站访问（端口 22）。 3. 在本地创建 SSH 隧道 SSH 隧道是连接本地客户端和 RDS 数据库的桥梁。以下是设置方法：
"><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://connorzhangyu.com/posts/%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87-ec2-%E5%AE%9E%E4%BE%8B%E8%BF%9E%E6%8E%A5-amazon-rds-%E6%95%B0%E6%8D%AE%E5%BA%93/><link rel=stylesheet href=https://connorzhangyu.com/styles.css><link rel="shortcut icon" href=https://connorzhangyu.com/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://connorzhangyu.com/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="Connor"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="og:title" content="如何通过 EC2 实例连接 Amazon RDS 数据库"><meta property="og:description" content="如何通过 EC2 实例连接 Amazon RDS 数据库 在云开发中，Amazon RDS 是一种强大而方便的托管数据库服务，但它通常处于一个受保护的私有网络中，无法直接从本地访问。如果你想在本地使用图形化工具（如 DBeaver 或 HeidiSQL）访问 RDS 数据库，可以通过 Amazon EC2 实例作为跳板实现。这篇文章将手把手教你如何完成这项操作。
1. 为什么需要通过 EC2 访问 RDS？ Amazon RDS 默认部署在私有子网中，只有同一网络中的资源可以访问。直接将 RDS 公开到公网会带来安全风险，因此更好的办法是利用 EC2 实例作为跳板，通过 SSH 隧道安全地访问 RDS。这种方式既能保证数据库的安全性，也能满足开发需求。
2. 准备工作 在开始操作之前，请确保以下内容已准备好：
RDS 实例信息：
记录 RDS 的连接端点（Endpoint）、端口（通常是 3306）以及数据库的用户名和密码。 EC2 实例信息：
确保 EC2 实例处于运行状态，并记录其公有 IP 地址（或域名）。 下载并保存 EC2 实例的 .pem SSH 密钥文件。 安全组配置：
RDS 安全组：允许 EC2 实例的安全组访问 RDS 的端口（如 3306）。 EC2 安全组：允许本地 IP 地址的 SSH 入站访问（端口 22）。 3. 在本地创建 SSH 隧道 SSH 隧道是连接本地客户端和 RDS 数据库的桥梁。以下是设置方法：
"><meta property="og:url" content="https://connorzhangyu.com/posts/%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87-ec2-%E5%AE%9E%E4%BE%8B%E8%BF%9E%E6%8E%A5-amazon-rds-%E6%95%B0%E6%8D%AE%E5%BA%93/"><meta property="og:site_name" content="Hello World"><meta property="og:image" content="https://connorzhangyu.com/"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2024-12-17 17:42:26 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>康纳的记仇小本本</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/about>关于</a></li><li><a href=/showcase>精选</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/about>关于</a></li><li><a href=/showcase>精选</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://connorzhangyu.com/posts/%E5%A6%82%E4%BD%95%E9%80%9A%E8%BF%87-ec2-%E5%AE%9E%E4%BE%8B%E8%BF%9E%E6%8E%A5-amazon-rds-%E6%95%B0%E6%8D%AE%E5%BA%93/>如何通过 EC2 实例连接 Amazon RDS 数据库</a></h1><div class=post-meta><time class=post-date>2024-12-17</time><span class=post-author>Connor</span></div><div class=post-content><div><h1 id=如何通过-ec2-实例连接-amazon-rds-数据库>如何通过 EC2 实例连接 Amazon RDS 数据库<a href=#如何通过-ec2-实例连接-amazon-rds-数据库 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>在云开发中，Amazon RDS 是一种强大而方便的托管数据库服务，但它通常处于一个受保护的私有网络中，无法直接从本地访问。如果你想在本地使用图形化工具（如 DBeaver 或 HeidiSQL）访问 RDS 数据库，可以通过 Amazon EC2 实例作为跳板实现。这篇文章将手把手教你如何完成这项操作。</p><hr><h2 id=1-为什么需要通过-ec2-访问-rds>1. 为什么需要通过 EC2 访问 RDS？<a href=#1-为什么需要通过-ec2-访问-rds class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Amazon RDS 默认部署在私有子网中，只有同一网络中的资源可以访问。直接将 RDS 公开到公网会带来安全风险，因此更好的办法是利用 EC2 实例作为跳板，通过 SSH 隧道安全地访问 RDS。这种方式既能保证数据库的安全性，也能满足开发需求。</p><hr><h2 id=2-准备工作>2. 准备工作<a href=#2-准备工作 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>在开始操作之前，请确保以下内容已准备好：</p><ol><li><p><strong>RDS 实例信息</strong>：</p><ul><li>记录 RDS 的连接端点（Endpoint）、端口（通常是 3306）以及数据库的用户名和密码。</li></ul></li><li><p><strong>EC2 实例信息</strong>：</p><ul><li>确保 EC2 实例处于运行状态，并记录其公有 IP 地址（或域名）。</li><li>下载并保存 EC2 实例的 <code>.pem</code> SSH 密钥文件。</li></ul></li><li><p><strong>安全组配置</strong>：</p><ul><li><strong>RDS 安全组</strong>：允许 EC2 实例的安全组访问 RDS 的端口（如 3306）。</li><li><strong>EC2 安全组</strong>：允许本地 IP 地址的 SSH 入站访问（端口 22）。</li></ul></li></ol><hr><h2 id=3-在本地创建-ssh-隧道>3. 在本地创建 SSH 隧道<a href=#3-在本地创建-ssh-隧道 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>SSH 隧道是连接本地客户端和 RDS 数据库的桥梁。以下是设置方法：</p><h3 id=命令行方式创建-ssh-隧道>命令行方式创建 SSH 隧道<a href=#命令行方式创建-ssh-隧道 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>在本地终端或命令行中运行以下命令：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>ssh -i &lt;your-key.pem&gt; -L 3306:&lt;RDS_Endpoint&gt;:3306 ubuntu@&lt;EC2_Public_IP&gt;
</span></span></code></pre></div><ul><li><strong>参数说明</strong>：<ul><li><code>&lt;your-key.pem></code>：EC2 实例的 SSH 密钥文件路径。</li><li><code>-L 3306:&lt;RDS_Endpoint>:3306</code>：本地端口 3306 被映射到 RDS 的端口 3306。</li><li><code>ubuntu@&lt;EC2_Public_IP></code>：EC2 的用户名和公网 IP。</li></ul></li></ul><p>保持此终端窗口开启，SSH 隧道会一直处于激活状态。</p><hr><h2 id=4-使用本地图形客户端连接-rds>4. 使用本地图形客户端连接 RDS<a href=#4-使用本地图形客户端连接-rds class=hanchor arialabel=Anchor>&#8983;</a></h2><p>SSH 隧道建立后，可以通过图形化工具连接 RDS。以下以 <strong>DBeaver</strong> 为例：</p><h3 id=步骤-1下载并安装-dbeaver>步骤 1：下载并安装 DBeaver<a href=#步骤-1下载并安装-dbeaver class=hanchor arialabel=Anchor>&#8983;</a></h3><p>从 <a href=https://dbeaver.io/>DBeaver 官网</a> 下载适合你系统的版本并安装。</p><h3 id=步骤-2新建数据库连接>步骤 2：新建数据库连接<a href=#步骤-2新建数据库连接 class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>打开 DBeaver，点击菜单 <strong>File > New Database Connection</strong>。</li><li>在弹出的窗口中，选择数据库类型（例如 MySQL 或 PostgreSQL）。</li></ul><h3 id=步骤-3填写连接信息>步骤 3：填写连接信息<a href=#步骤-3填写连接信息 class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li><strong>Host</strong>：填写 <code>127.0.0.1</code>（因为通过 SSH 隧道，本地端口被映射到 RDS）。</li><li><strong>Port</strong>：填写本地映射的端口号（如 3306）。</li><li><strong>Database</strong>：填写 RDS 中的数据库名称。</li><li><strong>Username</strong>：RDS 数据库的用户名。</li><li><strong>Password</strong>：RDS 数据库的密码。</li></ul><h3 id=步骤-4测试连接>步骤 4：测试连接<a href=#步骤-4测试连接 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>点击 <strong>Test Connection</strong> 按钮，验证连接是否成功。如果一切配置正确，DBeaver 会提示连接成功。</p><hr><h2 id=5-常见问题及解决方法>5. 常见问题及解决方法<a href=#5-常见问题及解决方法 class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=1-ssh-隧道连接失败>1. SSH 隧道连接失败<a href=#1-ssh-隧道连接失败 class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>确保本地终端可以通过 SSH 连接到 EC2。</li><li>检查命令中 <code>.pem</code> 文件路径和 EC2 公网 IP 是否正确。</li><li>检查 EC2 的安全组规则是否允许 SSH 访问。</li></ul><h3 id=2-数据库客户端无法连接-rds>2. 数据库客户端无法连接 RDS<a href=#2-数据库客户端无法连接-rds class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>确保 RDS 的安全组允许来自 EC2 实例的流量。</li><li>检查本地客户端的连接信息是否正确，<code>Host</code> 应为 <code>127.0.0.1</code>，<code>Port</code> 应为 3306。</li></ul><h3 id=3-ssh-隧道断开>3. SSH 隧道断开<a href=#3-ssh-隧道断开 class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li>确保终端窗口保持打开状态，或者使用工具如 <code>tmux</code> 或 <code>autossh</code> 来保持连接。</li></ul><hr><h2 id=6-自动化-ssh-隧道>6. 自动化 SSH 隧道<a href=#6-自动化-ssh-隧道 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>如果频繁需要访问 RDS，可以使用以下方式简化操作：</p><h3 id=使用工具创建隧道>使用工具创建隧道<a href=#使用工具创建隧道 class=hanchor arialabel=Anchor>&#8983;</a></h3><ul><li><strong>Windows 用户</strong>可以使用 PuTTY 设置 SSH 转发规则。</li><li>在工具（如 DBeaver 或 DataGrip）中直接配置内置的 SSH 隧道。</li></ul><h3 id=脚本化-ssh-隧道>脚本化 SSH 隧道<a href=#脚本化-ssh-隧道 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>编写脚本，自动建立 SSH 隧道：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># connect_rds.sh</span>
</span></span><span style=display:flex><span>ssh -i &lt;your-key.pem&gt; -L 3306:&lt;RDS_Endpoint&gt;:3306 ubuntu@&lt;EC2_Public_IP&gt;
</span></span></code></pre></div><p>使用命令运行脚本：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>bash connect_rds.sh
</span></span></code></pre></div><hr><h2 id=总结>总结<a href=#总结 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>通过 EC2 实例连接 RDS 是一种安全且高效的方式，适合本地开发和调试工作。使用 SSH 隧道可以在保护数据库安全的同时，灵活地通过本地图形化工具管理数据库。如果你有更复杂的需求，还可以结合 VPC Peering 或专线连接进一步优化。</p><p>希望这篇文章能帮你顺利连接到 RDS 数据库！如果有任何问题或建议，欢迎留言讨论。</p><hr><p><strong>标签</strong>：<code>AWS</code> <code>RDS</code> <code>EC2</code> <code>SSH隧道</code> <code>云数据库管理</code></p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://connorzhangyu.com/posts/%E5%8C%85%E7%BD%91%E5%92%8Csaas%E5%AE%83%E4%BB%AC%E6%98%AF%E5%90%8C%E4%B8%80%E5%9B%9E%E4%BA%8B%E5%90%97/><span class=button__icon>←</span>
<span class=button__text>包网和SaaS：它们是同一回事吗？</span>
</a></span><span class="button next"><a href=https://connorzhangyu.com/posts/%E4%BD%BF%E7%94%A8-nginx-+-cloudflare-+-docker-%E9%83%A8%E7%BD%B2-java-%E6%9C%8D%E5%8A%A1%E7%9A%84%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/><span class=button__text>使用 Nginx + Cloudflare + Docker 部署 Java 服务的最佳实践</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/mirus-ua/hugo-theme-re-terminal target=_blank>Theme</a> made by <a href=https://github.com/mirus-ua target=_blank>Mirus</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>