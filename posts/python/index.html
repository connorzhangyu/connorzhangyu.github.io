<!doctype html><html lang=zh><head><title>Python :: Hello World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='安装 虚拟环境 # 判断有没有虚拟环境 virtualenv -V # 安装虚拟环境 # 需要sudo pip install virtualenv pip install virtualenvwrapper # 查看有多少虚拟环境的文件夹 workon # 创建虚拟环境文件夹 mkvirtualenv 文件夹名字 # 从虚拟文件夹退出 deactiave # 进入虚拟环境中 workon 虚拟环境名称 # 删除虚拟环境 rmvirutalenv # 查看虚拟环境有哪些框架,要在虚拟环境中执行 pip freeze # 安装软件指定版本,要在虚拟环境中执行 pip install flask==10.0.0.0 # 导出虚拟环境中的所有扩展,要在虚拟环境中执行 pip freeze > requirements.txt # 安装,要在虚拟环境中执行 pip install -r requirements.txt centos7安装python3 特别是在喜欢环境中已经安装的python2.x的版本中
# 这个可能不一定要装 sudo yum -y groupinstall "Development tools" # 需要的 sudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel # 下载安装包 wget https://www.python.org/ftp/python/3.7.0/Python-3.7.0a1.tar.xz # 解压 tar -xvxf Python-3.7.0a1.tar.xz # 复制文件夹 mv Python-3.7.0 /usr/local # 进入到文件夹 cd /usr/local/Python-3.7.0/ # 编译,一定需要后面的参数 ./configure --prefix=/usr/local/bin/python3 make & make install # 添加软连接 ln -s /usr/local/bin/python3/bin/python3 /usr/bin/python3 ln -s /usr/local/bin/python3/bin/pip3 /usr/bin/pip3 # 验证 python3 pip3 基础 1.注释 # 注释后面需要一个空格 print("单行注释") print("单行注释") # 单行注释和代码之间至少要有两个空格 """ 多行注释 """ print("这是多行注释") 2.算数运算符 乘法的使用,用*可以拼接字符串
'><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=../../posts/python/><link rel=stylesheet href=../../styles.css><link rel="shortcut icon" href=../../img/theme-colors/orange.png><link rel=apple-touch-icon href=../../img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="Anthony"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="og:title" content="Python"><meta property="og:description" content='安装 虚拟环境 # 判断有没有虚拟环境 virtualenv -V # 安装虚拟环境 # 需要sudo pip install virtualenv pip install virtualenvwrapper # 查看有多少虚拟环境的文件夹 workon # 创建虚拟环境文件夹 mkvirtualenv 文件夹名字 # 从虚拟文件夹退出 deactiave # 进入虚拟环境中 workon 虚拟环境名称 # 删除虚拟环境 rmvirutalenv # 查看虚拟环境有哪些框架,要在虚拟环境中执行 pip freeze # 安装软件指定版本,要在虚拟环境中执行 pip install flask==10.0.0.0 # 导出虚拟环境中的所有扩展,要在虚拟环境中执行 pip freeze > requirements.txt # 安装,要在虚拟环境中执行 pip install -r requirements.txt centos7安装python3 特别是在喜欢环境中已经安装的python2.x的版本中
# 这个可能不一定要装 sudo yum -y groupinstall "Development tools" # 需要的 sudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel # 下载安装包 wget https://www.python.org/ftp/python/3.7.0/Python-3.7.0a1.tar.xz # 解压 tar -xvxf Python-3.7.0a1.tar.xz # 复制文件夹 mv Python-3.7.0 /usr/local # 进入到文件夹 cd /usr/local/Python-3.7.0/ # 编译,一定需要后面的参数 ./configure --prefix=/usr/local/bin/python3 make & make install # 添加软连接 ln -s /usr/local/bin/python3/bin/python3 /usr/bin/python3 ln -s /usr/local/bin/python3/bin/pip3 /usr/bin/pip3 # 验证 python3 pip3 基础 1.注释 # 注释后面需要一个空格 print("单行注释") print("单行注释") # 单行注释和代码之间至少要有两个空格 """ 多行注释 """ print("这是多行注释") 2.算数运算符 乘法的使用,用*可以拼接字符串
'><meta property="og:url" content="/posts/python/"><meta property="og:site_name" content="Hello World"><meta property="og:image" content="https://image.runtimes.cc/202404051532070.png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Python"><meta property="article:published_time" content="2022-11-19 18:25:00 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=../../><div class=logo>康纳的记仇小本本</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=../../about>关于</a></li><li><a href=../../showcase>精选</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=../../about>关于</a></li><li><a href=../../showcase>精选</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=../../posts/python/>Python</a></h1><div class=post-meta><time class=post-date>2022-11-19</time><span class=post-author>Anthony</span></div><span class=post-tags>#<a href=../../tags/python/>Python</a>&nbsp;
#<a href=../../tags/%E6%95%99%E7%A8%8B/>教程</a>&nbsp;
#<a href=../../tags/%E7%AC%94%E8%AE%B0/>笔记</a>&nbsp;
</span><img src=https://image.runtimes.cc/202404051532070.png class=post-cover alt=" " title="Cover Image"><div class=post-content><div><h1 id=安装>安装<a href=#安装 class=hanchor arialabel=Anchor>&#8983;</a></h1><h1 id=虚拟环境>虚拟环境<a href=#虚拟环境 class=hanchor arialabel=Anchor>&#8983;</a></h1><pre tabindex=0><code># 判断有没有虚拟环境
virtualenv -V

# 安装虚拟环境
# 需要sudo
pip install virtualenv
pip install virtualenvwrapper

# 查看有多少虚拟环境的文件夹
workon

# 创建虚拟环境文件夹
mkvirtualenv 文件夹名字

# 从虚拟文件夹退出
deactiave

# 进入虚拟环境中
workon 虚拟环境名称

# 删除虚拟环境
rmvirutalenv

# 查看虚拟环境有哪些框架,要在虚拟环境中执行
pip freeze

# 安装软件指定版本,要在虚拟环境中执行
pip install flask==10.0.0.0

# 导出虚拟环境中的所有扩展,要在虚拟环境中执行
pip freeze &gt; requirements.txt

# 安装,要在虚拟环境中执行
pip install -r requirements.txt
</code></pre><h1 id=centos7安装python3>centos7安装python3<a href=#centos7安装python3 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>特别是在喜欢环境中已经安装的python2.x的版本中</p><pre tabindex=0><code># 这个可能不一定要装
sudo yum -y groupinstall &#34;Development tools&#34;

# 需要的
sudo yum -y install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel

# 下载安装包
wget https://www.python.org/ftp/python/3.7.0/Python-3.7.0a1.tar.xz

# 解压
tar -xvxf  Python-3.7.0a1.tar.xz

# 复制文件夹
mv Python-3.7.0 /usr/local

# 进入到文件夹
cd /usr/local/Python-3.7.0/

# 编译,一定需要后面的参数
./configure --prefix=/usr/local/bin/python3
make &amp; make install

# 添加软连接
ln -s /usr/local/bin/python3/bin/python3 /usr/bin/python3
ln -s /usr/local/bin/python3/bin/pip3 /usr/bin/pip3

# 验证
python3
pip3
</code></pre><h1 id=基础>基础<a href=#基础 class=hanchor arialabel=Anchor>&#8983;</a></h1><h1 id=1注释>1.注释<a href=#1注释 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 注释后面需要一个空格</span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;单行注释&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;单行注释&#34;</span>)  <span style=color:#75715e># 单行注释和代码之间至少要有两个空格</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>多行注释
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;这是多行注释&#34;</span>)
</span></span></code></pre></div><h1 id=2算数运算符>2.算数运算符<a href=#2算数运算符 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>乘法的使用,用<code>*</code>可以拼接字符串</p><pre tabindex=0><code>In [1]: &#34;A&#34; * 30
Out[1]: &#39;AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA&#39;

In [2]: 1 * 30
Out[2]: 30
</code></pre><p>优先级</p><p><code>幂</code> ><code>*</code> > <code>/</code>  > <code>%</code> > <code>//</code> ><code>+</code> > <code>-</code></p><h1 id=3变量>3.变量<a href=#3变量 class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=31变量的类型>3.1.变量的类型<a href=#31变量的类型 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>数字型</p><ul><li>整数 int</li><li>浮点 float(<code>计算要小心</code>)</li><li>布尔<ul><li>布尔值可以用 <code>and</code>、<code>or</code> 和 <code>not</code> 运算</li></ul></li><li>复数(用于科学技术的)</li></ul><p>非数字型</p><ul><li>String（字符串）</li><li>List（列表）</li><li>Tuple（元组）</li><li>Dictionary（字典）</li></ul><h3 id=32type函数>3.2.type函数<a href=#32type函数 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 整数</span>
</span></span><span style=display:flex><span>print(type(<span style=color:#ae81ff>1</span>))
</span></span><span style=display:flex><span><span style=color:#75715e># 浮点数</span>
</span></span><span style=display:flex><span>print(type(<span style=color:#ae81ff>1.5</span>))
</span></span><span style=display:flex><span><span style=color:#75715e># 字符串</span>
</span></span><span style=display:flex><span>print(type(<span style=color:#e6db74>&#34;hello world&#34;</span>))
</span></span><span style=display:flex><span><span style=color:#75715e># 空值</span>
</span></span><span style=display:flex><span>print(type(<span style=color:#66d9ef>None</span>))
</span></span></code></pre></div><h3 id=33不同类型的变量之间的计算>3.3.不同类型的变量之间的计算<a href=#33不同类型的变量之间的计算 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>In [10]: age =13

In [11]: sex =True

In [12]: height = 180.1

In [13]: age + sex
Out[13]: 14

In [14]: age + height
Out[14]: 193.1

In [15]: age + height
Out[15]: 193.1

# 字符串的拼接
In [17]: first_name =&#34;东尼&#34;
In [18]: last_name=&#34;安&#34;
In [19]: last_name+first_name
Out[19]: &#39;安东尼&#39;

# 字符串不能和数字相加
In [20]: last_name + 10
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
&lt;ipython-input-20-45feb354f2d0&gt; in &lt;module&gt;
----&gt; 1 last_name + 10

TypeError: can only concatenate str (not &#34;int&#34;) to str
</code></pre><h3 id=34变量的输入>3.4.变量的输入<a href=#34变量的输入 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code># 可以不需要参数
In [24]: input()
123

# 加参数,做提示
In [27]: pwd = input(&#34;输入数字&#34;)
输入数字123

In [28]: pwd + &#34;456&#34;
Out[28]: &#39;123456&#39;
</code></pre><h3 id=35数据类型转换>3.5.数据类型转换<a href=#35数据类型转换 class=hanchor arialabel=Anchor>&#8983;</a></h3><table><thead><tr><th>方法名</th><th>含义</th></tr></thead><tbody><tr><td>str()</td><td>转成字符串</td></tr><tr><td>float()</td><td>转成浮点</td></tr><tr><td>int()</td><td>转成int</td></tr></tbody></table><pre tabindex=0><code># 数字和字符串相互转
In [3]: age = 23

In [4]: type(age)
Out[4]: int

In [5]: age_str = str(age)

In [6]: type(age_str)
Out[6]: str

In [7]: type(int(age_str))
Out[7]: int

# 浮点转数值,缺失精度
In [9]: pi = &#34;3.14&#34;
In [10]: pi
Out[10]: &#39;3.14&#39;

In [13]: type(float(pi))
Out[13]: float

In [15]: int(float(pi))
Out[15]: 3
</code></pre><h3 id=36变量的格式化输出>3.6.变量的格式化输出<a href=#36变量的格式化输出 class=hanchor arialabel=Anchor>&#8983;</a></h3><table><thead><tr><th>符号</th><th>描述</th></tr></thead><tbody><tr><td>%c</td><td>格式化字符(输出数值对应的ASCII码)</td></tr><tr><td>%s</td><td>格式化字符串</td></tr><tr><td>%d</td><td>格式化整数(%06d,不足的补0)</td></tr><tr><td>%x</td><td>格式化十六进制数（小写）</td></tr><tr><td>%X</td><td>格式化十六进制数（大写）</td></tr><tr><td>%o</td><td>格式化八进制数</td></tr><tr><td>%f</td><td>格式化浮点数字，可以指定小数点精度(%.2f)</td></tr><tr><td>%%</td><td>输出%号</td></tr></tbody></table><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;&#39;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>我的名字是:anthony,请多多关照
</span></span></span><span style=display:flex><span><span style=color:#e6db74>我的学号是:000001,请多多关照
</span></span></span><span style=display:flex><span><span style=color:#e6db74>单价是:1.00,购买了2.00斤,总价是:2.000
</span></span></span><span style=display:flex><span><span style=color:#e6db74>数据的比例是:20%
</span></span></span><span style=display:flex><span><span style=color:#e6db74>&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;我的名字是:</span><span style=color:#e6db74>%s</span><span style=color:#e6db74>,请多多关照&#34;</span> <span style=color:#f92672>%</span> <span style=color:#e6db74>&#34;anthony&#34;</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;我的学号是:</span><span style=color:#e6db74>%06d</span><span style=color:#e6db74>,请多多关照&#34;</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;单价是:</span><span style=color:#e6db74>%.2f</span><span style=color:#e6db74>,购买了</span><span style=color:#e6db74>%.2f</span><span style=color:#e6db74>斤,总价是:</span><span style=color:#e6db74>%.3f</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> (<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>2</span>))
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;数据的比例是:</span><span style=color:#e6db74>%02d%%</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> <span style=color:#ae81ff>20</span>)
</span></span></code></pre></div><h3 id=37变量的命名>3.7.变量的命名<a href=#37变量的命名 class=hanchor arialabel=Anchor>&#8983;</a></h3><ol><li>字母,和下划线和数字组成</li><li>不能以数字开始</li><li>不能与关键字重名</li><li>其余的符号都不行</li><li>区分大小写</li><li><code>=</code>左右都要添加空格</li><li>两个单词之间用<code>_</code></li></ol><h1 id=4条件控制>4.条件控制<a href=#4条件控制 class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=41if>4.1.if<a href=#41if class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>age <span style=color:#f92672>=</span> <span style=color:#ae81ff>15</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> age <span style=color:#f92672>&gt;=</span> <span style=color:#ae81ff>18</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;成年了&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;在一个缩进的,是一个代码块&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>elif</span> age<span style=color:#f92672>&lt;=</span><span style=color:#ae81ff>18</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;没有成年&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;输入错误&#34;</span>)
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;结束了&#34;</span>)
</span></span></code></pre></div><h3 id=42逻辑运算符>4.2.逻辑运算符<a href=#42逻辑运算符 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>print(<span style=color:#66d9ef>True</span> <span style=color:#f92672>and</span> <span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>print(<span style=color:#66d9ef>True</span> <span style=color:#f92672>or</span> <span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>print(<span style=color:#f92672>not</span> <span style=color:#66d9ef>True</span>)
</span></span></code></pre></div><h3 id=43随机数>4.3.随机数<a href=#43随机数 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>In [<span style=color:#ae81ff>17</span>]: <span style=color:#f92672>import</span> random
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>18</span>]: random<span style=color:#f92672>.</span>randint(<span style=color:#ae81ff>12</span>,<span style=color:#ae81ff>20</span>)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>18</span>]: <span style=color:#ae81ff>12</span>
</span></span></code></pre></div><h3 id=43while>4.3.while<a href=#43while class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>i <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> i <span style=color:#f92672>&lt;</span> <span style=color:#ae81ff>5</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;....&#34;</span>)
</span></span><span style=display:flex><span>    i <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><h3 id=44continue-和-break>4.4.continue 和 break<a href=#44continue-和-break class=hanchor arialabel=Anchor>&#8983;</a></h3><p>如果是嵌套循环,用这个两个关键字,也只是结束当前的循环,不会影响外层的循环</p><h1 id=5函数>5.函数<a href=#5函数 class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=51函数注释>5.1.函数注释<a href=#51函数注释 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 这个也是可以注释的</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>test</span>():
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;&#34;&#34;这个也是可以注释的&#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;打印乘法表&#34;</span>)
</span></span></code></pre></div><h3 id=52函数调用>5.2.函数调用<a href=#52函数调用 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>index.py</p><pre tabindex=0><code>def chengfabiao():
    print(&#34;打印乘法表&#34;)
</code></pre><p>test.py</p><pre tabindex=0><code>import index
index.chengfabiao()
</code></pre><h3 id=53局部方法修改全局变量>5.3.局部方法修改全局变量<a href=#53局部方法修改全局变量 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>num =10

def mo():
    # 声明num是全部变量
    global num
    num=100
    print(num)

mo()
print(num)
</code></pre><h3 id=54多个返回值>5.4.多个返回值<a href=#54多个返回值 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>change</span>(x,y):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> y,x
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>x <span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>y<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>x,y <span style=color:#f92672>=</span> change(<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>print(x)
</span></span><span style=display:flex><span>print(y)
</span></span></code></pre></div><h3 id=55缺省函数>5.5.缺省函数<a href=#55缺省函数 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>def measure(age,gender=1):
    print(age)
    print(gender)

def measure2(age,gender=1,name=&#34;anthony&#34;):
    print(age)
    print(gender)
    print(name)

measure(1)
measure(1,2)

# 有多个缺省的时候,需要指定参数名称
measure2(1,name=&#34;anthonyyang&#34;,gender=2)

# 拆包
measure(1,*(2,3,4),**{&#34;name&#34;:&#34;anthony&#34;})
</code></pre><h3 id=56多值参数>5.6.多值参数<a href=#56多值参数 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>习惯存元祖的使用用<code>*args</code>,存字典的时候用<code>**args</code></p><h3 id=57函数的参数-默认参数>5.7.函数的参数-默认参数<a href=#57函数的参数-默认参数 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my_print</span>(name,age):
</span></span><span style=display:flex><span>    print(name,age)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my_print2</span>(name,age<span style=color:#f92672>=</span><span style=color:#ae81ff>13</span>):
</span></span><span style=display:flex><span>    print(name,age)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 有默认值的形参,不能放在前面,会报错</span>
</span></span><span style=display:flex><span><span style=color:#75715e># def my_print3(age=13,name):</span>
</span></span><span style=display:flex><span><span style=color:#75715e>#    print(name,age)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>my_print(<span style=color:#e6db74>&#34;anthony&#34;</span>,<span style=color:#ae81ff>12</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>my_print2(<span style=color:#e6db74>&#34;anthony2&#34;</span>,<span style=color:#ae81ff>123</span>)
</span></span><span style=display:flex><span>my_print2(<span style=color:#e6db74>&#34;anthony2&#34;</span>)
</span></span></code></pre></div><h3 id=58函数的参数-关键字参数>5.8.函数的参数-关键字参数<a href=#58函数的参数-关键字参数 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my_print</span>(name,address):
</span></span><span style=display:flex><span>    print(name,address)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>my_print(<span style=color:#e6db74>&#34;anthony&#34;</span>,<span style=color:#e6db74>&#34;广东&#34;</span>)
</span></span><span style=display:flex><span>my_print(<span style=color:#e6db74>&#34;广东&#34;</span>,<span style=color:#e6db74>&#34;anthony&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>my_print(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;anthony&#34;</span>,address<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;广东&#34;</span>)
</span></span><span style=display:flex><span>my_print(address<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;广东&#34;</span>,name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;anthony&#34;</span>,)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># ----------------**kw是关键字参数，且 hobby 就是一个 dict （字典）-------------</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my_print2</span>(name,address,<span style=color:#f92672>**</span>kw):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#39;age&#39;</span> <span style=color:#f92672>in</span> kw:
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;age=&#34;</span>,kw[<span style=color:#e6db74>&#34;age&#34;</span>])
</span></span><span style=display:flex><span>my_print2(<span style=color:#e6db74>&#34;anthony&#34;</span>,<span style=color:#e6db74>&#34;广东&#34;</span>,age<span style=color:#f92672>=</span><span style=color:#ae81ff>123</span>)
</span></span><span style=display:flex><span>my_print2(<span style=color:#e6db74>&#34;anthony&#34;</span>,<span style=color:#e6db74>&#34;广东&#34;</span>,kw<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;age&#34;</span>:<span style=color:#ae81ff>123</span>})
</span></span></code></pre></div><h3 id=58函数的参数-只接受关键字参数>5.8.函数的参数-<strong>只接受关键字参数</strong><a href=#58函数的参数-只接受关键字参数 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my_print</span>(name,<span style=color:#f92672>*</span>,address):
</span></span><span style=display:flex><span>    print(name,address)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 报错</span>
</span></span><span style=display:flex><span><span style=color:#75715e># my_print(&#34;anthony&#34;,&#34;广东&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># my_print(&#34;广东&#34;,&#34;anthony&#34;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>my_print(<span style=color:#e6db74>&#34;anthony&#34;</span>,address<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;广东&#34;</span>)
</span></span><span style=display:flex><span>my_print(address<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;广东&#34;</span>,name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;anthony&#34;</span>)
</span></span></code></pre></div><h3 id=58函数的参数-不定长参数>5.8.函数的参数-<strong>不定长参数</strong><a href=#58函数的参数-不定长参数 class=hanchor arialabel=Anchor>&#8983;</a></h3><p><code>hobby</code>是可变参数，且 hobby 其实就是一个 tuple （元祖)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>print_user_info</span>( name ,  age  , sex <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;男&#39;</span> , <span style=color:#f92672>*</span> hobby):
</span></span><span style=display:flex><span>    <span style=color:#75715e># 打印用户信息</span>
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;昵称：</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>format(name) , end <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39; &#39;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;年龄：</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>format(age) , end <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39; &#39;</span>)
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;性别：</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>format(sex) ,end <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39; &#39;</span> )
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#39;爱好：</span><span style=color:#e6db74>{}</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>format(hobby))
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 调用 print_user_info 函数</span>
</span></span><span style=display:flex><span>print_user_info( <span style=color:#e6db74>&#39;两点水&#39;</span> ,<span style=color:#ae81ff>18</span> , <span style=color:#e6db74>&#39;女&#39;</span>, <span style=color:#e6db74>&#39;打篮球&#39;</span>,<span style=color:#e6db74>&#39;打羽毛球&#39;</span>,<span style=color:#e6db74>&#39;跑步</span>
</span></span></code></pre></div><h1 id=6容器>6.容器<a href=#6容器 class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=61列表>6.1.列表<a href=#61列表 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>虽然列表可以存储不同类型的数据,但是在开发中,存储的都是相同类型数据,因为要迭代</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>mylist<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#34;a&#34;</span>,<span style=color:#e6db74>&#34;b&#34;</span>,<span style=color:#e6db74>&#34;c&#34;</span>]
</span></span><span style=display:flex><span>print(mylist)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 通过索引,访问列表中的值</span>
</span></span><span style=display:flex><span>print(mylist[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 通过方括号的形式来截取列表中的数据,访问列表中的值</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 就是从第 0 个开始取，取到第 2 个，但是不包含第 2 个</span>
</span></span><span style=display:flex><span>print(mylist[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>2</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 通过索引对列表的数据项进行修改或更新</span>
</span></span><span style=display:flex><span>mylist[<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;bb&#34;</span>
</span></span><span style=display:flex><span>print(mylist)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用 append() 方法来添加列表项</span>
</span></span><span style=display:flex><span>mylist<span style=color:#f92672>.</span>append(<span style=color:#e6db74>&#34;d&#34;</span>)
</span></span><span style=display:flex><span>print(mylist)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 使用 del 语句来删除列表的的元素</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>del</span> mylist[<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>print(mylist)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 列表长度</span>
</span></span><span style=display:flex><span>print(len(mylist))
</span></span></code></pre></div><h3 id=62元祖>6.2.元祖<a href=#62元祖 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>元祖用的是括号</p><p>与列表比较,元祖元素不能修改</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 创建元祖方法1</span>
</span></span><span style=display:flex><span>tuple1<span style=color:#f92672>=</span>(<span style=color:#e6db74>&#39;两点水&#39;</span>,<span style=color:#e6db74>&#39;twowter&#39;</span>,<span style=color:#e6db74>&#39;liangdianshui&#39;</span>,<span style=color:#ae81ff>123</span>,<span style=color:#ae81ff>456</span>)
</span></span><span style=display:flex><span>tuple2<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;两点水&#39;</span>,<span style=color:#e6db74>&#39;twowter&#39;</span>,<span style=color:#e6db74>&#39;liangdianshui&#39;</span>,<span style=color:#ae81ff>123</span>,<span style=color:#ae81ff>456</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建元祖方法2</span>
</span></span><span style=display:flex><span>tuple3 <span style=color:#f92672>=</span> ()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 创建元祖方法3</span>
</span></span><span style=display:flex><span>tuple4 <span style=color:#f92672>=</span> (<span style=color:#ae81ff>123</span>,)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>print(tuple1)
</span></span><span style=display:flex><span>print(tuple2)
</span></span><span style=display:flex><span>print(tuple3)
</span></span><span style=display:flex><span>print(tuple4)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 访问元祖</span>
</span></span><span style=display:flex><span>print(tuple1[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 修改元祖的值</span>
</span></span><span style=display:flex><span>mylist<span style=color:#f92672>=</span>[<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>tuple5<span style=color:#f92672>=</span>(<span style=color:#e6db74>&#34;ddd&#34;</span>,mylist)
</span></span><span style=display:flex><span>print(tuple5)
</span></span><span style=display:flex><span>mylist[<span style=color:#ae81ff>1</span>]<span style=color:#f92672>=</span><span style=color:#ae81ff>43</span>
</span></span><span style=display:flex><span>print(tuple5)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除元祖,tuple 元组中的元素值是不允许删除的，但我们可以使用 del 语句来删除整个元组</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>del</span> tuple1
</span></span></code></pre></div><p>元祖和列表相互转换</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 声明元祖</span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>54</span>]: num_list <span style=color:#f92672>=</span> (<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>55</span>]: type(num_list)
</span></span><span style=display:flex><span>Out[<span style=color:#ae81ff>55</span>]: tuple
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 元祖转成列表</span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>56</span>]: my_list <span style=color:#f92672>=</span> list(num_list)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 修改值</span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>57</span>]: my_list[<span style=color:#ae81ff>0</span>]<span style=color:#f92672>=</span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 再转成元祖</span>
</span></span><span style=display:flex><span>In [<span style=color:#ae81ff>58</span>]: print(tuple(my_list))
</span></span><span style=display:flex><span>(<span style=color:#ae81ff>5</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>)
</span></span></code></pre></div><h3 id=62字典>6.2.字典<a href=#62字典 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>列表是有序的</p><p>字典是无序的</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>names<span style=color:#f92672>=</span>{<span style=color:#e6db74>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;xiaoming&#34;</span>,<span style=color:#e6db74>&#34;age&#34;</span>:<span style=color:#e6db74>&#34;23&#34;</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 取值</span>
</span></span><span style=display:flex><span>print(names[<span style=color:#e6db74>&#34;name&#34;</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 新增和修改(key存在,就是新增,不存在就是修改)</span>
</span></span><span style=display:flex><span>names[<span style=color:#e6db74>&#34;address&#34;</span>] <span style=color:#f92672>=</span><span style=color:#e6db74>&#34;feilvb&#34;</span>
</span></span><span style=display:flex><span>names[<span style=color:#e6db74>&#34;name&#34;</span>] <span style=color:#f92672>=</span><span style=color:#e6db74>&#34;anthony123&#34;</span>
</span></span><span style=display:flex><span>print(names)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除</span>
</span></span><span style=display:flex><span>names<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#34;name&#34;</span>)
</span></span><span style=display:flex><span>print(names)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 统计键值对的数量</span>
</span></span><span style=display:flex><span>print(len(names))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 合并键值对,如果合并的时候有相同的key,那个value就是更新值</span>
</span></span><span style=display:flex><span>temp <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;a&#34;</span>:<span style=color:#e6db74>&#34;b&#34;</span>}
</span></span><span style=display:flex><span>names<span style=color:#f92672>.</span>update(temp)
</span></span><span style=display:flex><span>print(names)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 遍历字典</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> k <span style=color:#f92672>in</span> names:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;遍历&#34;</span>,k,names[k])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 清空字典</span>
</span></span><span style=display:flex><span>names<span style=color:#f92672>.</span>clear()
</span></span></code></pre></div><h3 id=63set>6.3.set<a href=#63set class=hanchor arialabel=Anchor>&#8983;</a></h3><p>set可以理解为只有key的字典</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 创建set</span>
</span></span><span style=display:flex><span>set1 <span style=color:#f92672>=</span> set([<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 添加元素</span>
</span></span><span style=display:flex><span>set1<span style=color:#f92672>.</span>add(<span style=color:#ae81ff>200</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 删除元素</span>
</span></span><span style=display:flex><span>set1<span style=color:#f92672>.</span>remove(<span style=color:#ae81ff>1</span>)
</span></span></code></pre></div><h3 id=64字符串>6.4.字符串<a href=#64字符串 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>str <span style=color:#f92672>=</span><span style=color:#e6db74>&#34;hello hello&#34;</span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;字符串长度&#34;</span>,len(str))
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;字符串出现次数&#34;</span>,str<span style=color:#f92672>.</span>count(<span style=color:#e6db74>&#34;llo&#34;</span>))
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;取索引&#34;</span>,str<span style=color:#f92672>.</span>index(<span style=color:#e6db74>&#34;llo&#34;</span>))
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;取值&#34;</span>,str[<span style=color:#ae81ff>1</span>])
</span></span><span style=display:flex><span><span style=color:#75715e># 换行符,都是空白字符</span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;判断空白字符&#34;</span>,str<span style=color:#f92672>.</span>isspace())
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;是否以指定字符串开始&#34;</span>,str<span style=color:#f92672>.</span>startswith(<span style=color:#e6db74>&#34;hello&#34;</span>))
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;是否以指定字符串结束&#34;</span>,str<span style=color:#f92672>.</span>endswith(<span style=color:#e6db74>&#34;LLO&#34;</span>))
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;查找指定字符串&#34;</span>,str<span style=color:#f92672>.</span>find(<span style=color:#e6db74>&#34;llo&#34;</span>))
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>&#34;替换字符串&#34;</span>,str<span style=color:#f92672>.</span>replace(<span style=color:#e6db74>&#34;hello&#34;</span>,<span style=color:#e6db74>&#34;HELLO&#34;</span>))
</span></span><span style=display:flex><span>print(str[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>9</span>:<span style=color:#ae81ff>2</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># bytes转字符串</span>
</span></span><span style=display:flex><span>print(<span style=color:#e6db74>b</span><span style=color:#e6db74>&#34;abcde&#34;</span><span style=color:#f92672>.</span>decode(<span style=color:#e6db74>&#34;utf-8&#34;</span>))
</span></span></code></pre></div><p>字符串前加 b:b 前缀代表的就是bytes</p><p>字符串前加 r:r/R:非转义的原始字符串</p><h1 id=7公共方法>7.公共方法<a href=#7公共方法 class=hanchor arialabel=Anchor>&#8983;</a></h1><ol><li>内置函数:</li></ol><ul><li>len</li><li>max 只能比较字典的key</li><li>min 只能比较字典的key</li></ul><p>2.字符串,列表,元祖都可以切片</p><p>3.查看地址值</p><pre tabindex=0><code>id(str)
</code></pre><h1 id=面向对象>面向对象<a href=#面向对象 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>类名需要大驼峰命名法</p><h1 id=1基本语法>1.基本语法<a href=#1基本语法 class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=11创建对象>1.1.创建对象<a href=#11创建对象 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cat</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>eat</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;小猫爱吃鱼&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>drink</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;小猫爱喝水&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tom <span style=color:#f92672>=</span> Cat()
</span></span><span style=display:flex><span>tom<span style=color:#f92672>.</span>eat()
</span></span><span style=display:flex><span>tom<span style=color:#f92672>.</span>drink()
</span></span></code></pre></div><h3 id=12对象内置方法魔术方法>1.2.对象内置方法(魔术方法)<a href=#12对象内置方法魔术方法 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cat</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 构造方法</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self,name):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;初始化方法&#34;</span>)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name<span style=color:#f92672>=</span>name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 成员方法</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>eat</span>(self):
</span></span><span style=display:flex><span>        print(self<span style=color:#f92672>.</span>name<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;爱吃鱼&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 成员方法</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>drink</span>(self):
</span></span><span style=display:flex><span>        print(self<span style=color:#f92672>.</span>name<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;爱喝水&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 魔术方法</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__del__</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;销毁方法&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># 魔术方法</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__str__</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;重写tostring&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tom <span style=color:#f92672>=</span> Cat(<span style=color:#e6db74>&#34;Tom&#34;</span>)
</span></span><span style=display:flex><span>tom<span style=color:#f92672>.</span>eat()
</span></span><span style=display:flex><span>tom<span style=color:#f92672>.</span>drink()
</span></span><span style=display:flex><span>print(tom)
</span></span></code></pre></div><h3 id=13私有属性和方法>1.3.私有属性和方法<a href=#13私有属性和方法 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Cat</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 构造方法</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self,name):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;初始化方法&#34;</span>)
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name<span style=color:#f92672>=</span>name
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>__age <span style=color:#f92672>=</span><span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>eat</span>(self):
</span></span><span style=display:flex><span>        print(self<span style=color:#f92672>.</span>name<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;爱吃鱼&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>drink</span>(self):
</span></span><span style=display:flex><span>        print(self<span style=color:#f92672>.</span>name<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;爱喝水&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>say_age</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;年纪是:&#34;</span><span style=color:#f92672>+</span>str(self<span style=color:#f92672>.</span>__age))
</span></span><span style=display:flex><span>        <span style=color:#75715e># 调用私有方法</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>__private_method()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__private_method</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;私有方法&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__del__</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;销毁方法&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__str__</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;重写tostring&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>tom <span style=color:#f92672>=</span> Cat(<span style=color:#e6db74>&#34;Tom&#34;</span>)
</span></span><span style=display:flex><span>tom<span style=color:#f92672>.</span>eat()
</span></span><span style=display:flex><span>tom<span style=color:#f92672>.</span>drink()
</span></span><span style=display:flex><span>tom<span style=color:#f92672>.</span>say_age()
</span></span><span style=display:flex><span>print(tom)
</span></span><span style=display:flex><span><span style=color:#75715e># 这种访问方式,也是可以访问到私有的属性和方法的</span>
</span></span><span style=display:flex><span>print(tom<span style=color:#f92672>.</span>_Cat__age)
</span></span></code></pre></div><h3 id=14继承和重写>1.4.继承和重写<a href=#14继承和重写 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Animal</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name1 <span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>__num2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>eat</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;动物吃&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;动物跑&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 子类不允许调用私有方法</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__test</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;父类可以访问到私有属性和私有方法&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dog</span>(Animal):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;子类打印,开始调用父类方法&#34;</span>)
</span></span><span style=display:flex><span>        super()<span style=color:#f92672>.</span>run()
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;调用完父类方法&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># animal = Animal()</span>
</span></span><span style=display:flex><span><span style=color:#75715e># animal.eat()</span>
</span></span><span style=display:flex><span><span style=color:#75715e># animal.run()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dog <span style=color:#f92672>=</span> Dog()
</span></span><span style=display:flex><span>dog<span style=color:#f92672>.</span>eat()
</span></span><span style=display:flex><span>dog<span style=color:#f92672>.</span>run()
</span></span></code></pre></div><h3 id=15多继承>1.5.多继承<a href=#15多继承 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>尽量避免使用多继承,如果继承了两个累,两个类有相同的方法和属性,容易混淆</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Animal</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name1 <span style=color:#f92672>=</span> <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>__num2 <span style=color:#f92672>=</span> <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>eat</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;动物吃&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;动物跑&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 子类不允许调用私有方法</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__test</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;父类可以访问到私有属性和私有方法&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Zoo</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>eat</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;动物园吃饭&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dog</span>(Animal, Zoo):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>run</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;子类打印,开始调用父类方法&#34;</span>)
</span></span><span style=display:flex><span>        super()<span style=color:#f92672>.</span>run()
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;调用完父类方法&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dog <span style=color:#f92672>=</span> Dog()
</span></span><span style=display:flex><span>dog<span style=color:#f92672>.</span>eat()
</span></span></code></pre></div><h3 id=16多态>1.6.多态<a href=#16多态 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dog</span>(object):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self,name):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>game</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;蹦蹦跳跳&#34;</span>,self<span style=color:#f92672>.</span>name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Xiaotianquan</span>(Dog):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>game</span>(self):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;哮天犬&#34;</span>,self<span style=color:#f92672>.</span>name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Person</span>(object):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self,name):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>game_with_dog</span>(self,dog):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;人和狗玩耍&#34;</span>,self<span style=color:#f92672>.</span>name,dog<span style=color:#f92672>.</span>name)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        dog<span style=color:#f92672>.</span>game()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># dog = Dog(&#34;旺财&#34;)</span>
</span></span><span style=display:flex><span>dog <span style=color:#f92672>=</span> Xiaotianquan(<span style=color:#e6db74>&#34;旺财&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>xiaoming <span style=color:#f92672>=</span> Person(<span style=color:#e6db74>&#34;xiaoming&#34;</span>)
</span></span><span style=display:flex><span>xiaoming<span style=color:#f92672>.</span>game_with_dog(dog)
</span></span></code></pre></div><h3 id=17类属性和类方法和静态方法>1.7.类属性和类方法和静态方法<a href=#17类属性和类方法和静态方法 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>类属性 相当于静态变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dog</span>(object):
</span></span><span style=display:flex><span>    <span style=color:#75715e># 类属性</span>
</span></span><span style=display:flex><span>    age <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self,name):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>name <span style=color:#f92672>=</span> name
</span></span></code></pre></div><p>类方法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dog</span>(object):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 类属性</span>
</span></span><span style=display:flex><span>    age <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 类方法</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@classmethod</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>show_age</span>(cls):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;静态方法&#34;</span>,cls<span style=color:#f92672>.</span>age)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dog <span style=color:#f92672>=</span> Dog()
</span></span><span style=display:flex><span>Dog<span style=color:#f92672>.</span>show_age()
</span></span></code></pre></div><p>静态方法,在不用方法类属性和静态属性的时候,可以定义成静态方法</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Dog</span>(object):
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 类属性</span>
</span></span><span style=display:flex><span>    age <span style=color:#f92672>=</span> <span style=color:#ae81ff>12</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 类方法</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@classmethod</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>show_age</span>(cls):
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;类方法&#34;</span>,cls<span style=color:#f92672>.</span>age)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@staticmethod</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>static_method</span>():
</span></span><span style=display:flex><span>        print(<span style=color:#e6db74>&#34;静态方法&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>dog <span style=color:#f92672>=</span> Dog()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 调用类方法</span>
</span></span><span style=display:flex><span>Dog<span style=color:#f92672>.</span>show_age()
</span></span><span style=display:flex><span><span style=color:#75715e># 调用静态方法</span>
</span></span><span style=display:flex><span>Dog<span style=color:#f92672>.</span>static_method()
</span></span></code></pre></div><h1 id=2异常>2.异常<a href=#2异常 class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=21异常的完整语法>2.1.异常的完整语法<a href=#21异常的完整语法 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>    num <span style=color:#f92672>=</span> int(input(<span style=color:#e6db74>&#34;输入一个整数:&#34;</span>))
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>10</span> <span style=color:#f92672>/</span> num
</span></span><span style=display:flex><span><span style=color:#66d9ef>except</span> <span style=color:#a6e22e>ZeroDivisionError</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;请不要输入数字0&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> result:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;未知错误 </span><span style=color:#e6db74>%s</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>%</span> result)
</span></span><span style=display:flex><span><span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;没有异常才会执行的代码&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>finally</span>:
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;无论是否有异常,都会异常的代码&#34;</span>)
</span></span></code></pre></div><h3 id=22主动抛异常>2.2.主动抛异常<a href=#22主动抛异常 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>check</span>(name):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(name <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;anthony&#34;</span>):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;是安东尼&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 主动抛异常</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>Exception</span>(<span style=color:#e6db74>&#34;不是安东尼&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 捕获异常</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>    print(check(<span style=color:#e6db74>&#34;anthony2&#34;</span>))
</span></span><span style=display:flex><span><span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> result:
</span></span><span style=display:flex><span>    print(result)
</span></span></code></pre></div><h1 id=3模块>3.模块<a href=#3模块 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>导入的语法如下：
[<code>from</code> 模块名】<code>import</code> [模块 1类1变量1函数1x[as别名]
常用的组合形式如：</p><ul><li>import 模块名</li><li>from 模块名 import 类、变量、方法等</li><li>from 模块名 import *</li><li>import 模块名 as 别名</li><li>from 模块名import 功能名 as 别名</li></ul><h3 id=31导入模块>3.1.导入模块<a href=#31导入模块 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>不推荐使用<code>,</code></p><pre tabindex=0><code>import pkg1
import pkg2
</code></pre><h3 id=32简单的使用>3.2.简单的使用<a href=#32简单的使用 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>my_module.py</p><pre tabindex=0><code>title = &#34;模块2&#34;

def say_hello():
    print(&#34;i am module : %s &#34; % title)

class Cat:
    pass
</code></pre><p>index.py</p><pre tabindex=0><code>import my_module

# use module method
my_module.say_hello()

dog = my_module.Cat()
print(dog)
</code></pre><h3 id=33导入的时候也可以起别名>3.3.导入的时候也可以起别名<a href=#33导入的时候也可以起别名 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>别名要使用大驼峰命名</p><pre tabindex=0><code>import my_module as MyModule
</code></pre><h3 id=34fromimport>3.4.from&mldr;import<a href=#34fromimport class=hanchor arialabel=Anchor>&#8983;</a></h3><p>导入一部分工具</p><p>使用的时候,就不需要写那个模块名了,直接使用</p><pre tabindex=0><code>from my_module import say_hello
from my_module import Cat
say_hello()
cat = Cat()
</code></pre><h3 id=35作为模块的正常写法>3.5.作为模块的正常写法<a href=#35作为模块的正常写法 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 有了这个之后,被别的模块调用的时候</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;__main__&#34;</span>
</span></span><span style=display:flex><span> main
</span></span></code></pre></div><h3 id=36包>3.6.包<a href=#36包 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>包 包含多个模块</p><p>创建一个新的文件夹,在文件夹里面创建<code>__init__.py</code></p><pre tabindex=0><code># . 是相对路径名
from . import send_message
from . import receive_message
</code></pre><p>在文件夹里面创建两个模块</p><p>receive_message.py</p><pre tabindex=0><code>def receive():
    print(&#34;接受信息&#34;)
</code></pre><p>send_message.py</p><pre tabindex=0><code>def send(text):
    print(&#34;发送 %s&#34; % text)
</code></pre><p>调用模块</p><pre tabindex=0><code>import hm_message

hm_message.send_message.send(&#39;hello&#39;)
hm_message.receive_message.receive()
</code></pre><h3 id=37发布模块>3.7.发布模块<a href=#37发布模块 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>1.创建setup.py</p><pre tabindex=0><code>from distutils.core import setup

setup(name=&#34;hm_message&#34;,
      version=&#34;1.0&#34;,
      description=&#34;push&#34;,
      py_modules=[&#34;hm_message.send_message&#34;,
                  &#34;hm_message.receive_message&#34;])
</code></pre><p>2.命令</p><pre tabindex=0><code>python setup.py build
python setup.py sdist
</code></pre><h3 id=38安装模块>3.8.安装模块<a href=#38安装模块 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 手动安装模块</span>
</span></span><span style=display:flex><span>tar xxx.tar.gz
</span></span><span style=display:flex><span>python setup.py install
</span></span></code></pre></div><h1 id=pymssql>pymssql<a href=#pymssql class=hanchor arialabel=Anchor>&#8983;</a></h1><p>访问<code>https://www.lfd.uci.edu/~gohlke/pythonlibs/#pymssql</code></p><p>下载<code>[pymssql‑2.1.4‑cp38‑cp38‑win32.whl]</code></p><h1 id=网络编程>网络编程<a href=#网络编程 class=hanchor arialabel=Anchor>&#8983;</a></h1><h1 id=0socket的历史>0.<strong><strong>socket的历史</strong></strong><a href=#0socket的历史 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>套接字起源于 20 世纪 70 年代加利福尼亚大学伯克利分校版本的 Unix,即人们所说的 BSD Unix。 因此,有时人们也把套接字称为“伯克利套接字”或“BSD 套接字”。</p><p>一开始,套接字被设计用在同 一台主机上多个应用程序之间的通讯。这也被称进程间通讯或IPC。</p><p>套接字有两种（或者称为有两个种族）,分别是基于文件型的和基于网络型的。</p><p>基于文件类型的套接字家族 - 套接字家族的名字：AF_UNIX unix一切皆文件，基于文件的套接字调用的就是底层的文件系统来取数据，两个套接字进程运行在同一机器，可以通过访问同一个文件系统间接完成通信</p><p>基于网络类型的套接字家族 - 套接字家族的名字：AF_INET (还有AF_INET6被用于ipv6，</p><p>还有一些其他的地址家族，不过，他们要么是只用于某个平台，要么就是已经被废弃，或者是很少被使用，或者是根本没有实现，所有地址家族中，AF_INET是使用最广泛的一个，python支持很多种地址家族，但是由于我们只关心网络编程，所以大部分时候我么只使用AF_INET)</p><p>套接字把复杂的TCP/IP协议族隐藏在Socket接口后面，对用户来说，一组简单的接口就是全部，让Socket去组织数据，以符合指定的协议。</p><p>所以，我们无需深入理解tcp/udp协议，socket已经为我们封装好了，我们只需要遵循socket的规定去编程，写出的程序自然就是遵循tcp/udp标准的</p><h1 id=1udp>1.udp<a href=#1udp class=hanchor arialabel=Anchor>&#8983;</a></h1><p>发送端</p><pre tabindex=0><code>import socket

def main():
    # 创建一个udp套接字
    udp_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

    while True:

        send_data = str = input(&#34;输入要发送的数据&#34;)

        if send_data == &#34;exit&#34;:
            break

        # udp_socket.sendto(b&#34;这是消息&#34;,(&#34;192.169.0.1&#34;,8000))
        udp_socket.sendto(send_data.encode(&#34;utf-8&#34;),(&#34;127.0.0.1&#34;,7788))

    # 关闭套接字
    udp_socket.close()

if __name__ == &#39;__main__&#39;:
    main()
</code></pre><p>接受者</p><pre tabindex=0><code>import socket

def main():
    # 创建一个udp套接字
    udp_socket = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)

    # 绑定本地相关信息
    local_addr = (&#34;&#34;,7788)
    udp_socket.bind(local_addr)

    while True:
        # 等待接收对方发送的数据
        recv_data = udp_socket.recvfrom(1024)
        print(recv_data[0].decode(&#34;gbk&#34;))

    # 关闭套接字
    udp_socket.close()

if __name__ == &#39;__main__&#39;:
    main()
</code></pre><h1 id=2tcp>2.tcp<a href=#2tcp class=hanchor arialabel=Anchor>&#8983;</a></h1><h1 id=3socket>3.socket<a href=#3socket class=hanchor arialabel=Anchor>&#8983;</a></h1><p>使用socket访问redis</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> socket
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>host <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;10.0.2.110&#39;</span>
</span></span><span style=display:flex><span>port <span style=color:#f92672>=</span> <span style=color:#ae81ff>6379</span>
</span></span><span style=display:flex><span>buf_size <span style=color:#f92672>=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>conn <span style=color:#f92672>=</span> socket<span style=color:#f92672>.</span>socket(socket<span style=color:#f92672>.</span>AF_INET, socket<span style=color:#f92672>.</span>SOCK_STREAM)
</span></span><span style=display:flex><span>conn<span style=color:#f92672>.</span>connect((host, port))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cmd <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;SELECT 2</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span>r <span style=color:#f92672>=</span> conn<span style=color:#f92672>.</span>sendall(cmd)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cmd <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;PING</span><span style=color:#ae81ff>\n</span><span style=color:#e6db74>&#39;</span><span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;utf-8&#39;</span>)
</span></span><span style=display:flex><span>conn<span style=color:#f92672>.</span>sendall(cmd)
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> <span style=color:#66d9ef>True</span>:
</span></span><span style=display:flex><span>    res <span style=color:#f92672>=</span> conn<span style=color:#f92672>.</span>recv(buf_size)
</span></span><span style=display:flex><span>    print(res)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> res:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>conn<span style=color:#f92672>.</span>close()
</span></span></code></pre></div><p><strong>服务端套接字函数</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>s<span style=color:#f92672>.</span>bind() <span style=color:#75715e>#绑定(主机,端口号)到套接字</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>listen() <span style=color:#75715e>#开始TCP监听</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>accept() <span style=color:#75715e>#被动接受TCP客户的连接,(阻塞式)等待连接的到来</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>**</span>客户端套接字函数<span style=color:#f92672>**</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>connect() <span style=color:#75715e>#主动初始化TCP服务器连接</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>connect_ex() <span style=color:#75715e>#connect()函数的扩展版本,出错时返回出错码,而不是抛出异常</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>**</span>公共用途的套接字函数(客户端和服务端都能使用)<span style=color:#f92672>**</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>recv() <span style=color:#75715e>#接收TCP数据</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>send() <span style=color:#75715e>#发送TCP数据(send在待发送数据量大于己端缓存区剩余空间时,数据丢失,不会发完)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>sendall() <span style=color:#75715e>#发送完整的TCP数据(本质就是循环调用send,sendall在待发送数据量大于己端缓存区剩余空间时,数据不丢失,循环调用send直到发完)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>recvfrom() <span style=color:#75715e>#接收UDP数据</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>sendto() <span style=color:#75715e>#发送UDP数据</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>getpeername() <span style=color:#75715e>#连接到当前套接字的远端的地址</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>getsockname() <span style=color:#75715e>#当前套接字的地址</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>getsockopt() <span style=color:#75715e>#返回指定套接字的参数</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>setsockopt() <span style=color:#75715e>#设置指定套接字的参数</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>s<span style=color:#f92672>.</span>close() <span style=color:#75715e>#关闭套接字</span>
</span></span></code></pre></div><h1 id=request>Request<a href=#request class=hanchor arialabel=Anchor>&#8983;</a></h1><h1 id=post请求参数>post请求参数<a href=#post请求参数 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 表单提交</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> requests
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;anthony&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;age&#34;</span>:<span style=color:#e6db74>&#34;12&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>requests<span style=color:#f92672>.</span>post(url<span style=color:#f92672>=</span>url,data<span style=color:#f92672>=</span>data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># json提交</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> requests
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>json_data <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;name&#34;</span>:<span style=color:#e6db74>&#34;anthony&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;age&#34;</span>:<span style=color:#e6db74>&#34;12&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>requests<span style=color:#f92672>.</span>post(url<span style=color:#f92672>=</span>url,json<span style=color:#f92672>=</span>json_data)
</span></span></code></pre></div><h1 id=cookie操作>cookie操作<a href=#cookie操作 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>cookies<span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;auther&#39;</span>:<span style=color:#e6db74>&#39;11223&#39;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>request<span style=color:#f92672>.</span>post(url<span style=color:#f92672>=</span>url,data<span style=color:#f92672>=</span>data,cookies<span style=color:#f92672>=</span>cookies)
</span></span></code></pre></div><h1 id=headers>headers<a href=#headers class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>headers <span style=color:#f92672>=</span>{
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;auth&#39;</span>:<span style=color:#e6db74>&#39;123&#39;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>request<span style=color:#f92672>.</span>post(url<span style=color:#f92672>=</span>url,data<span style=color:#f92672>=</span>data,cookies<span style=color:#f92672>=</span>cookies,headers<span style=color:#f92672>=</span>headers)
</span></span></code></pre></div><h1 id=请求超时>请求超时<a href=#请求超时 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 如果超过2s就超时报错</span>
</span></span><span style=display:flex><span>requests<span style=color:#f92672>.</span>post(url<span style=color:#f92672>=</span>url,timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>)
</span></span></code></pre></div><h1 id=鉴权>鉴权<a href=#鉴权 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>有些页面,需要,比如spring secuity的页面</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>requests<span style=color:#f92672>.</span>post(url<span style=color:#f92672>=</span>url,timeout<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span>,auth<span style=color:#f92672>=</span>(<span style=color:#e6db74>&#39;anthony&#39;</span>,<span style=color:#e6db74>&#39;123456&#39;</span>))
</span></span></code></pre></div><h1 id=编码>编码<a href=#编码 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e># 先编码 再解码</span>
</span></span><span style=display:flex><span>r<span style=color:#f92672>.</span>text<span style=color:#f92672>.</span>encode(<span style=color:#e6db74>&#39;utf-8&#39;</span>)<span style=color:#f92672>.</span>decode(unicode_escape)
</span></span></code></pre></div><h1 id=下载流2>下载流2<a href=#下载流2 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>url <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;http://wx4.sinaimg.cn/large/d030806aly1fq1vn8j0ajj21ho28bduy.jpg&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>rsp <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>get(url, stream<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>with</span> open(<span style=color:#e6db74>&#39;1.jpg&#39;</span>, <span style=color:#e6db74>&#39;wb&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>		<span style=color:#75715e># 边下载边存硬盘, chunk_size 可以自由调整为可以更好地适合您的用例的数字</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> rsp<span style=color:#f92672>.</span>iter_content(chunk_size<span style=color:#f92672>=</span><span style=color:#ae81ff>1024</span>):  
</span></span><span style=display:flex><span>        f<span style=color:#f92672>.</span>write(i)
</span></span></code></pre></div><p><code>requests.get(url)</code>默认是下载在<strong>内存</strong>中的，下载完成才存到硬盘上</p><p><code>Response.iter_content</code>来边下载边存硬盘</p><h1 id=flask>Flask<a href=#flask class=hanchor arialabel=Anchor>&#8983;</a></h1><h1 id=路由>路由<a href=#路由 class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=入门>入门<a href=#入门 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask

app = Flask(__name__)

@app.route(&#39;/login&#39;)
def hello_world():
    return &#39;Hello World!&#39;

if __name__ == &#39;__main__&#39;:
    app.run()
</code></pre><h3 id=url上动态参数>URL上动态参数<a href=#url上动态参数 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span>  Flask(__name__)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hello_world</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;hello world&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#34;/&lt;int:age&gt;&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>play_game</span>(age):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;hello world&#34;</span><span style=color:#f92672>+</span>str(age)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    app<span style=color:#f92672>.</span>run(debug<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span></code></pre></div><h3 id=自定义转换器>自定义转换器<a href=#自定义转换器 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask
from werkzeug.routing import BaseConverter

app = Flask(__name__)

# 自定义,并且继承BaseConverter
class MyConverter(BaseConverter):

    def __init__(self, map, regex):
        # map 就是app.url_map  也就是请求路径
        # regex,就是d{3}, 也就是自定义的规则
        super(MyConverter, self).__init__(map)
        self.regex = regex

app.url_map.converters[&#34;haha&#34;] = MyConverter

@app.route(&#39;/&lt;haha(&#34;\d{3}&#34;):age&gt;&#39;)
def play_game2(age):
    return &#34;自定义转换器,接收3位&#34; + str(age)

@app.route(&#39;/&lt;haha(&#34;\d{4}&#34;):age&gt;&#39;)
def play_game3(age):
    return &#34;自定义转换器,接收4位&#34; + str(age)

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><h3 id=给路由添加请求方式>给路由添加请求方式<a href=#给路由添加请求方式 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask

app = Flask(__name__)

@app.route(&#39;/&#39;,methods=[&#39;POST&#39;])
def play_game2(age):
    return &#34;自定义转换器,接收3位&#34; + str(age)

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><h3 id=返回响应体>返回响应体<a href=#返回响应体 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask

app = Flask(__name__)

@app.route(&#39;/&#39;)
def method1():
    &#34;&#34;&#34;直接返回字符串信息&#34;&#34;&#34;
    return &#34;返回字符串信息&#34;

@app.route(&#39;/2&#39;)
def method2():
    &#34;&#34;&#34;直接返回字符串信息&#34;&#34;&#34;
    return &#34;返回字符串信息&#34;,666

@app.route(&#39;/3&#39;)
def method3():
    &#34;&#34;&#34;直接返回字符串信息&#34;&#34;&#34;
    return {&#34;name&#34;:&#34;anthony&#34;},200,{&#34;Content-Type&#34;:&#34;application/json&#34;,&#34;token&#34;:&#34;123456&#34;}

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><h3 id=重定向>重定向<a href=#重定向 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask,redirect

app = Flask(__name__)

@app.route(&#39;/&#39;)
def method1():
    return redirect(&#34;http://baidu.com&#34;)

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><h3 id=跳转页面>跳转页面<a href=#跳转页面 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask, render_template, request,redirect

app = Flask(__name__)

@app.route(&#39;/login&#39;, methods=[&#39;GET&#39;, &#39;POST&#39;])
def hello_world():
    print(&#34;请求来了&#34;)

    # 获取post传过来的值
    user = request.form.get(&#34;user&#34;)
    pwd = request.form.get(&#34;pwd&#34;)

    if user == &#34;anthony&#34; and pwd == &#34;123456&#34;:
        # return render_template(&#34;login.html&#34;, **{&#34;msg&#34;: &#34;登录成功&#34;})
        return redirect(&#34;/index&#34;)
    else:
        return render_template(&#34;login.html&#34;, **{&#34;msg&#34;: &#34;用户名或者密码错误&#34;})

@app.route(&#34;/index&#34;)
def index():
    return &#34;欢迎登录&#34;

if __name__ == &#39;__main__&#39;:
    app.run()
</code></pre><h3 id=异常捕获>异常捕获<a href=#异常捕获 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask,abort

app = Flask(__name__)

@app.route(&#39;/&#39;)
def method1():
    &#34;&#34;&#34;abort 异常抛出&#34;&#34;&#34;
    abort(404)
    return  &#34;hello world&#34;

&#34;&#34;&#34;捕获异常&#34;&#34;&#34;
@app.errorhandler(404)
def method1(e):
    print(e)
    return  &#34;页面找不到&#34;

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><h3 id=获取请求参数form>获取请求参数Form<a href=#获取请求参数form class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask, render_template, request
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> Flask(__name__)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/login&#39;</span>, methods<span style=color:#f92672>=</span>[<span style=color:#e6db74>&#39;GET&#39;</span>, <span style=color:#e6db74>&#39;POST&#39;</span>])
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hello_world</span>():
</span></span><span style=display:flex><span>    print(<span style=color:#e6db74>&#34;请求来了&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 获取post传过来的值</span>
</span></span><span style=display:flex><span>    user <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>form<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;user&#34;</span>)
</span></span><span style=display:flex><span>    pwd <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>form<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#34;pwd&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> user <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;anthony&#34;</span> <span style=color:#f92672>and</span> pwd <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;123456&#34;</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> render_template(<span style=color:#e6db74>&#34;login.html&#34;</span>, <span style=color:#f92672>**</span>{<span style=color:#e6db74>&#34;msg&#34;</span>: <span style=color:#e6db74>&#34;登录成功&#34;</span>})
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> render_template(<span style=color:#e6db74>&#34;login.html&#34;</span>, <span style=color:#f92672>**</span>{<span style=color:#e6db74>&#34;msg&#34;</span>: <span style=color:#e6db74>&#34;用户名或者密码错误&#34;</span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    app<span style=color:#f92672>.</span>run()
</span></span></code></pre></div><h3 id=获取请求参数body>获取请求参数Body<a href=#获取请求参数body class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask, request
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> Flask(__name__)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/callback&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>hello_world</span>():
</span></span><span style=display:flex><span>    data <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>get_data()
</span></span><span style=display:flex><span>    print(data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#39;Hello, World!&#39;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;__main__&#34;</span>:
</span></span><span style=display:flex><span>    app<span style=color:#f92672>.</span>run(debug<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, port<span style=color:#f92672>=</span><span style=color:#ae81ff>10086</span>)
</span></span></code></pre></div><h3 id=环境变量配置文件>环境变量/配置文件<a href=#环境变量配置文件 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> flask <span style=color:#f92672>import</span> Flask,redirect,request
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app <span style=color:#f92672>=</span> Flask(__name__)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 1.从配置类中加载</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyConfig</span>(object):
</span></span><span style=display:flex><span>    DEBUG <span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span><span style=color:#75715e># app.config.from_object(MyConfig)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 2.从配置文件中加载</span>
</span></span><span style=display:flex><span><span style=color:#75715e># app.config.from_pyfile(&#34;Config.ini&#34;)</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 在项目的根目录创建个Config.ini文件</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 3.从环境变量</span>
</span></span><span style=display:flex><span><span style=color:#75715e># app.config.from_envvar(&#34;&#34;)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@app.route</span>(<span style=color:#e6db74>&#39;/&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>method1</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>pass</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    app<span style=color:#f92672>.</span>run()
</span></span></code></pre></div><h3 id=钩子类似拦截器>钩子,类似拦截器<a href=#钩子类似拦截器 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask,redirect,request

app = Flask(__name__)

@app.before_first_request
def before_first_request():
    &#34;&#34;&#34;只请求一次&#34;&#34;&#34;
    print(&#34;before_first_request&#34;)

@app.before_request
def before_request():
    &#34;&#34;&#34;每次都会请求&#34;&#34;&#34;
    print(&#34;before_request&#34;)

@app.after_request
def after_request(resp):
    &#34;&#34;&#34;比如做json统一的返回格式&#34;&#34;&#34;
    print(&#34;after_request&#34;)
    return resp

@app.teardown_request
def teardown_request(e):
    &#34;&#34;&#34;最后会请求到这里,适合做异常信息统计&#34;&#34;&#34;
    print(&#34;teardown_request&#34;)

@app.route(&#39;/&#39;)
def method1():
    return  &#34;hello world&#34;

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><h1 id=视图内容和模板>视图内容和模板<a href=#视图内容和模板 class=hanchor arialabel=Anchor>&#8983;</a></h1><h3></h3><pre tabindex=0><code>from flask import Flask, make_response, request

app = Flask(__name__)

# 设置cookie
@app.route(&#34;/set_cookie&#34;)
def set_cookie():
    response = make_response(&#34;set cookie&#34;)
    response.set_cookie(&#34;computer&#34;,&#34;macbook pro&#34;)
    response.set_cookie(&#34;age&#34;,&#34;13 pro&#34;,1000)
    return response

@app.route(&#34;/get_cookie&#34;)
def get_cookie():

    name = request.cookies.get(&#34;computer&#34;)
    age = request.cookies.get(&#34;age&#34;)
    return &#34;name:%s,age:%s&#34;%(name,age)

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><h3 id=session>Session<a href=#session class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>from flask import Flask, make_response, request, session

app = Flask(__name__)

app.config[&#34;SECRET_KEY&#34;]=&#34;123456&#34;

# 设置cookie
@app.route(&#34;/set_session/&lt;path:name&gt;&#34;)
def set_session(name):
    session[&#34;name&#34;] =name
    return &#34;set session&#34;

@app.route(&#34;/get_session&#34;)
def get_session():

    value = session.get(&#34;name&#34;)
    return &#34;value:%s&#34;%(value)

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><h1 id=orm>orm<a href=#orm class=hanchor arialabel=Anchor>&#8983;</a></h1><h3 id=入门-1>入门<a href=#入门-1 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>pip install flask_sqlalchemy
pip install pymysql
</code></pre><pre tabindex=0><code>from flask import Flask,render_template
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)

# 设置数据库的配置信息
app.config[&#34;SQLALCHEMY_DATABASE_URI&#34;] = &#34;mysql+pymysql://Rong:Zming1213!@192.168.254.153:3306/data36&#34;
app.config[&#34;SQLALCHEMY_TRACK_MODIFICATIONS&#34;] = False

# 创建sqlAlchemy对象,关联app
db = SQLAlchemy(app)

# 创建模型类
class Role(db.Model):
    __tablename__  = &#34;roles&#34;
    id =db.Column(db.Integer,primary_key=True)
    name = db.Column(db.String(32))

class Users(db.Model):
    __tablename__  = &#34;users&#34;
    id =db.Column(db.Integer,primary_key=True)
    name = db.Column(db.String(32))

    # 建立外键
    role_id =db.Column(db.Integer,db.ForeignKey(Role.id))

@app.route(&#34;/&#34;)
def demo():
    return &#34;response&#34;

if __name__ == &#39;__main__&#39;:

    # 创建数据库的表
    db.drop_all()

    db.create_all()

    app.run(debug=True)
</code></pre><h3 id=蓝图基本使用>蓝图基本使用<a href=#蓝图基本使用 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>demo01.py</p><pre tabindex=0><code>from flask import Flask, Blueprint
from demo02 import blue

app = Flask(__name__)

# 讲蓝图注册到app中
app.register_blueprint(blue)

if __name__ == &#39;__main__&#39;:
    app.run(debug=True)
</code></pre><p>demo02.py</p><pre tabindex=0><code>from flask import Blueprint

# 创建蓝图对象
blue = Blueprint(&#34;my_blue&#34;, __name__)

@blue.route(&#34;/&#34;)
def demo():
    return &#34;response&#34;

@blue.route(&#34;/2&#34;)
def demo2():
    return &#34;response2&#34;
</code></pre><h3 id=蓝图包的使用>蓝图包的使用<a href=#蓝图包的使用 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>目录结构:|&mdash;<code>demo.py</code>|&mdash;-|user||&mdash;-|user|&ndash;<code>__init__.py</code>|&mdash;-|user|&ndash;<code>views.py</code></p><p>demo.py</p><pre tabindex=0><code>from flask import Flask

from user import user_blue

app = Flask(__name__)

# 讲蓝图注册到app中
app.register_blueprint(user_blue)

if __name__ == &#39;__main__&#39;:
    print(app.url_map)
    app.run(debug=True)
</code></pre><p><strong>init</strong>.py</p><pre tabindex=0><code>from flask import Blueprint

# 创建蓝图对象
user_blue = Blueprint(&#34;user&#34;, __name__)

from user import views
</code></pre><p>views.py</p><pre tabindex=0><code>from user import user_blue

@user_blue.route(&#34;/&#34;)
def demo():
    return &#34;response&#34;

@user_blue.route(&#34;/2&#34;)
def demo2():
    return &#34;response2&#34;
</code></pre><h1 id=django>Django<a href=#django class=hanchor arialabel=Anchor>&#8983;</a></h1><h1 id=命令>命令<a href=#命令 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 安装django</span>
</span></span><span style=display:flex><span>pip install django
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 生成数据库 迁移文件</span>
</span></span><span style=display:flex><span>python manage.py makemigrations
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 执行迁移生成表</span>
</span></span><span style=display:flex><span>python manage.py migrate
</span></span></code></pre></div><h1 id=pycharm和django-admin创建的项目不一样>PyCharm和Django-admin创建的项目不一样<a href=#pycharm和django-admin创建的项目不一样 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 项目创建</span>
</span></span><span style=display:flex><span>django-admin startproject 项目名
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 结构</span>
</span></span><span style=display:flex><span>项目名
</span></span><span style=display:flex><span>|----|manage.py            <span style=color:#f92672>[</span>项目管理,启动项目,创建app,数据管理<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>|----|项目名同名文件夹
</span></span><span style=display:flex><span>|----|----|__init__.py
</span></span><span style=display:flex><span>|----|----|asgi.py          <span style=color:#f92672>[</span>项目配置<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>|----|----|settings.py      <span style=color:#f92672>[</span>路由<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>|----|----|urls.py          <span style=color:#f92672>[</span>接收网路请求,异步<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>|----|----|wsgi.py          <span style=color:#f92672>[</span>接收网路请求,同步<span style=color:#f92672>]</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 用PyCharm创建的目录结构</span>
</span></span><span style=display:flex><span>项目名
</span></span><span style=display:flex><span>|----|manage.py 
</span></span><span style=display:flex><span>|----|templates文件夹
</span></span><span style=display:flex><span>|----|项目名同名文件夹
</span></span><span style=display:flex><span>|----|----|__init__.py
</span></span><span style=display:flex><span>|----|----|asgi.py
</span></span><span style=display:flex><span>|----|----|settings.py
</span></span><span style=display:flex><span>|----|----|urls.py
</span></span><span style=display:flex><span>|----|----|wsgi.py
</span></span></code></pre></div><p>PyCharm创建的根目录下有一个templates目录
Django-admin 是没有的,要在app下的目录创建<code>templates</code></p><p>settings.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># PyCharm创建的</span>
</span></span><span style=display:flex><span>TEMPLATES <span style=color:#f92672>=</span> <span style=color:#f92672>[</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;BACKEND&#39;</span>: <span style=color:#e6db74>&#39;django.template.backends.django.DjangoTemplates&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;DIRS&#39;</span>: <span style=color:#f92672>[</span>BASE_DIR / <span style=color:#e6db74>&#39;templates&#39;</span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>        ,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;APP_DIRS&#39;</span>: True,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;OPTIONS&#39;</span>: <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;context_processors&#39;</span>: <span style=color:#f92672>[</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.template.context_processors.debug&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.template.context_processors.request&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.contrib.auth.context_processors.auth&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.contrib.messages.context_processors.messages&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>]</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>,
</span></span><span style=display:flex><span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 命令行创建的</span>
</span></span><span style=display:flex><span>TEMPLATES <span style=color:#f92672>=</span> <span style=color:#f92672>[</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;BACKEND&#39;</span>: <span style=color:#e6db74>&#39;django.template.backends.django.DjangoTemplates&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;DIRS&#39;</span>: <span style=color:#f92672>[]</span>
</span></span><span style=display:flex><span>        ,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;APP_DIRS&#39;</span>: True,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;OPTIONS&#39;</span>: <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;context_processors&#39;</span>: <span style=color:#f92672>[</span>
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.template.context_processors.debug&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.template.context_processors.request&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.contrib.auth.context_processors.auth&#39;</span>,
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;django.contrib.messages.context_processors.messages&#39;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>]</span>,
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>,
</span></span><span style=display:flex><span><span style=color:#f92672>]</span>
</span></span></code></pre></div><h2 id=创建应用>创建应用<a href=#创建应用 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>|项目|
</span></span><span style=display:flex><span>|----|app,后台系统<span style=color:#f92672>[</span>独立的表结构,模板,不相互影响<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>|----|app,前台系统<span style=color:#f92672>[</span>独立的表结构,模板,不相互影响<span style=color:#f92672>]</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 创建app</span>
</span></span><span style=display:flex><span>python manage.py startapp app名字
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>djangoProject
</span></span><span style=display:flex><span>├── app01                 <span style=color:#f92672>[</span>刚创建的app<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>│   ├── __init__.py
</span></span><span style=display:flex><span>│   ├── admin.py          <span style=color:#f92672>[</span>django默认admin后台,不用动<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>│   ├── apps.py           <span style=color:#f92672>[</span>app启动类,不用动<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>│   ├── migrations        <span style=color:#f92672>[</span>数据库的迁移的,数据库变更记录<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>│   │   └── __init__.py
</span></span><span style=display:flex><span>│   ├── models.py         <span style=color:#f92672>[</span>重要,对数据库进行操作<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>│   ├── tests.py          <span style=color:#f92672>[</span>单元测试<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>│   └── views.py          <span style=color:#f92672>[</span>重要,函数<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>├── djangoProject
</span></span><span style=display:flex><span>│   ├── __init__.py
</span></span><span style=display:flex><span>│   ├── asgi.py
</span></span><span style=display:flex><span>│   ├── settings.py
</span></span><span style=display:flex><span>│   ├── urls.py
</span></span><span style=display:flex><span>│   └── wsgi.py
</span></span><span style=display:flex><span>├── manage.py
</span></span><span style=display:flex><span>└── templates
</span></span></code></pre></div><h2 id=注册app>注册APP<a href=#注册app class=hanchor arialabel=Anchor>&#8983;</a></h2><p>项目名→项目名同名文件夹→settings.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>INSTALLED_APPS <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;django.contrib.admin&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;django.contrib.auth&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;django.contrib.contenttypes&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;django.contrib.sessions&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;django.contrib.messages&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;django.contrib.staticfiles&#39;</span>,
</span></span><span style=display:flex><span>		<span style=color:#75715e># 添加下面一行的配置,下面这个是怎么来的呢?看下面</span>
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#39;app01.apps.App01Config&#39;</span> 
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>项目名→APP文件夹→apps.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.apps <span style=color:#f92672>import</span> AppConfig
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>App01Config</span>(AppConfig):
</span></span><span style=display:flex><span>    default_auto_field <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;django.db.models.BigAutoField&#39;</span>
</span></span><span style=display:flex><span>    name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;app01&#39;</span>
</span></span></code></pre></div><h2 id=编写url和视图函数对应关系>编写URL和视图函数对应关系<a href=#编写url和视图函数对应关系 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>编辑urls.py</p><p><img src=https://image.runtimes.cc/202404051452032.png alt></p><p>在app文件夹下的views.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.http <span style=color:#f92672>import</span> HttpResponse
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.shortcuts <span style=color:#f92672>import</span> render
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create your views here.</span>
</span></span><span style=display:flex><span><span style=color:#75715e># request 必须要的</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>index</span>(request):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#34;欢迎使用&#34;</span>)
</span></span></code></pre></div><h2 id=启动>启动<a href=#启动 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 命令行启动</span>
</span></span><span style=display:flex><span>python ./manage.py runserver
</span></span></code></pre></div><h2 id=templates模板>templates模板<a href=#templates模板 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><img src=https://image.runtimes.cc/202404051452463.png alt></p><h2 id=静态资源>静态资源<a href=#静态资源 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>djangoProject
</span></span><span style=display:flex><span>├── app01
</span></span><span style=display:flex><span>│   ├── __init__.py
</span></span><span style=display:flex><span>│   ├── admin.py
</span></span><span style=display:flex><span>│   ├── apps.py
</span></span><span style=display:flex><span>│   ├── migrations
</span></span><span style=display:flex><span>│   │   └── __init__.py
</span></span><span style=display:flex><span>│   ├── models.py
</span></span><span style=display:flex><span>│   ├── static  [手动创建的]
</span></span><span style=display:flex><span>│   │   ├── css [手动创建的] 
</span></span><span style=display:flex><span>│   │   ├── img [手动创建的]
</span></span><span style=display:flex><span>│   │   │   └── 1.png
</span></span><span style=display:flex><span>│   │   └── js
</span></span><span style=display:flex><span>│   ├── tests.py
</span></span><span style=display:flex><span>│   └── views.py
</span></span><span style=display:flex><span>├── db.sqlite3
</span></span><span style=display:flex><span>├── djangoProject
</span></span><span style=display:flex><span>│   ├── __init__.py
</span></span><span style=display:flex><span>│   ├── asgi.py
</span></span><span style=display:flex><span>│   ├── settings.py
</span></span><span style=display:flex><span>│   ├── urls.py
</span></span><span style=display:flex><span>│   └── wsgi.py
</span></span><span style=display:flex><span>├── manage.py
</span></span><span style=display:flex><span>└── templates
</span></span><span style=display:flex><span>    └── user_list.html
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=display:flex><span>{% load static %}
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>html</span> <span style=color:#a6e22e>lang</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;en&#34;</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>meta</span> <span style=color:#a6e22e>charset</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;UTF-8&#34;</span>&gt;
</span></span><span style=display:flex><span>    &lt;<span style=color:#f92672>title</span>&gt;用户列表&lt;/<span style=color:#f92672>title</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>head</span>&gt;
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>h1</span>&gt;用户列表&lt;/<span style=color:#f92672>h1</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>加载静态资源
</span></span><span style=display:flex><span>写法一:
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>img</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;/static/img/1.png&#34;</span>&gt;
</span></span><span style=display:flex><span>写法二:
</span></span><span style=display:flex><span>&lt;<span style=color:#f92672>img</span> <span style=color:#a6e22e>src</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;{% static &#39;img/1.png&#39; %}&#34;</span>&gt;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>body</span>&gt;
</span></span><span style=display:flex><span>&lt;/<span style=color:#f92672>html</span>&gt;
</span></span></code></pre></div><h2 id=数据库>数据库<a href=#数据库 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>主意:app需要先注册</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python ./manage.py makemigrations
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>python ./manage.py migrate
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Pycharm-&gt;tools-&gt;Run manager.py Task 开启,可以替代python manager.py 这个前缀</span>
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>pip3 install pymysql
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> pymysql <span style=color:#f92672>import</span> connect
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>con <span style=color:#f92672>=</span> connect(host<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;43.240.30.52&#34;</span>,
</span></span><span style=display:flex><span>        port<span style=color:#f92672>=</span><span style=color:#ae81ff>3306</span>,
</span></span><span style=display:flex><span>        user<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yanganli_github&#34;</span>,
</span></span><span style=display:flex><span>        password<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yanganli_github&#34;</span>,
</span></span><span style=display:flex><span>        database<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;yanganli_github&#34;</span>,
</span></span><span style=display:flex><span>        charset<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;utf8&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cursor <span style=color:#f92672>=</span> con<span style=color:#f92672>.</span>cursor()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 查询出条数</span>
</span></span><span style=display:flex><span>print(cursor<span style=color:#f92672>.</span>execute(<span style=color:#e6db74>&#34;select * from post&#34;</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> one <span style=color:#f92672>in</span> cursor<span style=color:#f92672>.</span>fetchall():
</span></span><span style=display:flex><span>    print(one)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>cursor<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>con<span style=color:#f92672>.</span>close()
</span></span></code></pre></div><h1 id=自动化测试>自动化测试<a href=#自动化测试 class=hanchor arialabel=Anchor>&#8983;</a></h1><h1 id=安装和命令>安装和命令<a href=#安装和命令 class=hanchor arialabel=Anchor>&#8983;</a></h1><pre tabindex=0><code># 安装pytest
pip install pytest

# 安装python-html包,生成html报告
pip install pytest-html

# 生成allure报告
pip install allure-pytest

# -s 打印print
pytest -s  test_auth.py

# 只测试这一个文件
pytest -q -s  test_auth.py
</code></pre><h1 id=pycharm识别pytest>Pycharm识别pytest<a href=#pycharm识别pytest class=hanchor arialabel=Anchor>&#8983;</a></h1><p><img src=https://image.runtimes.cc/202404051452441.png alt></p><h1 id=规范>规范<a href=#规范 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>测试文件已test_开头</p><p>测试类已Test开头,并且不能带有init方法</p><p>测试函数以test_开头</p><p>断言基本使用assert</p><h1 id=生成报告>生成报告<a href=#生成报告 class=hanchor arialabel=Anchor>&#8983;</a></h1><pre tabindex=0><code># 生成html
&#39;--html=../report/report.html&#39;

# 生成xml格式的报告
&#39;--junitxml=./report/report.xml&#39;

# 生成allure报告
&#39;--alluredir&#39;,&#39;../report/reportallure&#39;

# 生成allure报告,在report的文件夹执行
pytest.main([&#39;../test_case/&#39;,&#39;--alluredir&#39;,&#39;../report/allure_raw/&#39;])
./allure serve /myitem/autotest/report/allure_raw
</code></pre><h1 id=locust>Locust<a href=#locust class=hanchor arialabel=Anchor>&#8983;</a></h1><pre tabindex=0><code>pip install locust

# centos需要添加环境变量
# 如果locust在哪个目录,如果python安装在这个目录:/usr/local/bin/python3
ln -s /usr/local/bin/python3/bin/locust /usr/bin/locust

locust --version
</code></pre><h1 id=快速入门>快速入门<a href=#快速入门 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>新建一个redis.py</p><pre tabindex=0><code>class QuickstartUser(HttpUser):
    wait_time = between(1, 10)

    @task
    def index_page(self):
        self.client.get(&#34;/hello&#34;)
        self.client.get(&#34;/world&#34;)

    @task(3)
    def view_item(self):
        for item_id in range(10):
            self.client.get(f&#34;/item?id={item_id}&#34;, name=&#34;/item&#34;)
            time.sleep(1)

    def on_start(self):
        self.client.post(&#34;/login&#34;, json={&#34;username&#34;: &#34;foo&#34;, &#34;password&#34;: &#34;bar&#34;})
</code></pre><p>在文件目录,执行</p><pre tabindex=0><code>locust -f redis.py

# 启动成功后,访问 http://localhost:8089
</code></pre><h1 id=写一个locust文件>写一个Locust文件<a href=#写一个locust文件 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>Locust文件是一个普通的python文件,唯一的要求就是至少有一个类继承的<code>User</code>类</p><h1 id=user>User<a href=#user class=hanchor arialabel=Anchor>&#8983;</a></h1><p>一个User类标识一个用户,Locust会给每个用户模拟一个User实例,公共的属性通常在User类里被定义</p><h3 id=wait_time-属性>wait_time 属性<a href=#wait_time-属性 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>用户的wwait_time方法通常作用于执行的任务简直等待多长时间</p><p>这里有三个内建的等待时间的函数</p><ul><li>constant 一段固定的时间</li><li>between 最小和最大数之间的随机时间</li><li>constant_pacing 确保任务运行一次最多不超过x秒的适应时间</li></ul><p>举个例子,让每个用户在每个任务执行之间等待0.5s到10s</p><pre tabindex=0><code>from locust import User, task, between

class MyUser(User):
    @task
    def my_task(self):
        print(&#34;executing my_task&#34;)

    wait_time = between(0.5, 10)
</code></pre><p>也可以直接在你的类里声明wait_time方法,举个例子,下面的User类,会睡眠1s,2s&mldr;</p><pre tabindex=0><code>class MyUser(User):
    last_wait_time = 0

    def wait_time(self):
        self.last_wait_time += 1
        return self.last_wait_time

    ...
</code></pre><h3 id=weight-属性>weight 属性<a href=#weight-属性 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>如果文件中存在多个用户类，并且在命令行中没有指定用户类，则Locust将生成每个用户类的相同数量。您还可以通过将用户类作为命令行参数传递来指定从同一个locustfile中使用哪些用户类</p><pre tabindex=0><code>locust -f locust_file.py WebUser MobileUser
</code></pre><p>如果希望模拟某种类型的更多用户，可以在这些类上设置权重属性,比方说,web用户是移动用户的三倍多</p><pre tabindex=0><code>class WebUser(User):
    weight = 3
    ...

class MobileUser(User):
    weight = 1
    ...
</code></pre><h3 id=host-属性>host 属性<a href=#host-属性 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>host属性是host的URL前缀,通常,当locust启动的时候,在locust的web界面或者在命令上中使用<code>--hosts</code>选项中使用</p><p>如果一个类声明了声明的host属性,它将在没有使用<code>--host</code>命令行或web请求仲使用</p><h3 id=tasks属性>tasks属性<a href=#tasks属性 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>用户类可以使用<code>@task</code>装饰器,将任务声明为方法,但是也可以使用下面详细描述的tasks属性来指定任务。</p><h3 id=environment-属性>environment 属性<a href=#environment-属性 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>对用户正在其中运行的环境的引用,使用它影响这环境,或者是运行着在它的容器中,比如去停止运行从任务方法中</p><pre tabindex=0><code>self.environment.runner.quit()
</code></pre><p>如果运行的是独立的locust实例,它将停止全部,如果是运行在工作节点,它将停止节点</p><h3 id=on_start-和-on_stop-方法>on_start 和 on_stop 方法<a href=#on_start-和-on_stop-方法 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>用户 或者是任务集合可以声明``on_start<code>方法或者</code>on_stop<code>方法,用户将调用它自己的</code>on_start<code>方法在它将要开始运行的时候,</code>on_stop<code>方法,将在停止运行的时候调用,比如TaskSet,</code>on_start<code>方法被调用在模拟的用户开始执行任务,</code>on_stop<code>方法在停止模拟的用户执行任务的时候调用(或者被</code>interrupt()`方法调用,或者是用被用杀掉)</p><h1 id=tasks>Tasks<a href=#tasks class=hanchor arialabel=Anchor>&#8983;</a></h1><p>当启动负载测试,一个用户实例将被创建,</p><p>下载mp4</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> os
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> time
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> requests
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> tqdm <span style=color:#f92672>import</span> tqdm  <span style=color:#75715e># 进度条模块</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>down_from_url</span>(url, dst):
</span></span><span style=display:flex><span>    <span style=color:#75715e># 设置stream=True参数读取大文件</span>
</span></span><span style=display:flex><span>    response <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>get(url, stream<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># 通过header的content-length属性可以获取文件的总容量</span>
</span></span><span style=display:flex><span>    file_size <span style=color:#f92672>=</span> int(response<span style=color:#f92672>.</span>headers[<span style=color:#e6db74>&#39;content-length&#39;</span>])
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>exists(dst):
</span></span><span style=display:flex><span>        <span style=color:#75715e># 获取本地已经下载的部分文件的容量，方便继续下载，如果不存在就从头开始下载。</span>
</span></span><span style=display:flex><span>        first_byte <span style=color:#f92672>=</span> os<span style=color:#f92672>.</span>path<span style=color:#f92672>.</span>getsize(dst)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        first_byte <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># 如果大于或者等于则表示已经下载完成，否则继续</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> first_byte <span style=color:#f92672>&gt;=</span> file_size:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> file_size
</span></span><span style=display:flex><span>    header <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#34;Range&#34;</span>: <span style=color:#e6db74>f</span><span style=color:#e6db74>&#34;bytes=</span><span style=color:#e6db74>{</span>first_byte<span style=color:#e6db74>}</span><span style=color:#e6db74>-</span><span style=color:#e6db74>{</span>file_size<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    pbar <span style=color:#f92672>=</span> tqdm(total<span style=color:#f92672>=</span>file_size, 
</span></span><span style=display:flex><span>							  initial<span style=color:#f92672>=</span>first_byte, 
</span></span><span style=display:flex><span>								unit<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;B&#39;</span>, 
</span></span><span style=display:flex><span>								unit_scale<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, 
</span></span><span style=display:flex><span>								desc<span style=color:#f92672>=</span>dst)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    req <span style=color:#f92672>=</span> requests<span style=color:#f92672>.</span>get(url, headers<span style=color:#f92672>=</span>header, stream<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(dst, <span style=color:#e6db74>&#39;ab&#39;</span>) <span style=color:#66d9ef>as</span> f:
</span></span><span style=display:flex><span>        <span style=color:#75715e># 每次读取一个1024个字节</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> chunk <span style=color:#f92672>in</span> req<span style=color:#f92672>.</span>iter_content(chunk_size<span style=color:#f92672>=</span><span style=color:#ae81ff>1024</span>):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> chunk:
</span></span><span style=display:flex><span>                f<span style=color:#f92672>.</span>write(chunk)
</span></span><span style=display:flex><span>                pbar<span style=color:#f92672>.</span>update(<span style=color:#ae81ff>1024</span>)
</span></span><span style=display:flex><span>    pbar<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> file_size
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    url <span style=color:#f92672>=</span> input(<span style=color:#e6db74>&#34;请输入.mp4格式的视频链接地址，按回车键确认&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># 根据时间戳生成文件名</span>
</span></span><span style=display:flex><span>    down_from_url(url, str(time<span style=color:#f92672>.</span>time()) <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.mp4&#34;</span>)
</span></span></code></pre></div><p>SSH下载服务器文件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> paramiko
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LinuxFile</span>:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>__init__</span>(self, ip, port, username, password):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>ip <span style=color:#f92672>=</span> ip
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>port <span style=color:#f92672>=</span> port
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>username <span style=color:#f92672>=</span> username
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>password <span style=color:#f92672>=</span> password
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>transport <span style=color:#f92672>=</span> paramiko<span style=color:#f92672>.</span>Transport((str(self<span style=color:#f92672>.</span>ip), int(self<span style=color:#f92672>.</span>port)))
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>transport<span style=color:#f92672>.</span>connect(username<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>username, password<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>password)
</span></span><span style=display:flex><span>            self<span style=color:#f92672>.</span>sftp <span style=color:#f92672>=</span> paramiko<span style=color:#f92672>.</span>SFTPClient<span style=color:#f92672>.</span>from_transport(self<span style=color:#f92672>.</span>transport)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span> <span style=color:#a6e22e>Exception</span> <span style=color:#66d9ef>as</span> e:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> e
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>up_file</span>(self, localhost_file, server_file):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        将本地文件上传至服务器
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        :param localhost_file: 本地文件路径
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        :param server_file: 服务器保存路径
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        :return:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>sftp<span style=color:#f92672>.</span>put(localhost_file, server_file)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>down_file</span>(self, localhost_file, server_file):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        将服务器文件下载至本地
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        :param localhost_file: 本地文件路径
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        :param server_file: 服务器保存路径
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        :return:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>sftp<span style=color:#f92672>.</span>get(localhost_file, server_file)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>close</span>(self):
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        关闭服务器
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        :return:
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>transport<span style=color:#f92672>.</span>close()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    test <span style=color:#f92672>=</span> LinuxFile(<span style=color:#e6db74>&#39;47.242.218.75&#39;</span>, <span style=color:#e6db74>&#39;22&#39;</span>, <span style=color:#e6db74>&#39;root&#39;</span>, <span style=color:#e6db74>&#39;Qwer1234&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e># test.up_file(&#39;../2020-10-11_20-21-28.py&#39;, &#39;/root/2020-10-11_20-21-28.py&#39;)</span>
</span></span><span style=display:flex><span>    test<span style=color:#f92672>.</span>down_file(<span style=color:#e6db74>&#39;/var/log/nginx/access.log&#39;</span>,<span style=color:#e6db74>&#39;a.log&#39;</span>)
</span></span></code></pre></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=../../posts/php/><span class=button__icon>←</span>
<span class=button__text>PHP</span>
</a></span><span class="button next"><a href=../../posts/redis/><span class=button__text>Redis</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/mirus-ua/hugo-theme-re-terminal target=_blank>Theme</a> made by <a href=https://github.com/mirus-ua target=_blank>Mirus</a></span></div></div></footer><script type=text/javascript src=../../bundle.min.js></script></div></body></html>