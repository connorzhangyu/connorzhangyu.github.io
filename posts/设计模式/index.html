<!doctype html><html lang=zh><head><title>设计模式 :: Hello World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='创建型模式 简单工厂 Pay.java
public interface Pay { void pay(Integer money); } SimpleFactory.java
public class SimpleFactory { public static Pay create(String payType) { if (payType.equals("ZFB")) { return new ZFBPay(); } else if (payType.equals("WX")) { return new WXPay(); }else { return null; } } } WXPay.java
微信支付
public class WXPay implements Pay { public void pay(Integer money) { System.out.println("微信支付:"+money+"元"); } } ZFBPay.java
支付宝支付
public class ZFBPay implements Pay { public void pay(Integer money) { System.out.println("支付宝支付:"+money+"元"); } } Test.java
/** * 简单工厂设计模式 */ public class Test { public static void main(String[] args) { Pay wx = SimpleFactory.create("WX"); wx.pay(2); Pay zfb = SimpleFactory.create("ZFB"); zfb.pay(1); } } 行为模式 策略模式 基础
'><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=https://connorzhangyu.com/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/><link rel=stylesheet href=https://connorzhangyu.com/styles.css><link rel="shortcut icon" href=https://connorzhangyu.com/img/theme-colors/orange.png><link rel=apple-touch-icon href=https://connorzhangyu.com/img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="Anthony"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="og:title" content="设计模式"><meta property="og:description" content='创建型模式 简单工厂 Pay.java
public interface Pay { void pay(Integer money); } SimpleFactory.java
public class SimpleFactory { public static Pay create(String payType) { if (payType.equals("ZFB")) { return new ZFBPay(); } else if (payType.equals("WX")) { return new WXPay(); }else { return null; } } } WXPay.java
微信支付
public class WXPay implements Pay { public void pay(Integer money) { System.out.println("微信支付:"+money+"元"); } } ZFBPay.java
支付宝支付
public class ZFBPay implements Pay { public void pay(Integer money) { System.out.println("支付宝支付:"+money+"元"); } } Test.java
/** * 简单工厂设计模式 */ public class Test { public static void main(String[] args) { Pay wx = SimpleFactory.create("WX"); wx.pay(2); Pay zfb = SimpleFactory.create("ZFB"); zfb.pay(1); } } 行为模式 策略模式 基础
'><meta property="og:url" content="https://connorzhangyu.com/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/"><meta property="og:site_name" content="Hello World"><meta property="og:image" content="https://image.runtimes.cc/202404051525605.jpg"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Java"><meta property="article:published_time" content="2022-11-19 18:25:00 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=/><div class=logo>康纳的记仇小本本</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=/about>关于</a></li><li><a href=/showcase>精选</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=/about>关于</a></li><li><a href=/showcase>精选</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=https://connorzhangyu.com/posts/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/>设计模式</a></h1><div class=post-meta><time class=post-date>2022-11-19</time><span class=post-author>Anthony</span></div><span class=post-tags>#<a href=https://connorzhangyu.com/tags/java/>Java</a>&nbsp;
#<a href=https://connorzhangyu.com/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/>设计模式</a>&nbsp;
</span><img src=https://image.runtimes.cc/202404051525605.jpg class=post-cover alt=" " title="Cover Image"><div class=post-content><div><h1 id=创建型模式>创建型模式<a href=#创建型模式 class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=简单工厂>简单工厂<a href=#简单工厂 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Pay.java</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Pay</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>pay</span>(Integer money);
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>SimpleFactory.java</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SimpleFactory</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> Pay <span style=color:#a6e22e>create</span>(String payType) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (payType.<span style=color:#a6e22e>equals</span>(<span style=color:#e6db74>&#34;ZFB&#34;</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> ZFBPay();
</span></span><span style=display:flex><span>        } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (payType.<span style=color:#a6e22e>equals</span>(<span style=color:#e6db74>&#34;WX&#34;</span>)) {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> WXPay();
</span></span><span style=display:flex><span>        }<span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>WXPay.java</p><p>微信支付</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>WXPay</span> <span style=color:#66d9ef>implements</span> Pay {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>pay</span>(Integer money) {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;微信支付:&#34;</span><span style=color:#f92672>+</span>money<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;元&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ZFBPay.java</p><p>支付宝支付</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ZFBPay</span> <span style=color:#66d9ef>implements</span> Pay {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>pay</span>(Integer money) {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;支付宝支付:&#34;</span><span style=color:#f92672>+</span>money<span style=color:#f92672>+</span><span style=color:#e6db74>&#34;元&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Test.java</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 简单工厂设计模式
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Test</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Pay wx <span style=color:#f92672>=</span> SimpleFactory.<span style=color:#a6e22e>create</span>(<span style=color:#e6db74>&#34;WX&#34;</span>);
</span></span><span style=display:flex><span>        wx.<span style=color:#a6e22e>pay</span>(2);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        Pay zfb <span style=color:#f92672>=</span> SimpleFactory.<span style=color:#a6e22e>create</span>(<span style=color:#e6db74>&#34;ZFB&#34;</span>);
</span></span><span style=display:flex><span>        zfb.<span style=color:#a6e22e>pay</span>(1);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=行为模式>行为模式<a href=#行为模式 class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=策略模式>策略模式<a href=#策略模式 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><strong>基础</strong></p><p>Strategy</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Strategy</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 策略方法
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>strategyInterface</span>();
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ConcreteStrategyA</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ConcreteStrategyA</span> <span style=color:#66d9ef>implements</span> Strategy {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>strategyInterface</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;ConcreteStrategyA&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ConcreteStrategyB</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ConcreteStrategyB</span> <span style=color:#66d9ef>implements</span> Strategy {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>strategyInterface</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;ConcreteStrategyB&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>ConcreteStrategyC</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ConcreteStrategyC</span> <span style=color:#66d9ef>implements</span> Strategy {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>strategyInterface</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;ConcreteStrategyC&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Context</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Context</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>//持有一个具体策略的对象</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Strategy strategy;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 构造函数，传入一个具体策略对象
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>Context</span>(Strategy strategy){
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>strategy</span> <span style=color:#f92672>=</span> strategy;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 策略方法
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>contextInterface</span>(){
</span></span><span style=display:flex><span>        strategy.<span style=color:#a6e22e>strategyInterface</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Test.java</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Test</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>        Context context <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Context(<span style=color:#66d9ef>new</span> ConcreteStrategyA());
</span></span><span style=display:flex><span>        context.<span style=color:#a6e22e>contextInterface</span>();
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=应用>应用<a href=#应用 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>MemberStrategy.java</p><pre tabindex=0><code>/**
 * 会员策略
 */
public interface MemberStrategy {

    /**
     * 计算图书的价格,根绝会员等级
     * @param booksPrice    图书的原价
     * @return    计算出打折后的价格
     */
    public double calcPrice(double booksPrice);

}
</code></pre><p>PrimaryMemberStrategy.java 初级会员</p><pre tabindex=0><code>public class PrimaryMemberStrategy implements MemberStrategy {
    @Override
    public double calcPrice(double booksPrice) {
        System.out.println(&#34;初级会员,没有折扣&#34;);
        return 0;
    }
}
</code></pre><p>IntermediateMemberStrategy.java 中级会员</p><pre tabindex=0><code>public class IntermediateMemberStrategy implements MemberStrategy {
    @Override
    public double calcPrice(double booksPrice) {
        System.out.println(&#34;对于中级会员的折扣为10%&#34;);
        return booksPrice * 0.9;
    }
}
</code></pre><p>AdvancedMemberStrategy.java 高级会员</p><pre tabindex=0><code>public class AdvancedMemberStrategy implements MemberStrategy {
    @Override
    public double calcPrice(double booksPrice) {
        System.out.println(&#34;对于高级会员的折扣为20%&#34;);
        return booksPrice * 0.8;
    }
}
</code></pre><p>Price.java</p><pre tabindex=0><code>public class Price {

    private MemberStrategy strategy;

    public Price(MemberStrategy strategy) {
        this.strategy = strategy;
    }

    /**
     * 计算图书的价格
     * @param booksPrice    图书的原价
     * @return    计算出打折后的价格
     */
    public double quote(double booksPrice){
        return this.strategy.calcPrice(booksPrice);
    }
}
</code></pre><p>Test.java</p><pre tabindex=0><code>public class Test {

    public static void main(String[] args) {
        //选择并创建需要使用的策略对象
        MemberStrategy strategy = new AdvancedMemberStrategy();
        //创建环境
        Price price = new Price(strategy);
        //计算价格
        double quote = price.quote(300);
        System.out.println(&#34;图书的最终价格为：&#34; + quote);
    }
}
</code></pre><h1 id=结构模式>结构模式<a href=#结构模式 class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=装饰模式>装饰模式<a href=#装饰模式 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>mybatis的执行期就用的是装饰模式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>// 抽象构件角色</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 比如这是一期开发的接口</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Shape</span> {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 具体构件角色</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 比如这是一期开发好的实现类</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Rectangle</span> <span style=color:#66d9ef>implements</span> Shape {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>      System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Shape: Rectangle&#34;</span>);
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 到二期开发了,发现这个Rectangle的实现不太好用了,需要添加别的功能</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 抽象装饰器</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ShapeDecorator</span> <span style=color:#66d9ef>implements</span> Shape {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>protected</span> Shape decoratedShape;
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>ShapeDecorator</span>(Shape decoratedShape){
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>decoratedShape</span> <span style=color:#f92672>=</span> decoratedShape;
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>draw</span>(){
</span></span><span style=display:flex><span>      decoratedShape.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>   }  
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 具体装饰器角色</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 这里就是开发的二期的功能</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>RedShapeDecorator</span> <span style=color:#66d9ef>extends</span> ShapeDecorator {
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>public</span> <span style=color:#a6e22e>RedShapeDecorator</span>(Shape decoratedShape) {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>super</span>(decoratedShape);     
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>draw</span>() {
</span></span><span style=display:flex><span>     <span style=color:#75715e>// 调用一期的代码原本的功能</span>
</span></span><span style=display:flex><span>      decoratedShape.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>     
</span></span><span style=display:flex><span>     <span style=color:#75715e>// 调用二期的新代码的功能</span>
</span></span><span style=display:flex><span>      setRedBorder(decoratedShape);
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>setRedBorder</span>(Shape decoratedShape){
</span></span><span style=display:flex><span>      System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;Border Color: Red&#34;</span>);
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 比如一个人冷了,多套了一件毛衣,发现还是冷,又多穿了一件羽绒服,一层一层的,装饰</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>DecoratorPatternDemo</span> {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>     <span style=color:#75715e>//	一期的代码</span>
</span></span><span style=display:flex><span>      Shape circle <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> Circle();
</span></span><span style=display:flex><span>     <span style=color:#75715e>// 二期的代码</span>
</span></span><span style=display:flex><span>      ShapeDecorator redCircle <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> RedShapeDecorator(<span style=color:#66d9ef>new</span> Circle());
</span></span><span style=display:flex><span>      redCircle.<span style=color:#a6e22e>draw</span>();
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=模板模式>模板模式<a href=#模板模式 class=hanchor arialabel=Anchor>&#8983;</a></h1><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Lifecycle</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span>();
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AbstractLifecycle</span> <span style=color:#66d9ef>implements</span> Lifecycle{
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>abstract</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>init</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;这里是公共方法&#34;</span>);
</span></span><span style=display:flex><span>        run();
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;这里也是公共方法&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ServerStandard</span> <span style=color:#66d9ef>extends</span> AbstractLifecycle {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;我是实现,父类将调用我&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ServerStandard2</span> <span style=color:#66d9ef>extends</span> AbstractLifecycle {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>run</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;我是实现2,父类将调用我&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Test</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>main</span>(String<span style=color:#f92672>[]</span> args) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ServerStandard serverStandard <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ServerStandard();
</span></span><span style=display:flex><span>        serverStandard.<span style=color:#a6e22e>init</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;============================================&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        ServerStandard2 serverStandard2 <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ServerStandard2();
</span></span><span style=display:flex><span>        serverStandard2.<span style=color:#a6e22e>init</span>();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=责任链模式>责任链模式<a href=#责任链模式 class=hanchor arialabel=Anchor>&#8983;</a></h1><pre tabindex=0><code>public abstract class Handler {
    protected String name; // 处理者姓名

    @Setter
    protected Handler nextHandler;  // 下一个处理者

    public Handler(String name) {
        this.name = name;
    }

    public abstract boolean process(LeaveRequest leaveRequest); // 处理请假
}

public class Director extends Handler {

    public Director(String name) {
        super(name);
    }

    @Override
    public boolean process(LeaveRequest leaveRequest) {
        // 随机数大于3则为批准，否则不批准
        boolean result = (new Random().nextInt(10)) &gt; 3;
        String log = &#34;主管&lt;%s&gt; 审批 &lt;%s&gt; 的请假申请，请假天数： &lt;%d&gt; ，审批结果：&lt;%s&gt; &#34;;
        System.out.println(String.format(log, this.name, leaveRequest.getName(), leaveRequest.getNumOfDays(), result == true ? &#34;批准&#34; : &#34;不批准&#34;));

        if (!result) {  // 不批准
            return false;
        } else if (leaveRequest.getNumOfDays() &lt; 3) { // 批准且天数小于3，返回true
            return true;
        }
        return nextHandler.process(leaveRequest);   // 批准且天数大于等于3，提交给下一个处理者处理

    }
}

public class Manager extends Handler {

    public Manager(String name) {
        super(name);
    }

    @Override
    public boolean process(LeaveRequest leaveRequest) {
        boolean result = (new Random().nextInt(10)) &gt; 3; // 随机数大于3则为批准，否则不批准
        String log = &#34;经理&lt;%s&gt; 审批 &lt;%s&gt; 的请假申请，请假天数： &lt;%d&gt; ，审批结果：&lt;%s&gt; &#34;;
        System.out.println(String.format(log, this.name, leaveRequest.getName(), leaveRequest.getNumOfDays(), result == true ? &#34;批准&#34; : &#34;不批准&#34;));

        if (!result) {  // 不批准
            return false;
        } else if (leaveRequest.getNumOfDays() &lt; 7) { // 批准且天数小于7
            return true;
        }
        return nextHandler.process(leaveRequest);   // 批准且天数大于等于7，提交给下一个处理者处理
    }
}

public class TopManager extends Handler {

    public TopManager(String name) {
        super(name);
    }

    @Override
    public boolean process(LeaveRequest leaveRequest) {
        boolean result = (new Random().nextInt(10)) &gt; 3; // 随机数大于3则为批准，否则不批准
        String log = &#34;总经理&lt;%s&gt; 审批 &lt;%s&gt; 的请假申请，请假天数： &lt;%d&gt; ，审批结果：&lt;%s&gt; &#34;;
        System.out.println(String.format(log, this.name, leaveRequest.getName(), leaveRequest.getNumOfDays(), result == true ? &#34;批准&#34; : &#34;不批准&#34;));

        if (!result) { // 总经理不批准
            return false;
        }
        return true;    // 总经理最后批准
    }
}

@Data
@AllArgsConstructor
public class LeaveRequest {

    private String name;    // 请假人姓名
    private int numOfDays;  // 请假天数

}

public class Test {

    public static void main(String[] args) {
        // 创建审批人
        Handler zhangsan = new Director(&#34;张三&#34;);
        Handler lisi = new Manager(&#34;李四&#34;);
        Handler wangwu = new TopManager(&#34;王五&#34;);

        // 创建责任链
        zhangsan.setNextHandler(lisi);
        lisi.setNextHandler(wangwu);

        // 发起请假申请第一次
        boolean result1 = zhangsan.process(new LeaveRequest(&#34;小旋锋&#34;, 1));
        System.out.println(&#34;最终结果：&#34; + result1 + &#34;\n&#34;);

        // 发起请假申请第二次
        boolean result2 = zhangsan.process(new LeaveRequest(&#34;小旋锋&#34;, 4));
        System.out.println(&#34;最终结果：&#34; + result2 + &#34;\n&#34;);

        // 发起请假申请第三次
        boolean result3 = zhangsan.process(new LeaveRequest(&#34;小旋锋&#34;, 8));
        System.out.println(&#34;最终结果：&#34; + result3 + &#34;\n&#34;);
    }
}
</code></pre><p>Tomcat的过滤器也使用到了责任链<code>ApplicationFilterChain</code>,具体的还没有读,先写完这个模式,比模板模式感觉有点复杂</p><p>参考的是:<a href=https://juejin.im/post/6844903702260629512#heading-11>https://juejin.im/post/6844903702260629512#heading-11</a>,</p><p>感觉举的例子的业务显示还不是特别的好理解</p><p>也参考下这个:<a href=https://www.cnblogs.com/tanshaoshenghao/p/10741160.html>https://www.cnblogs.com/tanshaoshenghao/p/10741160.html</a></p><h1 id=适配器模式>适配器模式<a href=#适配器模式 class=hanchor arialabel=Anchor>&#8983;</a></h1><p><code>SpringMVC的DispatchServlet的例子</code></p><h2 id=具体实现>具体实现<a href=#具体实现 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Description: 控制器接口
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>Controller</span> {}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Controller 实现之1：HttpController
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>HttpController</span> <span style=color:#66d9ef>implements</span> Controller {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doHttpHandler</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;HttpController:httpMethod()&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Controller 实现之2：SimpleController
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>SimpleController</span> <span style=color:#66d9ef>implements</span> Controller {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doSimplerHandler</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;SimpleController:simpleMethod()&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e> * Controller 实现之3：HttpController
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AnnotationController</span> <span style=color:#66d9ef>implements</span> Controller {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>doAnnotationHandler</span>() {
</span></span><span style=display:flex><span>        System.<span style=color:#a6e22e>out</span>.<span style=color:#a6e22e>println</span>(<span style=color:#e6db74>&#34;AnnotationController:annotationMethod()&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=处理器>处理器<a href=#处理器 class=hanchor arialabel=Anchor>&#8983;</a></h2><pre tabindex=0><code>/**
 * 定义一个Adapter接口
 */
public interface HandlerAdapter {

    /**
     * 是否支持
     *
     * @param handler
     * @return
     */
    boolean supports(Object handler);

    /**
     * 处理
     *
     * @param handler
     */
    void handle(Object handler);

}

/**
 * HttpController 的适配器
 */
public class HttpHandlerAdapter implements HandlerAdapter {

    public boolean supports(Object handler) {
        return (handler instanceof HttpController);
    }

    public void handle(Object handler) {
        ((HttpController) handler).doHttpHandler();
    }
}

/**
 * SimpleController的适配器
 */
public class SimpleHandlerAdapter implements HandlerAdapter {

    public boolean supports(Object handler) {
        return (handler instanceof SimpleController);
    }

    public void handle(Object handler) {
        ((SimpleController) handler).doSimplerHandler();
    }
}

/**
 * AnnotationController 的适配器
 */
public class AnnotationHandlerAdapter implements HandlerAdapter {

    public boolean supports(Object handler) {
        return (handler instanceof AnnotationController);
    }

    public void handle(Object handler) {
        ((AnnotationController) handler).doAnnotationHandler();
    }
}
</code></pre><h2 id=main方法>main方法<a href=#main方法 class=hanchor arialabel=Anchor>&#8983;</a></h2><pre tabindex=0><code>/**
 * 模拟一个DispatcherServlet，适配器（适配者模式）
 * HandlerAdapter(适配器类) 作为适配器来适配各种 Handler(适配者类)（如Controller）
 */
public class DispatchServlet {

    public static List&lt;HandlerAdapter&gt; handlerAdapters = new ArrayList&lt;HandlerAdapter&gt;();

    /**
     * 注册所有 HandlerAdapter
     */
    public DispatchServlet() {
        handlerAdapters.add(new AnnotationHandlerAdapter());
        handlerAdapters.add(new HttpHandlerAdapter());
        handlerAdapters.add(new SimpleHandlerAdapter());
    }

    /**
     * 模拟DispatchServlet 中的 doDispatch()方法
     */
    public void doDispatch() {
        Controller handler = new AnnotationController();
        // 通过handler来找到对应适配器
        HandlerAdapter handlerAdapter = getHandler(handler);
        // 通过执行适配器的handle，来执行对应的controller对应方法
        handlerAdapter.handle(handler);
    }

    /**
     * 找到与handler适配的适配器：通过handler 遍历 HandlerAdapter 适配器来实现
     */
    public HandlerAdapter getHandler(Controller handler) {
        for (HandlerAdapter adapter : handlerAdapters) {
            if (adapter.supports(handler)) {
                return adapter;
            }
        }
        return null;
    }

    /**
     * 模拟运行
     */
    public static void main(String[] args) {
        new DispatchServlet().doDispatch();
    }
}
</code></pre><h1 id=参考>参考<a href=#参考 class=hanchor arialabel=Anchor>&#8983;</a></h1><blockquote><p><a href=https://refactoringguru.cn/design-patterns>https://refactoringguru.cn/design-patterns</a></p><p><a href=https://juejin.cn/post/6999268990971281439>装饰器模式</a></p></blockquote></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=https://connorzhangyu.com/posts/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/windows/><span class=button__icon>←</span>
<span class=button__text>Windows</span>
</a></span><span class="button next"><a href=https://connorzhangyu.com/posts/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E8%99%9A%E6%8B%9F%E6%9C%BA/><span class=button__text>虚拟机</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/mirus-ua/hugo-theme-re-terminal target=_blank>Theme</a> made by <a href=https://github.com/mirus-ua target=_blank>Mirus</a></span></div></div></footer><script type=text/javascript src=/bundle.min.js></script></div></body></html>