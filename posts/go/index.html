<!doctype html><html lang=zh><head><title>Go :: Hello World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='入门 参考: Go英文文档
Hello World // 一定要在main的包下才能运行 // 一个main包下,只能有一个main入口 package main import "fmt" func main() { fmt.Print("hello world") } # 第一种,编译后运行.exe文件 # 编译 C:\Users\anthony\go\src\awesomeProject\demo\main>go build demo.go # 运行编译后exe文件 C:\Users\anthony\go\src\awesomeProject\demo\main>demo.exe hello world # 第二种,直接运行源代码go run *.go 标准输入 package main import "fmt" func main() { var name string var age int /* 使用"&"获取score变量的内存地址(即取变量内存地址的运算符)，通过键盘输入为score变量指向的内存地址赋初值。 fmt.Scan是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。 fmt.Scan可以接收多个参数，用户输入参数默认使用空格或者回车换行符分割输入设备传入的参数，直到接收所有的参数为止 */ fmt.Scan(&amp;name, &amp;age) fmt.Println(name, age) } package main import "fmt" func main() { var name string var age int /* 和fmt.Scan功能类似，fmt.Scanln也是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。 fmt.Scanln也可以接收多个参数，用户输入参数默认使用空格分割输入设备传入的参数，遇到回车换行符就结束接收参数 */ fmt.Scanln(&amp;name, &amp;age) fmt.Println(name, age) } package main import "fmt" func main() { var name string var age int /* 和fmt.Scanln功能类似，fmt.Scanf也是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。 其实fmt.Scanln和fmt.Scanf可都以接收多个参数，用户输入参数默认使用空格分割输入设备传入的参数，遇到回车换行符就结束接收参数 唯一区别就是可以格式化用户输入的数据类型,如下所示: %s: 表示接收的参数会被转换成一个字符串类型，赋值给变量 %d: 表示接收的参数会被转换成一个整形类型，赋值给变量 生产环境中使用fmt.Scanln和fmt.Scanf的情况相对较少，一般使用fmt.Scan的情况较多~ */ fmt.Scanf("%s%d", &amp;name, &amp;age) fmt.Println(name, age) } func method_if() { reader := bufio.NewReader(os.Stdin) str, _ := reader.ReadString(&#39;\n&#39;) fmt.Printf("输入的值是:%s\n", str) } 声明变量 基本类型,声明变量,不赋值,就有默认值
'><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=../../posts/go/><link rel=stylesheet href=../../styles.css><link rel="shortcut icon" href=../../img/theme-colors/orange.png><link rel=apple-touch-icon href=../../img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="Anthony"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="og:title" content="Go"><meta property="og:description" content='入门 参考: Go英文文档
Hello World // 一定要在main的包下才能运行 // 一个main包下,只能有一个main入口 package main import "fmt" func main() { fmt.Print("hello world") } # 第一种,编译后运行.exe文件 # 编译 C:\Users\anthony\go\src\awesomeProject\demo\main>go build demo.go # 运行编译后exe文件 C:\Users\anthony\go\src\awesomeProject\demo\main>demo.exe hello world # 第二种,直接运行源代码go run *.go 标准输入 package main import "fmt" func main() { var name string var age int /* 使用"&"获取score变量的内存地址(即取变量内存地址的运算符)，通过键盘输入为score变量指向的内存地址赋初值。 fmt.Scan是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。 fmt.Scan可以接收多个参数，用户输入参数默认使用空格或者回车换行符分割输入设备传入的参数，直到接收所有的参数为止 */ fmt.Scan(&amp;name, &amp;age) fmt.Println(name, age) } package main import "fmt" func main() { var name string var age int /* 和fmt.Scan功能类似，fmt.Scanln也是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。 fmt.Scanln也可以接收多个参数，用户输入参数默认使用空格分割输入设备传入的参数，遇到回车换行符就结束接收参数 */ fmt.Scanln(&amp;name, &amp;age) fmt.Println(name, age) } package main import "fmt" func main() { var name string var age int /* 和fmt.Scanln功能类似，fmt.Scanf也是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。 其实fmt.Scanln和fmt.Scanf可都以接收多个参数，用户输入参数默认使用空格分割输入设备传入的参数，遇到回车换行符就结束接收参数 唯一区别就是可以格式化用户输入的数据类型,如下所示: %s: 表示接收的参数会被转换成一个字符串类型，赋值给变量 %d: 表示接收的参数会被转换成一个整形类型，赋值给变量 生产环境中使用fmt.Scanln和fmt.Scanf的情况相对较少，一般使用fmt.Scan的情况较多~ */ fmt.Scanf("%s%d", &amp;name, &amp;age) fmt.Println(name, age) } func method_if() { reader := bufio.NewReader(os.Stdin) str, _ := reader.ReadString(&#39;\n&#39;) fmt.Printf("输入的值是:%s\n", str) } 声明变量 基本类型,声明变量,不赋值,就有默认值
'><meta property="og:url" content="/posts/go/"><meta property="og:site_name" content="Hello World"><meta property="og:image" content="https://image.runtimes.cc/202404051528208.webp"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:section" content="Go"><meta property="article:published_time" content="2022-11-19 18:25:00 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=../../><div class=logo>康纳的记仇小本本</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;▾</li><li><ul class=menu__dropdown><li><a href=../../about>关于</a></li><li><a href=../../showcase>精选</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=../../about>关于</a></li><li><a href=../../showcase>精选</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=../../posts/go/>Go</a></h1><div class=post-meta><time class=post-date>2022-11-19</time><span class=post-author>Anthony</span></div><span class=post-tags>#<a href=../../tags/go/>Go</a>&nbsp;
#<a href=../../tags/%E6%95%99%E7%A8%8B/>教程</a>&nbsp;
</span><img src=https://image.runtimes.cc/202404051528208.webp class=post-cover alt=" " title="Cover Image"><div class=post-content><div><h1 id=入门>入门<a href=#入门 class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=参考>参考:<a href=#参考 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><a href=https://www.golinuxcloud.com/golang-interview-questions-answers/>Go英文文档</a></p><h2 id=hello-world>Hello World<a href=#hello-world class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 一定要在main的包下才能运行</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 一个main包下,只能有一个main入口</span>
</span></span><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;hello world&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style=display:flex><span><span style=color:#75715e># 第一种,编译后运行.exe文件</span>
</span></span><span style=display:flex><span><span style=color:#75715e># 编译</span>
</span></span><span style=display:flex><span>C:\Users\anthony\go\src\awesomeProject\demo\main&gt;go build demo.go
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 运行编译后exe文件</span>
</span></span><span style=display:flex><span>C:\Users\anthony\go\src\awesomeProject\demo\main&gt;demo.exe
</span></span><span style=display:flex><span>hello world
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 第二种,直接运行源代码go run *.go</span>
</span></span></code></pre></div><h2 id=标准输入>标准输入<a href=#标准输入 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>age</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>        使用&#34;&amp;&#34;获取score变量的内存地址(即取变量内存地址的运算符)，通过键盘输入为score变量指向的内存地址赋初值。
</span></span></span><span style=display:flex><span><span style=color:#75715e>        fmt.Scan是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。
</span></span></span><span style=display:flex><span><span style=color:#75715e>        fmt.Scan可以接收多个参数，用户输入参数默认使用空格或者回车换行符分割输入设备传入的参数，直到接收所有的参数为止
</span></span></span><span style=display:flex><span><span style=color:#75715e>    */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Scan</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>name</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>age</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>        和fmt.Scan功能类似，fmt.Scanln也是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。
</span></span></span><span style=display:flex><span><span style=color:#75715e>        fmt.Scanln也可以接收多个参数，用户输入参数默认使用空格分割输入设备传入的参数，遇到回车换行符就结束接收参数
</span></span></span><span style=display:flex><span><span style=color:#75715e>    */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Scanln</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>name</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>age</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>/*
</span></span></span><span style=display:flex><span><span style=color:#75715e>        和fmt.Scanln功能类似，fmt.Scanf也是一个阻塞的函数，如果它获取不到数据就会一直阻塞哟。
</span></span></span><span style=display:flex><span><span style=color:#75715e>        其实fmt.Scanln和fmt.Scanf可都以接收多个参数，用户输入参数默认使用空格分割输入设备传入的参数，遇到回车换行符就结束接收参数
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>        唯一区别就是可以格式化用户输入的数据类型,如下所示:
</span></span></span><span style=display:flex><span><span style=color:#75715e>            %s: 表示接收的参数会被转换成一个字符串类型，赋值给变量
</span></span></span><span style=display:flex><span><span style=color:#75715e>            %d: 表示接收的参数会被转换成一个整形类型，赋值给变量
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>        生产环境中使用fmt.Scanln和fmt.Scanf的情况相对较少，一般使用fmt.Scan的情况较多~
</span></span></span><span style=display:flex><span><span style=color:#75715e>    */</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Scanf</span>(<span style=color:#e6db74>&#34;%s%d&#34;</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>name</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>method_if</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>reader</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bufio</span>.<span style=color:#a6e22e>NewReader</span>(<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stdin</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>str</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>reader</span>.<span style=color:#a6e22e>ReadString</span>(<span style=color:#e6db74>&#39;\n&#39;</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;输入的值是:%s\n&#34;</span>, <span style=color:#a6e22e>str</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=声明变量>声明变量<a href=#声明变量 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>基本类型,声明变量,不赋值,就有默认值</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 基本类型有默认值</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>age</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>age</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>code</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>code</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>sex</span> <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>sex</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>一次性声明不同类型的变量</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>age</span>, <span style=color:#a6e22e>name</span> = <span style=color:#ae81ff>10</span>, <span style=color:#e6db74>&#34;anthony&#34;</span>
</span></span><span style=display:flex><span>	println(<span style=color:#e6db74>&#34;可以声明不同类型,只能自动推导,不能定义类型:&#34;</span>, <span style=color:#a6e22e>age</span>, <span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 报错,多变量赋值值,不能声明类型</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// var age2 int,name2 string = 10, &#34;anthony&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// println(age2,name2)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>method6</span>() {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>age</span>  <span style=color:#66d9ef>int</span>    = <span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span> = <span style=color:#e6db74>&#34;anthony&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>sex</span>  <span style=color:#66d9ef>bool</span>
</span></span><span style=display:flex><span> )
</span></span><span style=display:flex><span> println(<span style=color:#e6db74>&#34;使用集合的方式声明变量,可以声明不同类型,并且可以赋值&#34;</span>, <span style=color:#a6e22e>age</span>, <span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>sex</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>先声明,后赋值</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#75715e>// 定义变量</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>i</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 给i赋值</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>i</span>=<span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 使用变量</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;i=&#34;</span>, <span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>类型推导</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>method2</span>() {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;anthony&#34;</span>
</span></span><span style=display:flex><span> print(<span style=color:#e6db74>&#34;类型推导:&#34;</span>, <span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=常量>常量<a href=#常量 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>常量是一个简单值的标识符，在程序运行时，不会被修改的量</p><p>出于习惯,常量用大写,不过小写也没有问题</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 常量的格式定义</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>identifier</span> [<span style=color:#66d9ef>type</span>] = <span style=color:#a6e22e>value</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 显式类型定义</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>A</span> <span style=color:#66d9ef>string</span> = <span style=color:#e6db74>&#34;abc&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 隐式类型定义</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>B</span> = <span style=color:#e6db74>&#34;abc&#34;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 多个相同类型的声明可以简写为</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>C</span>,<span style=color:#a6e22e>D</span> = <span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 多个不同类型的声明可以简写为</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>E</span>, <span style=color:#a6e22e>F</span>, <span style=color:#a6e22e>G</span> = <span style=color:#ae81ff>1</span>, <span style=color:#66d9ef>false</span>, <span style=color:#e6db74>&#34;str&#34;</span>
</span></span></code></pre></div><h3 id=常量用作枚举>常量用作枚举<a href=#常量用作枚举 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>常量可以作为枚举，常量组</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>const</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>RED</span>   = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>BLACK</span> = <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>WHITE</span> = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span> )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>const</span> (
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>x</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>16</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>y</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>s</span> = <span style=color:#e6db74>&#34;abc&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>z</span>
</span></span><span style=display:flex><span> )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>RED</span>, <span style=color:#a6e22e>BLACK</span>, <span style=color:#a6e22e>WHITE</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;常量组中如不指定类型和初始化值，则与上一行非空常量右值相同:&#34;</span>, <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>s</span>, <span style=color:#a6e22e>z</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=特殊常量iota>特殊常量:iota<a href=#特殊常量iota class=hanchor arialabel=Anchor>&#8983;</a></h3><p>iota，特殊常量，可以认为是一个可以被编译器修改的常量</p><ol><li>如果中断iota自增，则必须显式恢复。且后续自增值按行序递增</li><li>自增默认是int类型，可以自行进行显示指定类型</li><li>数字常量不会分配存储空间，无须像变量那样通过内存寻址来取值，因此无法获取地址</li></ol><pre tabindex=0><code>func demo() {
 // 报错
 //a = iota

 const (
  a = iota //0
  b        //1
  c        //2
  d = &#34;ha&#34; //独立值，iota += 1
  e        //&#34;ha&#34;   iota += 1
  f = 100  //iota +=1
  g        //100  iota +=1
  h = iota //7,恢复计数
  i        //8
 )
 fmt.Println(a, b, c, d, e, f, g, h, i)
}
</code></pre><h2 id=字符串>字符串<a href=#字符串 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>name</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;Hello World&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>index</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span>  <span style=color:#a6e22e>name</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;遍历字符串:%v,%v\n&#34;</span>,<span style=color:#a6e22e>index</span>,<span style=color:#a6e22e>name</span>[<span style=color:#a6e22e>index</span>])
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 字符串长度</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(len(<span style=color:#a6e22e>name</span>[<span style=color:#a6e22e>index</span>]))
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=字符串切片>字符串切片<a href=#字符串切片 class=hanchor arialabel=Anchor>&#8983;</a></h3><pre tabindex=0><code>var response = &#34;var r = [[\&#34;000001\&#34;,\&#34;HXCZHH\&#34;,\&#34;华夏成长混合\&#34;,\&#34;混合型-偏股\&#34;,\&#34;HUAXIACHENGZHANGHUNHE\&#34;]];&#34;
fmt.Println(response[8:len(response)-1])

// 打印
[[&#34;000001&#34;,&#34;HXCZHH&#34;,&#34;华夏成长混合&#34;,&#34;混合型-偏股&#34;,&#34;HUAXIACHENGZHANGHUNHE&#34;]]
</code></pre><h3 id=字符串数组转一维数组>字符串数组转一维数组<a href=#字符串数组转一维数组 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>response</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;[1,2,3]&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>arr</span> []<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Unmarshal</span>([]byte(<span style=color:#a6e22e>response</span>), <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>arr</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Error:&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 第1行;数据是:1</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 第2行;数据是:2</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 第3行;数据是:3</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>:=</span><span style=color:#ae81ff>0</span> ;<span style=color:#a6e22e>i</span>&lt; len(<span style=color:#a6e22e>arr</span>);<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;第%v行;数据是:%v\n&#34;</span>,<span style=color:#a6e22e>i</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>,<span style=color:#a6e22e>arr</span>[<span style=color:#a6e22e>i</span>])
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=字符串数组转二维数组>字符串数组转二维数组<a href=#字符串数组转二维数组 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>response</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;[[1,2,3],[2,3,4]]&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>arr</span> [][]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>json</span>.<span style=color:#a6e22e>Unmarshal</span>([]byte(<span style=color:#a6e22e>response</span>), <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>arr</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Error:&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 第1行;数据是:[1 2 3]</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 第2行;数据是:[2 3 4]</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>:=</span><span style=color:#ae81ff>0</span> ;<span style=color:#a6e22e>i</span>&lt; len(<span style=color:#a6e22e>arr</span>);<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;第%v行;数据是:%v\n&#34;</span>,<span style=color:#a6e22e>i</span><span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>,<span style=color:#a6e22e>arr</span>[<span style=color:#a6e22e>i</span>])
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=字符串和数字互转>字符串和数字互转<a href=#字符串和数字互转 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>string转成int</span><span style=color:#960050;background-color:#1e0010>：</span><span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Atoi</span>(<span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>string转成int64</span><span style=color:#960050;background-color:#1e0010>：</span><span style=color:#66d9ef>int64</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>ParseInt</span>(<span style=color:#66d9ef>string</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>64</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>int转成string</span><span style=color:#960050;background-color:#1e0010>：</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>Itoa</span>(<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>int64转成string</span><span style=color:#960050;background-color:#1e0010>：</span><span style=color:#66d9ef>string</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>strconv</span>.<span style=color:#a6e22e>FormatInt</span>(<span style=color:#66d9ef>int64</span>,<span style=color:#ae81ff>10</span>)
</span></span></code></pre></div><h2 id=type关键字>type关键字<a href=#type关键字 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 类型转换</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>one</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>17</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>mean</span> <span style=color:#f92672>:=</span> float32(<span style=color:#a6e22e>one</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>mean</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 字符串不能强转整型</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=流程控制>流程控制<a href=#流程控制 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// if</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>method_if</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	 <span style=color:#a6e22e>reader</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bufio</span>.<span style=color:#a6e22e>NewReader</span>(<span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stdin</span>)
</span></span><span style=display:flex><span>	 <span style=color:#a6e22e>str</span>, <span style=color:#a6e22e>_</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>reader</span>.<span style=color:#a6e22e>ReadString</span>(<span style=color:#e6db74>&#39;\n&#39;</span>)
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	 <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>str</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;&#34;</span> {
</span></span><span style=display:flex><span>	  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;空的&#34;</span>)
</span></span><span style=display:flex><span>	 }
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>	 <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;输入的值是:%s\n&#34;</span>, <span style=color:#a6e22e>str</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// if-ik</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>data</span> = make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#34;a&#34;</span>] = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#34;b&#34;</span>] = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#34;c&#34;</span>] = <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 遍历</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>data</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>data</span>[<span style=color:#e6db74>&#34;a&#34;</span>]; <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>		<span style=color:#75715e>//存在</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;存在&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// if-else</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>method_if2</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>num</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>num</span><span style=color:#f92672>%</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> { <span style=color:#75715e>//checks if number is even</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>num</span>, <span style=color:#e6db74>&#34;is even&#34;</span>)
</span></span><span style=display:flex><span> } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>num</span>, <span style=color:#e6db74>&#34;is odd&#34;</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// switch</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>method_switch</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>num</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>result</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>switch</span> <span style=color:#a6e22e>num</span> {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>, <span style=color:#ae81ff>4</span>:
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span> = <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>default</span>:
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>result</span> = <span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>result</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// for  开始012345678910结束</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>demo</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;开始&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;结束&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// break 开始01234结束</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>demo_break</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;开始&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span> {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#e6db74>&#34;结束&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// coutinue   1 3 5 7 9</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>demo_continue</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>1</span>; <span style=color:#a6e22e>i</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>10</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>%</span><span style=color:#ae81ff>2</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;%d &#34;</span>, <span style=color:#a6e22e>i</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// go-to</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// go</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 会打印两次 ===</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>demo_goto</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>/* 定义局部变量 */</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>/* 循环 */</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>LOOP</span>:
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;===&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>a</span> &lt; <span style=color:#ae81ff>10</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>5</span> {
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 跳过迭代 */</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>a</span> = <span style=color:#a6e22e>a</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>goto</span> <span style=color:#a6e22e>LOOP</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;a的值为 : %d\n&#34;</span>, <span style=color:#a6e22e>a</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>a</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><pre tabindex=0><code></code></pre><h2 id=值传递和引用传递>值传递和引用传递<a href=#值传递和引用传递 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>程序中使用的是值传递, 所以两个值并没有实现交互</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 定义局部变量 */</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换前 a 的值为 : %d\n&#34;</span>, <span style=color:#a6e22e>a</span> )
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换前 b 的值为 : %d\n&#34;</span>, <span style=color:#a6e22e>b</span> )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 通过调用函数来交换值 */</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>swap</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换后 a 的值 : %d\n&#34;</span>, <span style=color:#a6e22e>a</span> )
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换后 b 的值 : %d\n&#34;</span>, <span style=color:#a6e22e>b</span> )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* 定义相互交换值的函数 */</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swap</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>temp</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>temp</span> = <span style=color:#a6e22e>x</span> <span style=color:#75715e>/* 保存 x 的值 */</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>x</span> = <span style=color:#a6e22e>y</span>    <span style=color:#75715e>/* 将 y 值赋给 x */</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>y</span> = <span style=color:#a6e22e>temp</span> <span style=color:#75715e>/* 将 temp 值赋给 y*/</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>temp</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//交换前 a 的值为 : 100</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//交换前 b 的值为 : 200</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//交换后 a 的值 : 100</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//交换后 b 的值 : 200</span>
</span></span></code></pre></div><p>引用传递</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 定义局部变量 */</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>= <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换前，a 的值 : %d\n&#34;</span>, <span style=color:#a6e22e>a</span> )
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换前，b 的值 : %d\n&#34;</span>, <span style=color:#a6e22e>b</span> )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 调用 swap() 函数
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * &amp;a 指向 a 指针，a 变量的地址
</span></span></span><span style=display:flex><span><span style=color:#75715e>   * &amp;b 指向 b 指针，b 变量的地址
</span></span></span><span style=display:flex><span><span style=color:#75715e>   */</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>swap</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>a</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>b</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换后，a 的值 : %d\n&#34;</span>, <span style=color:#a6e22e>a</span> )
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换后，b 的值 : %d\n&#34;</span>, <span style=color:#a6e22e>b</span> )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swap</span>(<span style=color:#a6e22e>x</span> <span style=color:#f92672>*</span><span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span><span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>temp</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>temp</span> = <span style=color:#f92672>*</span><span style=color:#a6e22e>x</span>    <span style=color:#75715e>/* 保存 x 地址上的值 */</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>*</span><span style=color:#a6e22e>x</span> = <span style=color:#f92672>*</span><span style=color:#a6e22e>y</span>      <span style=color:#75715e>/* 将 y 值赋给 x */</span>
</span></span><span style=display:flex><span>   <span style=color:#f92672>*</span><span style=color:#a6e22e>y</span> = <span style=color:#a6e22e>temp</span>    <span style=color:#75715e>/* 将 temp 值赋给 y */</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>//交换前，a 的值 : 100</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//交换前，b 的值 : 200</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//交换后，a 的值 : 200</span>
</span></span><span style=display:flex><span><span style=color:#75715e>//交换后，b 的值 : 100</span>
</span></span></code></pre></div><h2 id=变量作用域>变量作用域<a href=#变量作用域 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 全局变量</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>global</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 局部变量</span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span>,<span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span> =<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;打印全局变变量:%v\n&#34;</span>, <span style=color:#a6e22e>global</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>global</span> = <span style=color:#a6e22e>a</span><span style=color:#f92672>+</span> <span style=color:#a6e22e>b</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;打印全局变变量:%v\n&#34;</span>, <span style=color:#a6e22e>global</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>global</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;打印全局变变量:%v\n&#34;</span>, <span style=color:#a6e22e>global</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>匿名代码块</p><p>匿名代码块被用来定义一个局部变量 <code>message</code>，该变量仅在代码块内部可见。一旦离开代码块，变量 <code>message</code> 就不再可见，任何尝试在代码块外部访问它都会导致编译错误。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;在main函数外部&#34;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 进入匿名代码块</span>
</span></span><span style=display:flex><span>	{
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;在匿名代码块内部&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 定义一个局部变量，仅在代码块内可见</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>message</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;这是一个局部变量&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>message</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// message 变量在代码块外不可见</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// fmt.Println(message)  // 这会导致编译错误</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;在main函数外部&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=数组和切片>数组和切片<a href=#数组和切片 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>数组</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>get</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>list</span> <span style=color:#f92672>:=</span> [<span style=color:#ae81ff>5</span>]<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span><span style=color:#f92672>:=</span><span style=color:#ae81ff>0</span>;<span style=color:#a6e22e>i</span>&lt; len(<span style=color:#a6e22e>list</span>);<span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>i</span>, <span style=color:#e6db74>&#34;==&#34;</span>, <span style=color:#a6e22e>list</span>[<span style=color:#a6e22e>i</span>])
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>v</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>my</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>k</span>, <span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>create</span>(){
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>numbers</span> []<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;新建个空数组:&#34;</span>,<span style=color:#a6e22e>numbers</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>defaultcount</span> [<span style=color:#ae81ff>4</span>]<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;新建个指定长度的数组:&#34;</span>,<span style=color:#a6e22e>defaultcount</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>balance</span> =  []<span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>}
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;新建个不指定长度的数组:&#34;</span>,<span style=color:#a6e22e>balance</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 根据元素的个数，设置数组的大小</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>d</span> <span style=color:#f92672>:=</span> [<span style=color:#f92672>...</span>] <span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>1</span>,<span style=color:#ae81ff>2</span>,<span style=color:#ae81ff>3</span>,<span style=color:#ae81ff>4</span>,<span style=color:#ae81ff>5</span>}
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;新建个指定位置的数组:&#34;</span>,<span style=color:#a6e22e>d</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 指定位置</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> [<span style=color:#ae81ff>5</span>] <span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>4</span>: <span style=color:#ae81ff>100</span>} <span style=color:#75715e>// [0 0 0 0 100]</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;新建个指定位置的数组:&#34;</span>,<span style=color:#a6e22e>e</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 指定位置</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>f</span> <span style=color:#f92672>:=</span> [<span style=color:#f92672>...</span>] <span style=color:#66d9ef>int</span>{<span style=color:#ae81ff>0</span>: <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>4</span>: <span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>9</span>: <span style=color:#ae81ff>1</span>} <span style=color:#75715e>// [1 0 0 0 1 0 0 0 0 1]</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;新建个指定位置的数组:&#34;</span>,<span style=color:#a6e22e>f</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>切片</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>define</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>identifier</span> []<span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;空数组&#34;</span>, <span style=color:#a6e22e>identifier</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>slice1</span> []<span style=color:#66d9ef>int</span> = make([]<span style=color:#66d9ef>int</span>, <span style=color:#ae81ff>10</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;切片&#34;</span>, <span style=color:#a6e22e>slice1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>i0</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>slice1</span>[<span style=color:#ae81ff>0</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>i1</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>slice1</span>[<span style=color:#ae81ff>1</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>i2</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>slice1</span>[<span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>i3</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>slice1</span>[<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;通过索引,获取值&#34;</span>, <span style=color:#a6e22e>i0</span>, <span style=color:#a6e22e>i1</span>, <span style=color:#a6e22e>i2</span>, <span style=color:#a6e22e>i3</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 修改切片</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; len(<span style=color:#a6e22e>slice1</span>); <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>slice1</span>[<span style=color:#a6e22e>i</span>] = <span style=color:#a6e22e>i</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;修改完切片::&#34;</span>, <span style=color:#a6e22e>slice1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;获取切片区间1:&#34;</span>, <span style=color:#a6e22e>slice1</span>[<span style=color:#ae81ff>0</span>:<span style=color:#ae81ff>2</span>])
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;获取切片区间2:&#34;</span>, <span style=color:#a6e22e>slice1</span>[<span style=color:#ae81ff>5</span>:])
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;获取切片区间3:&#34;</span>, <span style=color:#a6e22e>slice1</span>[:<span style=color:#ae81ff>5</span>])
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>slice1</span> = append(<span style=color:#a6e22e>slice1</span>, <span style=color:#ae81ff>10</span>, <span style=color:#ae81ff>11</span>, <span style=color:#ae81ff>12</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;追加完切片::&#34;</span>, <span style=color:#a6e22e>slice1</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>slice2</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>int</span>, len(<span style=color:#a6e22e>slice1</span>), cap(<span style=color:#a6e22e>slice1</span>)<span style=color:#f92672>*</span><span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;创建个容量是原来容量两位的数组:&#34;</span>, <span style=color:#a6e22e>slice2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>number</span> <span style=color:#f92672>:=</span> copy(<span style=color:#a6e22e>slice2</span>, <span style=color:#a6e22e>slice1</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;slice:%v,slice2:%v,number:%v:&#34;</span>, <span style=color:#a6e22e>slice1</span>, <span style=color:#a6e22e>slice2</span>, <span style=color:#a6e22e>number</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=map>Map<a href=#map class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>keyvale</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>keyvale</span>[<span style=color:#e6db74>&#34;k1&#34;</span>] = <span style=color:#e6db74>&#34;v1&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>keyvale</span>[<span style=color:#e6db74>&#34;k2&#34;</span>] = <span style=color:#e6db74>&#34;v2&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>keyvale</span>[<span style=color:#e6db74>&#34;k3&#34;</span>] = <span style=color:#e6db74>&#34;v3&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>keyvale</span>[<span style=color:#e6db74>&#34;k4&#34;</span>] = <span style=color:#e6db74>&#34;v4&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 循环遍历</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>keyvale</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;循环遍历:&#34;</span>, <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>keyvale</span>[<span style=color:#a6e22e>key</span>])
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 删除元素</span>
</span></span><span style=display:flex><span>	delete(<span style=color:#a6e22e>keyvale</span>, <span style=color:#e6db74>&#34;k1&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>key</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>keyvale</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;删除值之后,循环遍历:&#34;</span>, <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>keyvale</span>[<span style=color:#a6e22e>key</span>])
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 查看元素是否存在</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>keyvale</span>[<span style=color:#e6db74>&#34;United States&#34;</span>]
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>ok</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;存在\n&#34;</span>)
</span></span><span style=display:flex><span>	} <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;不存在\n&#34;</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 但是当key如果不存在的时候，我们会得到该value值类型的默认值，比如string类型得到空字符串，int类型得到0。但是程序不会报错</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>m</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;a&#34;</span>] = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>ok</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>m</span>[<span style=color:#e6db74>&#34;b&#34;</span>]
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;key不存在时,会有默认值&#34;</span>, <span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>ok</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// map长度</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;map长度&#34;</span>, len(<span style=color:#a6e22e>m</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// map是引用类型</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>mymap</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>int</span>{
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;steven&#34;</span>:  <span style=color:#ae81ff>12000</span>,
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;anthony&#34;</span>: <span style=color:#ae81ff>15000</span>,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>mymap</span>[<span style=color:#e6db74>&#34;mike&#34;</span>] = <span style=color:#ae81ff>9000</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;原来的数据:%v\n&#34;</span>, <span style=color:#a6e22e>mymap</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>newmymap</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>mymap</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>newmymap</span>[<span style=color:#e6db74>&#34;anthony&#34;</span>] = <span style=color:#ae81ff>50000</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;改变后,原来的数据:%v\n&#34;</span>, <span style=color:#a6e22e>mymap</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;改变后,新的的数据:%v\n&#34;</span>, <span style=color:#a6e22e>newmymap</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=函数>函数<a href=#函数 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 函数返回两个数的最大值</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> max(<span style=color:#a6e22e>num1</span>, <span style=color:#a6e22e>num2</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span> {
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 声明局部变量 */</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>result</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>num1</span> &gt; <span style=color:#a6e22e>num2</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>result</span> = <span style=color:#a6e22e>num1</span>
</span></span><span style=display:flex><span>   } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>result</span> = <span style=color:#a6e22e>num2</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>result</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 函数调用</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 定义局部变量 */</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>ret</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 调用函数并返回最大值 */</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>ret</span> = max(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>( <span style=color:#e6db74>&#34;最大值是 : %d\n&#34;</span>, <span style=color:#a6e22e>ret</span> )
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=函数返回多个值>函数返回多个值<a href=#函数返回多个值 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 入参多个值,x和y 都是字符串</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 返回值是多个,都是字符串</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swap</span>(<span style=color:#a6e22e>x</span>, <span style=color:#a6e22e>y</span> <span style=color:#66d9ef>string</span>) (<span style=color:#66d9ef>string</span>, <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>y</span>, <span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>swap</span>(<span style=color:#e6db74>&#34;Google&#34;</span>, <span style=color:#e6db74>&#34;Runoob&#34;</span>)
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>a</span>, <span style=color:#a6e22e>b</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=函数返回值的命名>函数返回值的命名<a href=#函数返回值的命名 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>studen</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>age</span>  <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>test4</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>stu</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>test4_return</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>stu</span>.<span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>test4_return</span>() (<span style=color:#a6e22e>stu</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>studen</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>stu</span> = <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>studen</span>{
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;anthony&#34;</span>,
</span></span><span style=display:flex><span>		<span style=color:#ae81ff>13</span>,
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=函数作为实参>函数作为实参<a href=#函数作为实参 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>fb</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>x</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>myfunc</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>x</span> <span style=color:#66d9ef>int</span>) <span style=color:#66d9ef>int</span>{
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>   }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 知识点1</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>myfunc</span>(<span style=color:#ae81ff>3</span>))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 知识点2</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>demo</span>(<span style=color:#ae81ff>2</span>, <span style=color:#a6e22e>myfunc</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 函数作为参数传递，实现回调</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>demo</span>(<span style=color:#a6e22e>x</span> <span style=color:#66d9ef>int</span>,<span style=color:#a6e22e>myfb</span> <span style=color:#a6e22e>fb</span>)  {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>myfb</span>(<span style=color:#a6e22e>x</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=函数作为实参-回调>函数作为实参-回调<a href=#函数作为实参-回调 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>test2</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>test2</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>group</span>(<span style=color:#e6db74>&#34;/system1&#34;</span>, <span style=color:#a6e22e>myfunc</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>group</span>(<span style=color:#e6db74>&#34;/system2&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>path2</span> <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;回调Path:%v \n&#34;</span>, <span style=color:#a6e22e>path2</span>)
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>group</span>(<span style=color:#a6e22e>path</span> <span style=color:#66d9ef>string</span>, <span style=color:#a6e22e>group</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>path2</span> <span style=color:#66d9ef>string</span>)) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;手动实现 \n&#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>path</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>group</span>(<span style=color:#a6e22e>path</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>myfunc</span>(<span style=color:#a6e22e>path2</span> <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;回调Path:%v \n&#34;</span>, <span style=color:#a6e22e>path2</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=函数作为参数-interface>函数作为参数-interface<a href=#函数作为参数-interface class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>test3</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>test3_object</span>(<span style=color:#a6e22e>myfunc</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>test3_object</span>(<span style=color:#a6e22e>object</span> <span style=color:#66d9ef>interface</span>{}) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>a</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>object</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;什么鬼:%v&#34;</span>, <span style=color:#a6e22e>a</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=指针>指针<a href=#指针 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><img src=https://image.runtimes.cc/202404051522806.png alt></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span>= <span style=color:#ae81ff>20</span>   <span style=color:#75715e>/* 声明实际变量 */</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>ip</span> <span style=color:#f92672>*</span><span style=color:#66d9ef>int</span>        <span style=color:#75715e>/* 声明指针变量 */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>ip</span> = <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>a</span>  <span style=color:#75715e>/* 指针变量的存储地址 */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;a 变量的地址是: %x\n&#34;</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>a</span>  )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 指针变量的存储地址 */</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;ip 变量储存的指针地址: %x\n&#34;</span>, <span style=color:#a6e22e>ip</span> )
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#75715e>/* 使用指针访问值 */</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;*ip 变量的值: %d\n&#34;</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>ip</span> )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 函数使用指针</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* 定义局部变量 */</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span> = <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>= <span style=color:#ae81ff>200</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>swap</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>a</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>b</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换后 a 的值 : %d\n&#34;</span>, <span style=color:#a6e22e>a</span> )
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;交换后 b 的值 : %d\n&#34;</span>, <span style=color:#a6e22e>b</span> )
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/* 交换函数这样写更加简洁，也是 go 语言的特性，可以用下，c++ 和 c# 是不能这么干的 */</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>swap</span>(<span style=color:#a6e22e>x</span> <span style=color:#f92672>*</span><span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>y</span> <span style=color:#f92672>*</span><span style=color:#66d9ef>int</span>){
</span></span><span style=display:flex><span>    <span style=color:#f92672>*</span><span style=color:#a6e22e>x</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>y</span> = <span style=color:#f92672>*</span><span style=color:#a6e22e>y</span>, <span style=color:#f92672>*</span><span style=color:#a6e22e>x</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=结构体>结构体<a href=#结构体 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 返回的是该实例的结构类型</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>s</span> <span style=color:#a6e22e>people</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>s</span>.<span style=color:#a6e22e>age</span> = <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>s</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 第二第三种，返回的是一个指向这个结构类型的一个指针，是地址</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ming</span> <span style=color:#f92672>:=</span> new(<span style=color:#a6e22e>people</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ming</span>.<span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;xiao ming&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ming</span>.<span style=color:#a6e22e>age</span> = <span style=color:#ae81ff>18</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>ming</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ming2</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>people</span>{<span style=color:#e6db74>&#34;xiao ming&#34;</span>, <span style=color:#ae81ff>18</span>}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>ming2</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>第二第三种返回指针的声明形式，在我们需要修改他的值的时候，其实应该使用的方式是:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>ming</span>).<span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;xiao wang&#34;</span>
</span></span></code></pre></div><p>也就是说，对于指针类型的数值，应该要先用<code>*</code>取值，然后再修改。</p><p>但是，在Golang中，可以省略这一步骤，直接使用<code>ming.name = "xiao wang"</code>。</p><h3 id=方法>方法<a href=#方法 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Vertex</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>X</span>, <span style=color:#a6e22e>Y</span> <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>v</span> <span style=color:#a6e22e>Vertex</span>) <span style=color:#a6e22e>test1</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>v</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Vertex</span>) <span style=color:#a6e22e>test2</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span><span style=color:#f92672>++</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v1</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Vertex</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v2</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Vertex</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v1</span>.<span style=color:#a6e22e>test1</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v2</span>.<span style=color:#a6e22e>test2</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// {1 1}</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>v1</span>)
</span></span><span style=display:flex><span>	<span style=color:#75715e>// &amp;{2 2}</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>v2</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>test1</code>和<code>test2</code>，他们唯一的区别就是方法名前面的接收者不同，一个是指针类型的，一个是值类型的。</p><h3 id=测试>测试<a href=#测试 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Vertex</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>X</span>, <span style=color:#a6e22e>Y</span> <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>v</span> <span style=color:#a6e22e>Vertex</span>) <span style=color:#a6e22e>test1</span>(){
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 自己定义的v1内存地址为：0xc00000a0e0</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;在方法中的v的地址为：%p\n&#34;</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span><span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span><span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>()  {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v1</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Vertex</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>}
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 在方法中的v的地址为：0xc00000a100</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;自己定义的v1内存地址为：%p\n&#34;</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>v1</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v1</span>.<span style=color:#a6e22e>test1</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Vertex</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>X</span>, <span style=color:#a6e22e>Y</span> <span style=color:#66d9ef>float64</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>v</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Vertex</span>) <span style=color:#a6e22e>test2</span>(){
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 自己定义的v1内存地址为：0xc00000a0e0</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;在方法中的v的地址为：%p\n&#34;</span>, <span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>X</span><span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v</span>.<span style=color:#a6e22e>Y</span><span style=color:#f92672>++</span>;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>()  {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v1</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Vertex</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>1</span>}
</span></span><span style=display:flex><span>	<span style=color:#75715e>// </span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;自己定义的v1内存地址为：%p\n&#34;</span>, <span style=color:#a6e22e>v1</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>v1</span>.<span style=color:#a6e22e>test2</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Books</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>title</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>author</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>subject</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>book_id</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Library</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span> <span style=color:#75715e>// 匿名字段，那么默认Student就包含了Human的所有字段</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>Books</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>address</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>book</span> <span style=color:#a6e22e>Books</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>book</span>.<span style=color:#a6e22e>title</span> = <span style=color:#e6db74>&#34;Go 语言&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>book</span>.<span style=color:#a6e22e>author</span> = <span style=color:#e6db74>&#34;www.runoob.com&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>book</span>.<span style=color:#a6e22e>subject</span> = <span style=color:#e6db74>&#34;Go 语言教程&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>book</span>.<span style=color:#a6e22e>book_id</span> = <span style=color:#ae81ff>6495407</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 初始化一个图书馆</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>mark</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Library</span>{<span style=color:#a6e22e>Books</span>{<span style=color:#e6db74>&#34;Go 语言&#34;</span>,<span style=color:#e6db74>&#34;www.runoob.com&#34;</span>,<span style=color:#e6db74>&#34;Go 语言教程&#34;</span>,<span style=color:#ae81ff>6495407</span>},<span style=color:#e6db74>&#34;广东&#34;</span>}
</span></span><span style=display:flex><span> <span style=color:#75715e>// 我们访问相应的字段</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;His name is &#34;</span>, <span style=color:#a6e22e>mark</span>.<span style=color:#a6e22e>title</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;His age is &#34;</span>, <span style=color:#a6e22e>mark</span>.<span style=color:#a6e22e>author</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;His weight is &#34;</span>, <span style=color:#a6e22e>mark</span>.<span style=color:#a6e22e>subject</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;His speciality is &#34;</span>, <span style=color:#a6e22e>mark</span>.<span style=color:#a6e22e>address</span>)
</span></span><span style=display:flex><span> <span style=color:#75715e>// 修改对应的备注信息</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>mark</span>.<span style=color:#a6e22e>title</span> = <span style=color:#e6db74>&#34;AI&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Mark changed his speciality&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;His speciality is &#34;</span>, <span style=color:#a6e22e>mark</span>.<span style=color:#a6e22e>title</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=面向对象>面向对象<a href=#面向对象 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 定义接口</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>PersonMethod</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>show</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 定义结构体</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Person</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>age</span>  <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 对象成员方法</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>person</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Person</span>) <span style=color:#a6e22e>setAge</span>(<span style=color:#a6e22e>age</span> <span style=color:#66d9ef>int</span>) {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>person</span>.<span style=color:#a6e22e>age</span> = <span style=color:#a6e22e>age</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 对象成员方法实现接口</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>person</span> <span style=color:#a6e22e>Person</span>) <span style=color:#a6e22e>show</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Person类打印SHOW:%v\n&#34;</span>, <span style=color:#a6e22e>person</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 多态</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>show2</span>(<span style=color:#a6e22e>person</span> <span style=color:#a6e22e>PersonMethod</span>) {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>person</span>.<span style=color:#a6e22e>show</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 学生类,继承Person类</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Student</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span> <span style=color:#75715e>// 匿名,相当于继承</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>Person</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>level</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>student</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>Student</span>) <span style=color:#a6e22e>show</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Student类打印SHOW:%v\n&#34;</span>, <span style=color:#a6e22e>student</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 老师类,继承Person类</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Teacher</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>Person</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>price</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>teacher</span> <span style=color:#a6e22e>Teacher</span>) <span style=color:#a6e22e>show</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;Teacher类打印SHOW:%v\n&#34;</span>, <span style=color:#a6e22e>teacher</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>anthony</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Person</span>{<span style=color:#e6db74>&#34;anthony&#34;</span>, <span style=color:#ae81ff>25</span>}
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;anthony信息:%v\n&#34;</span>, <span style=color:#a6e22e>anthony</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 调用成员方法</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>anthony</span>.<span style=color:#a6e22e>setAge</span>(<span style=color:#ae81ff>12</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;anthony信息:%v\n&#34;</span>, <span style=color:#a6e22e>anthony</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>anthony2</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Person</span>{}
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;anthony2信息:%v\n&#34;</span>, <span style=color:#a6e22e>anthony2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>anthony2</span>.<span style=color:#a6e22e>age</span> = <span style=color:#ae81ff>26</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>anthony2</span>.<span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;anthony2&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;anthony2信息:%v\n&#34;</span>, <span style=color:#a6e22e>anthony2</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 学生,继承</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>student</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Student</span>{}
</span></span><span style=display:flex><span> <span style=color:#a6e22e>student</span>.<span style=color:#a6e22e>level</span> = <span style=color:#e6db74>&#34;小学生&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>student</span>.<span style=color:#a6e22e>name</span> = <span style=color:#e6db74>&#34;anthony&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>student</span>.<span style=color:#a6e22e>age</span> = <span style=color:#ae81ff>23</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;学生继承类:%v\n&#34;</span>, <span style=color:#a6e22e>student</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 老师,继承</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>teacher</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Teacher</span>{<span style=color:#a6e22e>price</span>: <span style=color:#ae81ff>12</span>, <span style=color:#a6e22e>Person</span>: <span style=color:#a6e22e>Person</span>{<span style=color:#a6e22e>name</span>: <span style=color:#e6db74>&#34;li teacher&#34;</span>, <span style=color:#a6e22e>age</span>: <span style=color:#ae81ff>56</span>}}
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;老师继承类:%v\n&#34;</span>, <span style=color:#a6e22e>teacher</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>show2</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>student</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>show2</span>(<span style=color:#a6e22e>teacher</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>show2</span>(<span style=color:#a6e22e>anthony</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>创建对象的方式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 方式一：使用T{…}方式，结果为值类型</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Car</span>{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 方式二：使用new的方式，结果为指针类型</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>c1</span> <span style=color:#f92672>:=</span> new(<span style=color:#a6e22e>Car</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 方式三：使用&amp;方式，结果为指针类型</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>c2</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Car</span>{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 以下为创建并初始化</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>c3</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Car</span>{<span style=color:#e6db74>&#34;红色&#34;</span>, <span style=color:#e6db74>&#34;1.2L&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>c4</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Car</span>{<span style=color:#a6e22e>color</span>: <span style=color:#e6db74>&#34;红色&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>c5</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Car</span>{<span style=color:#a6e22e>color</span>: <span style=color:#e6db74>&#34;红色&#34;</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 没有构造函数的概念，对象的创建通常交由一个全局的创建函数来完成，以NewXXX 来命名，表示“构造函数” ：</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>NewCar</span>(<span style=color:#a6e22e>color</span>,<span style=color:#a6e22e>size</span> <span style=color:#66d9ef>string</span>)<span style=color:#f92672>*</span><span style=color:#a6e22e>Car</span>  {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Car</span>{<span style=color:#a6e22e>color</span>,<span style=color:#a6e22e>size</span>}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=接口>接口<a href=#接口 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Phone</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>call</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>NokiaPhone</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>nokiaPhone</span> <span style=color:#a6e22e>NokiaPhone</span>) <span style=color:#a6e22e>call</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;I am Nokia, I can call you!&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>IPhone</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>iPhone</span> <span style=color:#a6e22e>IPhone</span>) <span style=color:#a6e22e>call</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;I am iPhone, I can call you!&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>phone</span> <span style=color:#a6e22e>Phone</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>phone</span> = new(<span style=color:#a6e22e>NokiaPhone</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>phone</span>.<span style=color:#a6e22e>call</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>phone</span> = new(<span style=color:#a6e22e>IPhone</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>phone</span>.<span style=color:#a6e22e>call</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=错误处理>错误处理<a href=#错误处理 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 自定义错误信息结构</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>DivErr</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>etype</span> <span style=color:#66d9ef>int</span>  <span style=color:#75715e>// 错误类型</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>v1</span> <span style=color:#66d9ef>int</span>     <span style=color:#75715e>// 记录下出错时的除数、被除数</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>v2</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 实现接口方法 error.Error()</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>divErr</span> <span style=color:#a6e22e>DivErr</span>) <span style=color:#a6e22e>Error</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#ae81ff>0</span><span style=color:#f92672>==</span> <span style=color:#a6e22e>divErr</span>.<span style=color:#a6e22e>etype</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;除零错误&#34;</span>
</span></span><span style=display:flex><span> }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;其他未知错误&#34;</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 除法</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>div</span>(<span style=color:#a6e22e>a</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>b</span> <span style=color:#66d9ef>int</span>) (<span style=color:#66d9ef>int</span>,<span style=color:#f92672>*</span><span style=color:#a6e22e>DivErr</span>) {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 返回错误信息</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#ae81ff>0</span>,<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>DivErr</span>{<span style=color:#ae81ff>0</span>,<span style=color:#a6e22e>a</span>,<span style=color:#a6e22e>b</span>}
</span></span><span style=display:flex><span> } <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 返回正确的商</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>a</span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>b</span>, <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>// 正确调用</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>v</span>,<span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span><span style=color:#a6e22e>div</span>(<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>nil</span><span style=color:#f92672>!=</span><span style=color:#a6e22e>r</span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;(1)fail:&#34;</span>,<span style=color:#a6e22e>r</span>)
</span></span><span style=display:flex><span> }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;(1)succeed:&#34;</span>,<span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#75715e>// 错误调用</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>v</span>,<span style=color:#a6e22e>r</span> =<span style=color:#a6e22e>div</span>(<span style=color:#ae81ff>100</span>,<span style=color:#ae81ff>0</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#66d9ef>nil</span><span style=color:#f92672>!=</span><span style=color:#a6e22e>r</span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;(2)fail:&#34;</span>,<span style=color:#a6e22e>r</span>)
</span></span><span style=display:flex><span> }<span style=color:#66d9ef>else</span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;(2)succeed:&#34;</span>,<span style=color:#a6e22e>v</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=goroutine>GoRoutine<a href=#goroutine class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>say</span>(<span style=color:#e6db74>&#34;world&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>say</span>(<span style=color:#e6db74>&#34;hello&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>say</span>(<span style=color:#a6e22e>s</span> <span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>i</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>0</span>; <span style=color:#a6e22e>i</span> &lt; <span style=color:#ae81ff>5</span>; <span style=color:#a6e22e>i</span><span style=color:#f92672>++</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#ae81ff>100</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Millisecond</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>s</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=channel>Channel<a href=#channel class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>   
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>messages</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>chan</span> <span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() { <span style=color:#a6e22e>messages</span> <span style=color:#f92672>&lt;-</span> <span style=color:#e6db74>&#34;ping&#34;</span> }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>msg</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&lt;-</span><span style=color:#a6e22e>messages</span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>msg</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=包管理器>包管理器<a href=#包管理器 class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=modules>modules<a href=#modules class=hanchor arialabel=Anchor>&#8983;</a></h3><p>go mod常用命令</p><table><thead><tr><th>命令</th><th>说明</th></tr></thead><tbody><tr><td>download</td><td>download modules to local cache(下载依赖包)</td></tr><tr><td>edit</td><td>edit go.mod from tools or scripts（编辑go.mod</td></tr><tr><td>graph</td><td>print module requirement graph (打印模块依赖图)</td></tr><tr><td>init</td><td>initialize new module in current directory（在当前目录初始化mod）</td></tr><tr><td>tidy</td><td>add missing and remove unused modules(拉取缺少的模块，移除不用的模块)</td></tr><tr><td>vendor</td><td>make vendored copy of dependencies(将依赖复制到vendor下)</td></tr><tr><td>verify</td><td>verify dependencies have expected content (验证依赖是否正确）</td></tr><tr><td>why</td><td>explain why packages or modules are needed(解释为什么需要依赖)</td></tr></tbody></table><h3 id=示例一创建一个新项目>示例一：创建一个新项目<a href=#示例一创建一个新项目 class=hanchor arialabel=Anchor>&#8983;</a></h3><ol><li>在<code>GOPATH 目录之外</code>新建一个目录，并使用<code>go mod init</code> 初始化生成<code>go.mod</code> 文件</li></ol><p>go.mod文件一旦创建后，它的内容将会被go toolchain全面掌控。go toolchain会在各类命令执行时，比如go get、go build、go mod等修改和维护go.mod文件。</p><p>go.mod 提供了<code>module</code>, <code>require</code>、<code>replace</code>和<code>exclude</code> 四个命令</p><ul><li><code>module</code> 语句指定包的名字（路径）</li><li><code>require</code> 语句指定的依赖项模块</li><li><code>replace</code> 语句可以替换依赖项模块</li><li><code>exclude</code> 语句可以忽略依赖项模块</li></ul><ol><li>添加依赖</li></ol><p>新建一个 server.go 文件，写入以下代码：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;github.com/labstack/echo&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>echo</span>.<span style=color:#a6e22e>New</span>()
</span></span><span style=display:flex><span> <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#a6e22e>echo</span>.<span style=color:#a6e22e>Context</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;Hello, World!&#34;</span>)
</span></span><span style=display:flex><span> })
</span></span><span style=display:flex><span> <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Logger</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Start</span>(<span style=color:#e6db74>&#34;:1323&#34;</span>))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>执行 <code>go run server.go</code> 运行代码会发现 go mod 会自动查找依赖自动下载：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>run</span> <span style=color:#a6e22e>server</span>.<span style=color:#66d9ef>go</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span>: <span style=color:#a6e22e>finding</span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>echo</span> <span style=color:#a6e22e>v3</span><span style=color:#ae81ff>.3.10</span><span style=color:#f92672>+</span><span style=color:#a6e22e>incompatible</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span>: <span style=color:#a6e22e>downloading</span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>echo</span> <span style=color:#a6e22e>v3</span><span style=color:#ae81ff>.3.10</span><span style=color:#f92672>+</span><span style=color:#a6e22e>incompatible</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span>: <span style=color:#a6e22e>extracting</span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>echo</span> <span style=color:#a6e22e>v3</span><span style=color:#ae81ff>.3.10</span><span style=color:#f92672>+</span><span style=color:#a6e22e>incompatible</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span>: <span style=color:#a6e22e>finding</span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>gommon</span><span style=color:#f92672>/</span><span style=color:#a6e22e>color</span> <span style=color:#a6e22e>latest</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span>: <span style=color:#a6e22e>finding</span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>gommon</span><span style=color:#f92672>/</span><span style=color:#a6e22e>log</span> <span style=color:#a6e22e>latest</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span>: <span style=color:#a6e22e>finding</span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>gommon</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.2.8</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#a6e22e>此处省略很多行</span>
</span></span><span style=display:flex><span><span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>____</span>    <span style=color:#a6e22e>__</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>/</span> <span style=color:#a6e22e>__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>___</span><span style=color:#f92672>/</span> <span style=color:#f92672>/</span>  <span style=color:#a6e22e>___</span>
</span></span><span style=display:flex><span> <span style=color:#f92672>/</span> <span style=color:#a6e22e>_</span><span style=color:#75715e>// __/ _ \/ _ \</span>
</span></span><span style=display:flex><span><span style=color:#f92672>/</span><span style=color:#a6e22e>___</span><span style=color:#f92672>/</span><span style=color:#960050;background-color:#1e0010>\</span><span style=color:#a6e22e>__</span><span style=color:#f92672>/</span><span style=color:#a6e22e>_</span><span style=color:#75715e>//_/\___/ v3.3.10-dev</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>High</span> <span style=color:#a6e22e>performance</span>, <span style=color:#a6e22e>minimalist</span> <span style=color:#a6e22e>Go</span> <span style=color:#a6e22e>web</span> <span style=color:#a6e22e>framework</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>https</span>:<span style=color:#75715e>//echo.labstack.com</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>____________________________________O</span><span style=color:#f92672>/</span><span style=color:#a6e22e>_______</span>
</span></span><span style=display:flex><span>                                    <span style=color:#a6e22e>O</span>\
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>⇨</span> <span style=color:#a6e22e>http</span> <span style=color:#a6e22e>server</span> <span style=color:#a6e22e>started</span> <span style=color:#a6e22e>on</span> [::]:<span style=color:#ae81ff>1323</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>复制代码</span>
</span></span></code></pre></div><p>现在查看go.mod 内容：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> <span style=color:#a6e22e>cat</span> <span style=color:#66d9ef>go</span>.<span style=color:#a6e22e>mod</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>module</span> <span style=color:#a6e22e>hello</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>go</span> <span style=color:#ae81ff>1.12</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>require</span> (
</span></span><span style=display:flex><span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>echo</span> <span style=color:#a6e22e>v3</span><span style=color:#ae81ff>.3.10</span><span style=color:#f92672>+</span><span style=color:#a6e22e>incompatible</span> <span style=color:#75715e>// indirect</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>gommon</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.2.8</span> <span style=color:#75715e>// indirect</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>mattn</span><span style=color:#f92672>/</span><span style=color:#66d9ef>go</span><span style=color:#f92672>-</span><span style=color:#a6e22e>colorable</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.1.1</span> <span style=color:#75715e>// indirect</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>mattn</span><span style=color:#f92672>/</span><span style=color:#66d9ef>go</span><span style=color:#f92672>-</span><span style=color:#a6e22e>isatty</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.0.7</span> <span style=color:#75715e>// indirect</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>valyala</span><span style=color:#f92672>/</span><span style=color:#a6e22e>fasttemplate</span> <span style=color:#a6e22e>v1</span><span style=color:#ae81ff>.0.0</span> <span style=color:#75715e>// indirect</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>golang</span>.<span style=color:#a6e22e>org</span><span style=color:#f92672>/</span><span style=color:#a6e22e>x</span><span style=color:#f92672>/</span><span style=color:#a6e22e>crypto</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.0.0</span><span style=color:#f92672>-</span><span style=color:#ae81ff>20190313024323</span><span style=color:#f92672>-</span><span style=color:#a6e22e>a1f597ede03a</span> <span style=color:#75715e>// indirect</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>复制代码</span>
</span></span></code></pre></div><p>go module 安装 package 的原則是先拉最新的 release tag，若无tag则拉最新的commit，详见 <a href=https://github.com/golang/go/wiki/Modules>Modules官方介绍</a>。 go 会自动生成一个 go.sum 文件来记录 dependency tree：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> <span style=color:#a6e22e>cat</span> <span style=color:#66d9ef>go</span>.<span style=color:#a6e22e>sum</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>echo</span> <span style=color:#a6e22e>v3</span><span style=color:#ae81ff>.3.10</span><span style=color:#f92672>+</span><span style=color:#a6e22e>incompatible</span> <span style=color:#a6e22e>h1</span>:<span style=color:#a6e22e>pGRcYk231ExFAyoAjAfD85kQzRJCRI8bbnE7CX5OEgg</span>=
</span></span><span style=display:flex><span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>echo</span> <span style=color:#a6e22e>v3</span><span style=color:#ae81ff>.3.10</span><span style=color:#f92672>+</span><span style=color:#a6e22e>incompatible</span><span style=color:#f92672>/</span><span style=color:#66d9ef>go</span>.<span style=color:#a6e22e>mod</span> <span style=color:#a6e22e>h1</span>:<span style=color:#ae81ff>0</span><span style=color:#a6e22e>INS7j</span><span style=color:#f92672>/</span><span style=color:#a6e22e>VjnFxD4E2wkz67b8cVwCLbBmJyDaka6Cmk1s</span>=
</span></span><span style=display:flex><span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>gommon</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.2.8</span> <span style=color:#a6e22e>h1</span>:<span style=color:#a6e22e>JvRqmeZcfrHC5u6uVleB4NxxNbzx6gpbJiQknDbKQu0</span>=
</span></span><span style=display:flex><span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>labstack</span><span style=color:#f92672>/</span><span style=color:#a6e22e>gommon</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.2.8</span><span style=color:#f92672>/</span><span style=color:#66d9ef>go</span>.<span style=color:#a6e22e>mod</span> <span style=color:#a6e22e>h1</span>:<span style=color:#f92672>/</span><span style=color:#a6e22e>tj9csK2iPSBvn</span><span style=color:#f92672>+</span><span style=color:#ae81ff>3</span><span style=color:#a6e22e>NLM9e52usepMtrd5ilFYA</span><span style=color:#f92672>+</span><span style=color:#a6e22e>wQNJ4</span>=
</span></span><span style=display:flex><span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>mattn</span><span style=color:#f92672>/</span><span style=color:#66d9ef>go</span><span style=color:#f92672>-</span><span style=color:#a6e22e>colorable</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.1.1</span> <span style=color:#a6e22e>h1</span>:<span style=color:#a6e22e>G1f5SKeVxmagw</span><span style=color:#f92672>/</span><span style=color:#a6e22e>IyvzvtZE4Gybcc4Tr1tf7I8z0XgOg</span>=
</span></span><span style=display:flex><span><span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>mattn</span><span style=color:#f92672>/</span><span style=color:#66d9ef>go</span><span style=color:#f92672>-</span><span style=color:#a6e22e>colorable</span> <span style=color:#a6e22e>v0</span><span style=color:#ae81ff>.1.1</span><span style=color:#f92672>/</span><span style=color:#66d9ef>go</span>.<span style=color:#a6e22e>mod</span> <span style=color:#a6e22e>h1</span>:<span style=color:#a6e22e>FuOcm</span><span style=color:#f92672>+</span><span style=color:#a6e22e>DKB9mbwrcAfNl7</span><span style=color:#f92672>/</span><span style=color:#a6e22e>TZVBZ6rcnceauSikq3lYCQ</span>=
</span></span><span style=display:flex><span><span style=color:#f92672>...</span> <span style=color:#a6e22e>省略很多行</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>复制代码</span>
</span></span></code></pre></div><ol><li>再次执行脚本 <code>go run server.go</code> 发现跳过了检查并安装依赖的步骤。</li><li>可以使用命令 <code>go list -m -u all</code> 来检查可以升级的package，使用<code>go get -u need-upgrade-package</code> 升级后会将新的依赖版本更新到go.mod * 也可以使用 <code>go get -u</code> 升级所有依赖</li></ol><h4 id=go-get-升级>go get 升级<a href=#go-get-升级 class=hanchor arialabel=Anchor>&#8983;</a></h4><ul><li>运行 go get -u 将会升级到最新的次要版本或者修订版本(x.y.z, z是修订版本号， y是次要版本号)</li><li>运行 go get -u=patch 将会升级到最新的修订版本</li><li>运行 go get package<a href=#ZgotmplZ>@version</a> 将会升级到指定的版本号version</li><li>运行go get如果有版本的更改，那么go.mod文件也会更改</li></ul><h3 id=示例二改造现有项目helloword>示例二：改造现有项目(helloword)<a href=#示例二改造现有项目helloword class=hanchor arialabel=Anchor>&#8983;</a></h3><p>项目目录为：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tree
</span></span><span style=display:flex><span>.
</span></span><span style=display:flex><span>├── api
</span></span><span style=display:flex><span>│   └── apis.go
</span></span><span style=display:flex><span>└── server.go
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>1</span> directory, <span style=color:#ae81ff>2</span> files
</span></span></code></pre></div><p>server.go 源码为：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>api</span> <span style=color:#e6db74>&#34;./api&#34;</span>  <span style=color:#75715e>// 这里使用的是相对路径</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/labstack/echo&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>echo</span>.<span style=color:#a6e22e>New</span>()
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>HelloWorld</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Logger</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Start</span>(<span style=color:#e6db74>&#34;:1323&#34;</span>))
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>复制代码</span>
</span></span></code></pre></div><p>api/apis.go 源码为：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>api</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/labstack/echo&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>HelloWorld</span>(<span style=color:#a6e22e>c</span> <span style=color:#a6e22e>echo</span>.<span style=color:#a6e22e>Context</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;hello world&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>复制代码</span>
</span></span></code></pre></div><ol><li>使用 <code>go mod init ***</code> 初始化go.mod</li></ol><pre tabindex=0><code>$ go mod init helloworld
go: creating new go.mod: module helloworld
复制代码
</code></pre><ol><li>运行 <code>go run server.go</code></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go: finding github.com/labstack/gommon/color latest
</span></span><span style=display:flex><span>go: finding github.com/labstack/gommon/log latest
</span></span><span style=display:flex><span>go: finding golang.org/x/crypto/acme/autocert latest
</span></span><span style=display:flex><span>go: finding golang.org/x/crypto/acme latest
</span></span><span style=display:flex><span>go: finding golang.org/x/crypto latest
</span></span><span style=display:flex><span>build command-line-arguments: cannot find module <span style=color:#66d9ef>for</span> path _/home/gs/helloworld/api
</span></span></code></pre></div><p>首先还是会查找并下载安装依赖，然后运行脚本 <code>server.go</code>，这里会抛出一个错误：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>build command-line-arguments: cannot find module <span style=color:#66d9ef>for</span> path _/home/gs/helloworld/api
</span></span></code></pre></div><p>但是<code>go.mod</code> 已经更新：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat go.mod
</span></span><span style=display:flex><span>module helloworld
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>go 1.12
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>require <span style=color:#f92672>(</span>
</span></span><span style=display:flex><span>        github.com/labstack/echo v3.3.10+incompatible // indirect
</span></span><span style=display:flex><span>        github.com/labstack/gommon v0.2.8 // indirect
</span></span><span style=display:flex><span>        github.com/mattn/go-colorable v0.1.1 // indirect
</span></span><span style=display:flex><span>        github.com/mattn/go-isatty v0.0.7 // indirect
</span></span><span style=display:flex><span>        github.com/valyala/fasttemplate v1.0.0 // indirect
</span></span><span style=display:flex><span>        golang.org/x/crypto v0.0.0-20190313024323-a1f597ede03a // indirect
</span></span><span style=display:flex><span><span style=color:#f92672>)</span>
</span></span></code></pre></div><h3 id=那为什么会抛出这个错误呢>那为什么会抛出这个错误呢？<a href=#那为什么会抛出这个错误呢 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>这是因为 server.go 中使用 internal package 的方法跟以前已经不同了，由于 go.mod会扫描同工作目录下所有 package 并且<code>变更引入方法</code>，必须将 helloworld当成路径的前缀，也就是需要写成 import helloworld/api，以往 GOPATH/dep 模式允许的 import ./api 已经失效，详情可以查看这个 <a href=https://github.com/golang/go/issues/26645>issue</a>。</p><ol><li>更新旧的package import 方式</li></ol><p>所以server.go 需要改写成：</p><pre tabindex=0><code>package main

import (
    api &#34;helloworld/api&#34;  // 这是更新后的引入方法
    &#34;github.com/labstack/echo&#34;
)

func main() {
    e := echo.New()
    e.GET(&#34;/&#34;, api.HelloWorld)
    e.Logger.Fatal(e.Start(&#34;:1323&#34;))
}
复制代码
</code></pre><p><code>一个小坑</code>：开始在golang1.11 下使用go mod 遇到过 <code>go build github.com/valyala/fasttemplate: module requires go 1.12</code> <a href=https://github.com/golang/go/issues/27565>这种错误</a>，遇到类似这种需要升级到1.12 的问题，直接升级golang1.12 就好了。幸亏是在1.12 发布后才尝试的<code>go mod</code> 🤷‍♂️</p><h1 id=网络编程>网络编程<a href=#网络编程 class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=最简单的网络编程>最简单的网络编程<a href=#最简单的网络编程 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;io&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;net/http&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>HelloServer</span>(<span style=color:#a6e22e>w</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ResponseWriter</span>, <span style=color:#a6e22e>req</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Request</span>) {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>WriteString</span>(<span style=color:#a6e22e>w</span>, <span style=color:#e6db74>&#34;hello, world!\n&#34;</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandleFunc</span>(<span style=color:#e6db74>&#34;/hello&#34;</span>, <span style=color:#a6e22e>HelloServer</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>ListenAndServeTLS</span>(<span style=color:#e6db74>&#34;:8080&#34;</span>, <span style=color:#e6db74>&#34;cert.pem&#34;</span>, <span style=color:#e6db74>&#34;key.pem&#34;</span>, <span style=color:#66d9ef>nil</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Fatal</span>(<span style=color:#e6db74>&#34;ListenAndServe: &#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=tls服务端和客户端>TLS服务端和客户端<a href=#tls服务端和客户端 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>serve.go</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;bufio&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;crypto/tls&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;net&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>SetFlags</span>(<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Lshortfile</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>key</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>tls</span>.<span style=color:#a6e22e>LoadX509KeyPair</span>(<span style=color:#e6db74>&#34;cert.pem&#34;</span>, <span style=color:#e6db74>&#34;key.pem&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>config</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>tls</span>.<span style=color:#a6e22e>Config</span>{<span style=color:#a6e22e>Certificates</span>: []<span style=color:#a6e22e>tls</span>.<span style=color:#a6e22e>Certificate</span>{<span style=color:#a6e22e>key</span>}}
</span></span><span style=display:flex><span> <span style=color:#a6e22e>ln</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>tls</span>.<span style=color:#a6e22e>Listen</span>(<span style=color:#e6db74>&#34;tcp&#34;</span>, <span style=color:#e6db74>&#34;:8000&#34;</span>, <span style=color:#a6e22e>config</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>ln</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>conn</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ln</span>.<span style=color:#a6e22e>Accept</span>()
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>handleConnection</span>(<span style=color:#a6e22e>conn</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>handleConnection</span>(<span style=color:#a6e22e>conn</span> <span style=color:#a6e22e>net</span>.<span style=color:#a6e22e>Conn</span>) {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span> <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>bufio</span>.<span style=color:#a6e22e>NewReader</span>(<span style=color:#a6e22e>conn</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>msg</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>ReadString</span>(<span style=color:#e6db74>&#39;\n&#39;</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  println(<span style=color:#a6e22e>msg</span>)
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;world\n&#34;</span>))
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>clinet.go</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;crypto/tls&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;log&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span> <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>SetFlags</span>(<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Lshortfile</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>conf</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>tls</span>.<span style=color:#a6e22e>Config</span>{
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>InsecureSkipVerify</span>: <span style=color:#66d9ef>true</span>,
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>conn</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>tls</span>.<span style=color:#a6e22e>Dial</span>(<span style=color:#e6db74>&#34;tcp&#34;</span>, <span style=color:#e6db74>&#34;127.0.0.1:8000&#34;</span>, <span style=color:#a6e22e>conf</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span> <span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Write</span>([]byte(<span style=color:#e6db74>&#34;hello\n&#34;</span>))
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#a6e22e>buf</span> <span style=color:#f92672>:=</span> make([]<span style=color:#66d9ef>byte</span>, <span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>conn</span>.<span style=color:#a6e22e>Read</span>(<span style=color:#a6e22e>buf</span>)
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>n</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> println(string(<span style=color:#a6e22e>buf</span>[:<span style=color:#a6e22e>n</span>]))
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=标准库>标准库<a href=#标准库 class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=flag>flag<a href=#flag class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;errors&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;flag&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;strings&#34;</span>
</span></span><span style=display:flex><span> <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>// 编译
</span></span></span><span style=display:flex><span><span style=color:#75715e>go build demo.go
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>// 帮助信息
</span></span></span><span style=display:flex><span><span style=color:#75715e>demo.exe -h
</span></span></span><span style=display:flex><span><span style=color:#75715e>
</span></span></span><span style=display:flex><span><span style=color:#75715e>// 正常使用
</span></span></span><span style=display:flex><span><span style=color:#75715e>demo.exe -name yang
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#75715e>//demo1()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>demo2</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 第一种用法</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>demo1</span>() {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>nFlag</span> = <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>String</span>(<span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;anthony&#34;</span>, <span style=color:#e6db74>&#34;help message for flag n&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Parse</span>()
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#f92672>*</span><span style=color:#a6e22e>nFlag</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 第二种用法</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>demo2</span>() {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>StringVar</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>name</span>, <span style=color:#e6db74>&#34;name&#34;</span>, <span style=color:#e6db74>&#34;anthonyyang&#34;</span>, <span style=color:#e6db74>&#34;help message for flag n&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Parse</span>()
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>name</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 第三种用法</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>demo3</span>() {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>intervalFlag</span> <span style=color:#a6e22e>mystring</span>
</span></span><span style=display:flex><span> <span style=color:#a6e22e>flag</span>.<span style=color:#a6e22e>Var</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>intervalFlag</span>, <span style=color:#e6db74>&#34;anthonyyang&#34;</span>, <span style=color:#e6db74>&#34;name&#34;</span>)
</span></span><span style=display:flex><span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>intervalFlag</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>mystring</span> []<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Duration</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>mystring</span>) <span style=color:#a6e22e>String</span>() <span style=color:#66d9ef>string</span> {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Sprint</span>()
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>i</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>mystring</span>) <span style=color:#a6e22e>Set</span>(<span style=color:#a6e22e>value</span> <span style=color:#66d9ef>string</span>) <span style=color:#66d9ef>error</span> {
</span></span><span style=display:flex><span> <span style=color:#66d9ef>if</span> len(<span style=color:#f92672>*</span><span style=color:#a6e22e>i</span>) &gt; <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>errors</span>.<span style=color:#a6e22e>New</span>(<span style=color:#e6db74>&#34;interval flag already set&#34;</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>dt</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>strings</span>.<span style=color:#a6e22e>Split</span>(<span style=color:#a6e22e>value</span>, <span style=color:#e6db74>&#34;,&#34;</span>) {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>duration</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>ParseDuration</span>(<span style=color:#a6e22e>dt</span>)
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>err</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>  <span style=color:#f92672>*</span><span style=color:#a6e22e>i</span> = append(<span style=color:#f92672>*</span><span style=color:#a6e22e>i</span>, <span style=color:#a6e22e>duration</span>)
</span></span><span style=display:flex><span> }
</span></span><span style=display:flex><span> <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>nil</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><a href=https://darjun.github.io/2020/01/10/godailylib/flag/>参考</a></p><h2 id=log>log<a href=#log class=hanchor arialabel=Anchor>&#8983;</a></h2><h2 id=io>io<a href=#io class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=ioreader>io.Reader<a href=#ioreader class=hanchor arialabel=Anchor>&#8983;</a></h3><p>对于要用作读取器的类型，它必须实现 <code>io.Reader</code> 接口的唯一一个方法 <code>Read(p []byte)</code>。换句话说，只要实现了 <code>Read(p []byte)</code> ，那它就是一个读取器。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Reader</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Read</span>(<span style=color:#a6e22e>p</span> []<span style=color:#66d9ef>byte</span>) (<span style=color:#a6e22e>n</span> <span style=color:#66d9ef>int</span>, <span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>Read()</code> 方法有两个返回值，一个是读取到的字节数，一个是发生错误时的错误。同时，如果资源内容已全部读取完毕，应该返回 <code>io.EOF</code> 错误。</p><h3 id=iocopy>io.Copy<a href=#iocopy class=hanchor arialabel=Anchor>&#8983;</a></h3><h2 id=sync>sync<a href=#sync class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=syncwaitgroup>sync.WaitGroup<a href=#syncwaitgroup class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 执行代码很可能看不到输出，因为有可能这两个协程还没得到执行主协程已经结束了，而主协程结束时会结束所有其他协程</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Goroutine 1&#34;</span>)
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Goroutine 2&#34;</span>)
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>解决办法:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;time&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 在main函数结尾加上等待</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Goroutine 1&#34;</span>)
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Goroutine 2&#34;</span>)
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Sleep</span>(<span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Second</span> <span style=color:#f92672>*</span> <span style=color:#ae81ff>1</span>) <span style=color:#75715e>// 睡眠1秒，等待上面两个协程结束</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>问题来了,不确定协程到底要用运行多长时间,比如协程需要用到2s,这里<code>main</code>等待1s,就不够用了</p><p>解决办法:用管道</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ch</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>chan</span> <span style=color:#66d9ef>struct</span>{})
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>count</span> <span style=color:#f92672>:=</span> <span style=color:#ae81ff>2</span> <span style=color:#75715e>// count 表示活动的协程个数</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Goroutine 1&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ch</span> <span style=color:#f92672>&lt;-</span> <span style=color:#66d9ef>struct</span>{}{} <span style=color:#75715e>// 协程结束，发出信号</span>
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Goroutine 2&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>ch</span> <span style=color:#f92672>&lt;-</span> <span style=color:#66d9ef>struct</span>{}{} <span style=color:#75715e>// 协程结束，发出信号</span>
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>ch</span> {
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 每次从ch中接收数据，表明一个活动的协程结束</span>
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>count</span><span style=color:#f92672>--</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 当所有活动的协程都结束时，关闭管道</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>count</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span> {
</span></span><span style=display:flex><span>            close(<span style=color:#a6e22e>ch</span>)
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>虽然比较完美的方案，但是Go提供了更简单的方法——使用sync.WaitGroup</p><p>WaitGroup顾名思义，就是用来等待一组操作完成的。</p><p>WaitGroup内部实现了一个计数器，用来记录未完成的操作个数，它提供了三个方法，Add()用来添加计数。</p><p>Done()用来在操作结束时调用，使计数减一。Wait()用来等待所有的操作结束，即计数变为0，该函数会在计数不为0时等待，在计数为0时立即返回</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;sync&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>wg</span> <span style=color:#a6e22e>sync</span>.<span style=color:#a6e22e>WaitGroup</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>wg</span>.<span style=color:#a6e22e>Add</span>(<span style=color:#ae81ff>2</span>) <span style=color:#75715e>// 因为有两个动作，所以增加2个计数</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Goroutine 1&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>wg</span>.<span style=color:#a6e22e>Done</span>() <span style=color:#75715e>// 操作完成，减少一个计数</span>
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>go</span> <span style=color:#66d9ef>func</span>() {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;Goroutine 2&#34;</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>wg</span>.<span style=color:#a6e22e>Done</span>() <span style=color:#75715e>// 操作完成，减少一个计数</span>
</span></span><span style=display:flex><span>    }()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>wg</span>.<span style=color:#a6e22e>Wait</span>() <span style=color:#75715e>// 等待，直到计数为0</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=net>net<a href=#net class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=http>http<a href=#http class=hanchor arialabel=Anchor>&#8983;</a></h3><h4 id=get>Get<a href=#get class=hanchor arialabel=Anchor>&#8983;</a></h4><p>不带参数</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>resp</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#e6db74>&#34;http://fund.eastmoney.com/js/fundcode_search.js&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Body</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>body</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>ioutil</span>.<span style=color:#a6e22e>ReadAll</span>(<span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>Body</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 打印body</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(string(<span style=color:#a6e22e>body</span>))
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 打印状态码</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>StatusCode</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>resp</span>.<span style=color:#a6e22e>StatusCode</span> <span style=color:#f92672>==</span> <span style=color:#ae81ff>200</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;ok&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>parse</span>(string(<span style=color:#a6e22e>body</span>))
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=netlisten>net.Listen<a href=#netlisten class=hanchor arialabel=Anchor>&#8983;</a></h3><p>Listen通知本地网络地址。</p><p>网络必须是“tcp”，“tcp4”，“tcp6”，“unix”或“unixpacket”。</p><p>对于TCP网络，如果地址参数中的主机为空或文字未指定的IP地址，则Listen会监听本地系统的所有可用单播和任播IP地址。</p><p>要仅使用IPv4，请使用网络“tcp4”。</p><p>该地址可以使用主机名称，但不建议这样做，因为它将为主机的至多一个IP地址创建一个监听器。</p><p>如果地址参数中的端口为空或“0”，如“127.0.0.1：”或“:: 1：0”中所示，则会自动选择一个端口号。Listener的Addr方法可用于发现所选端口。</p><pre tabindex=0><code>for retry := 0; retry &lt; 16; retry++ {
    l, err := net.Listen(&#34;tcp&#34;, host+&#34;:0&#34;)
    if err != nil {
        continue
    }
    defer l.Close()
    _, port, err := net.SplitHostPort(l.Addr().String())
    p, err := strconv.ParseInt(port, 10, 32)
    return int(p)
}
</code></pre><h3 id=netconnsetreaddeadline>net.Conn.SetReadDeadline<a href=#netconnsetreaddeadline class=hanchor arialabel=Anchor>&#8983;</a></h3><p>设置超时时间</p><p><code>net.Conn</code>为Deadline提供了多个方法<code>Set[Read|Write]Deadline(time.Time)</code>。</p><p>Deadline是一个绝对时间值，当到达这个时间的时候，所有的 I/O 操作都会失败，返回超时(timeout)错误。</p><h2 id=os>OS<a href=#os class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=stat>Stat<a href=#stat class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;os&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fileinfo</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stat</span>(<span style=color:#e6db74>`C:\Users\Administrator\Desktop\UninstallTool.zip`</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        panic(<span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>fileinfo</span>.<span style=color:#a6e22e>Name</span>())    <span style=color:#75715e>//获取文件名</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>fileinfo</span>.<span style=color:#a6e22e>IsDir</span>())   <span style=color:#75715e>//判断是否是目录，返回bool类型</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>fileinfo</span>.<span style=color:#a6e22e>ModTime</span>()) <span style=color:#75715e>//获取文件修改时间</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>fileinfo</span>.<span style=color:#a6e22e>Mode</span>())
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>fileinfo</span>.<span style=color:#a6e22e>Size</span>()) <span style=color:#75715e>//获取文件大小</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>fileinfo</span>.<span style=color:#a6e22e>Sys</span>())
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>FileInfo</span> <span style=color:#66d9ef>interface</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Name</span>() <span style=color:#66d9ef>string</span>       <span style=color:#75715e>// 文件的名字（不含扩展名）</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Size</span>() <span style=color:#66d9ef>int64</span>        <span style=color:#75715e>// 普通文件返回值表示其大小；其他文件的返回值含义各系统不同</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Mode</span>() <span style=color:#a6e22e>FileMode</span>     <span style=color:#75715e>// 文件的模式位</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ModTime</span>() <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Time</span> <span style=color:#75715e>// 文件的修改时间</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>IsDir</span>() <span style=color:#66d9ef>bool</span>        <span style=color:#75715e>// 等价于Mode().IsDir()</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>Sys</span>() <span style=color:#66d9ef>interface</span>{}   <span style=color:#75715e>// 底层数据来源（可以返回nil）</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=isexist>IsExist<a href=#isexist class=hanchor arialabel=Anchor>&#8983;</a></h3><p>返回一个布尔值说明该错误是否表示一个文件或目录已经存在。ErrExist和一些系统调用错误会使它返回真。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>check</span>() <span style=color:#66d9ef>bool</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>stat</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>Stat</span>(<span style=color:#e6db74>&#34;/Users/anthony/Desktop/go-testt/go.mod&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>IsExist</span>(<span style=color:#a6e22e>err</span>) {
</span></span><span style=display:flex><span>			<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=texttemplate>Text/template<a href=#texttemplate class=hanchor arialabel=Anchor>&#8983;</a></h2><p>html模板 <a href=https://pkg.go.dev/text/template>https://pkg.go.dev/text/template</a></p><h1 id=gin>Gin<a href=#gin class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=demo>Demo<a href=#demo class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;github.com/gin-gonic/gin&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#ae81ff>200</span>, <span style=color:#e6db74>&#34;Hello, Geektutu&#34;</span>)
</span></span><span style=display:flex><span>	})
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>() <span style=color:#75715e>// listen and serve on 0.0.0.0:8080</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=路由>路由<a href=#路由 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>基本使用</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 设置路由</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span><span style=color:#75715e>// 第一个参数是：路径； 第二个参数是：具体操作 func(c *gin.Context)</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/Get&#34;</span>, <span style=color:#a6e22e>getting</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/Post&#34;</span>, <span style=color:#a6e22e>posting</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>PUT</span>(<span style=color:#e6db74>&#34;/Put&#34;</span>, <span style=color:#a6e22e>putting</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>DELETE</span>(<span style=color:#e6db74>&#34;/Delete&#34;</span>, <span style=color:#a6e22e>deleting</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// 默认启动的是 8080端口</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>router</span>.<span style=color:#a6e22e>Run</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 第一种方法:</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>String</span>(<span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>StatusOK</span>, <span style=color:#e6db74>&#34;Who are you?&#34;</span>)
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 第二种方法</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;createApi&#34;</span>, <span style=color:#a6e22e>CreateApi</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>CreateApi</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 代码</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>路由分组</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 两个路由组，都可以访问，大括号是为了保证规范</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>v1</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Group</span>(<span style=color:#e6db74>&#34;/v1&#34;</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 通过 localhost:8080/v1/hello访问，以此类推</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v1</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/hello&#34;</span>, <span style=color:#a6e22e>sayHello</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v1</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/world&#34;</span>, <span style=color:#a6e22e>sayWorld</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>v2</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Group</span>(<span style=color:#e6db74>&#34;/v2&#34;</span>)
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v2</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/hello&#34;</span>, <span style=color:#a6e22e>sayHello</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>v2</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/world&#34;</span>, <span style=color:#a6e22e>sayWorld</span>)
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>(<span style=color:#e6db74>&#34;:8080&#34;</span>)
</span></span></code></pre></div><p>大量路由实现</p><ol><li>建立<code>routers</code>包，将不同模块拆分到<code>多个go文件</code></li><li>每个文件提供<code>一个方法</code>，该方法注册实现所有的路由</li><li>之后main方法在调用文件的方法实现注册</li></ol><p>第一种实现方式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 这里是routers包下某一个router对外开放的方法</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>LoadRouter</span>(<span style=color:#a6e22e>e</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Engine</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>Group</span>(<span style=color:#e6db74>&#34;v1&#34;</span>)
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>v1</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/post&#34;</span>, <span style=color:#a6e22e>postHandler</span>)
</span></span><span style=display:flex><span>  		<span style=color:#a6e22e>v1</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/get&#34;</span>, <span style=color:#a6e22e>getHandler</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  	<span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Default</span>()
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 调用该方法实现注册</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>routers</span>.<span style=color:#a6e22e>LoadRouter</span>(<span style=color:#a6e22e>r</span>)
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>routers</span>.<span style=color:#a6e22e>LoadRouterXXX</span>(<span style=color:#a6e22e>r</span>) <span style=color:#75715e>// 代表还有多个</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Run</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>第二种方式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>像vue一样注册路由</span>,<span style=color:#a6e22e>没看懂项目</span>  <span style=color:#a6e22e>为啥要注册很多次</span>
</span></span></code></pre></div><h2 id=获取参数>获取参数<a href=#获取参数 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>获取body的数据,并绑定实体类</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>b</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>BaseApi</span>) <span style=color:#a6e22e>Login</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 声明实体类</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>l</span> <span style=color:#a6e22e>systemReq</span>.<span style=color:#a6e22e>Login</span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 赋值</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>ShouldBindJSON</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>l</span>)
</span></span><span style=display:flex><span>  <span style=color:#75715e>// 获取ip</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>key</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>ClientIP</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=响应处理>响应处理<a href=#响应处理 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 1.JSON</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/someJSON&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>JSON</span>(<span style=color:#ae81ff>200</span>, <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>H</span>{
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Json&#34;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#34;status&#34;</span>:  <span style=color:#ae81ff>200</span>,
</span></span><span style=display:flex><span>    })
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#75715e>// 2.XML</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/someXML&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>XML</span>(<span style=color:#ae81ff>200</span>, <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>H</span>{<span style=color:#e6db74>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;abc&#34;</span>})
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#75715e>// 3.YAML</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/someYAML&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>YAML</span>(<span style=color:#ae81ff>200</span>, <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>H</span>{<span style=color:#e6db74>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;zhangsan&#34;</span>})
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span><span style=color:#75715e>// 4.protobuf</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/someProtoBuf&#34;</span>, <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>reps</span> <span style=color:#f92672>:=</span> []<span style=color:#66d9ef>int64</span>{<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>}
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>data</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>protoexample</span>.<span style=color:#a6e22e>Test</span>{
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>Reps</span>:  <span style=color:#a6e22e>reps</span>,
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>ProtoBuf</span>(<span style=color:#ae81ff>200</span>, <span style=color:#a6e22e>data</span>)
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><h2 id=中间件>中间件<a href=#中间件 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>中间件分为：<strong>全局中间件</strong> 和 <strong>路由中间件</strong>，区别在于前者会作用于所有路由。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 默认的中间件有</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BasicAuth</span>(<span style=color:#a6e22e>accounts</span> <span style=color:#a6e22e>Accounts</span>) <span style=color:#a6e22e>HandlerFunc</span> <span style=color:#75715e>// 身份认证</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>BasicAuthForRealm</span>(<span style=color:#a6e22e>accounts</span> <span style=color:#a6e22e>Accounts</span>, <span style=color:#a6e22e>realm</span> <span style=color:#66d9ef>string</span>) <span style=color:#a6e22e>HandlerFunc</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Bind</span>(<span style=color:#a6e22e>val</span> <span style=color:#66d9ef>interface</span>{}) <span style=color:#a6e22e>HandlerFunc</span> <span style=color:#75715e>//拦截请求参数并进行绑定</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>ErrorLogger</span>() <span style=color:#a6e22e>HandlerFunc</span>       <span style=color:#75715e>//错误日志处理</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>ErrorLoggerT</span>(<span style=color:#a6e22e>typ</span> <span style=color:#a6e22e>ErrorType</span>) <span style=color:#a6e22e>HandlerFunc</span> <span style=color:#75715e>//自定义类型的错误日志处理</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Logger</span>() <span style=color:#a6e22e>HandlerFunc</span> <span style=color:#75715e>//日志记录</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>LoggerWithConfig</span>(<span style=color:#a6e22e>conf</span> <span style=color:#a6e22e>LoggerConfig</span>) <span style=color:#a6e22e>HandlerFunc</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>LoggerWithFormatter</span>(<span style=color:#a6e22e>f</span> <span style=color:#a6e22e>LogFormatter</span>) <span style=color:#a6e22e>HandlerFunc</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>LoggerWithWriter</span>(<span style=color:#a6e22e>out</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span>, <span style=color:#a6e22e>notlogged</span> <span style=color:#f92672>...</span><span style=color:#66d9ef>string</span>) <span style=color:#a6e22e>HandlerFunc</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Recovery</span>() <span style=color:#a6e22e>HandlerFunc</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>RecoveryWithWriter</span>(<span style=color:#a6e22e>out</span> <span style=color:#a6e22e>io</span>.<span style=color:#a6e22e>Writer</span>) <span style=color:#a6e22e>HandlerFunc</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>WrapF</span>(<span style=color:#a6e22e>f</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>HandlerFunc</span>) <span style=color:#a6e22e>HandlerFunc</span> <span style=color:#75715e>//将http.HandlerFunc包装成中间件</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>WrapH</span>(<span style=color:#a6e22e>h</span> <span style=color:#a6e22e>http</span>.<span style=color:#a6e22e>Handler</span>) <span style=color:#a6e22e>HandlerFunc</span> <span style=color:#75715e>//将http.Handler包装成中间件</span>
</span></span></code></pre></div><p>作用范围</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 作用于全局</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Logger</span>())
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Recovery</span>())
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 作用于单个路由</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>GET</span>(<span style=color:#e6db74>&#34;/benchmark&#34;</span>, <span style=color:#a6e22e>MyBenchLogger</span>(), <span style=color:#a6e22e>benchEndpoint</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 作用于某个组</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>authorized</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>r</span>.<span style=color:#a6e22e>Group</span>(<span style=color:#e6db74>&#34;/&#34;</span>)
</span></span><span style=display:flex><span><span style=color:#a6e22e>authorized</span>.<span style=color:#a6e22e>Use</span>(<span style=color:#a6e22e>AuthRequired</span>())
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>authorized</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/login&#34;</span>, <span style=color:#a6e22e>loginEndpoint</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>authorized</span>.<span style=color:#a6e22e>POST</span>(<span style=color:#e6db74>&#34;/submit&#34;</span>, <span style=color:#a6e22e>submitEndpoint</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>自定义中间件</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Logger</span>() <span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>HandlerFunc</span> {
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>c</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gin</span>.<span style=color:#a6e22e>Context</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>t</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 给Context实例设置一个值</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Set</span>(<span style=color:#e6db74>&#34;geektutu&#34;</span>, <span style=color:#e6db74>&#34;1111&#34;</span>)
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 请求前</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>c</span>.<span style=color:#a6e22e>Next</span>()
</span></span><span style=display:flex><span>		<span style=color:#75715e>// 请求后</span>
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>latency</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Since</span>(<span style=color:#a6e22e>t</span>)
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>log</span>.<span style=color:#a6e22e>Print</span>(<span style=color:#a6e22e>latency</span>)
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>控制中间件</p><h3 id=中间件控制的方法>中间件控制的方法<a href=#中间件控制的方法 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>gin提供了两个函数<code>Abort()</code>和<code>Next()</code>，二者区别在于：</p><blockquote><ol><li>next()函数会跳过当前中间件中next()后的逻辑，当<strong>下一个中间件执行完成后</strong>再执行剩余的逻辑</li><li>abort()函数执行终止当前中间件以后的中间件执行，<strong>但是会执行当前中间件的后续逻辑</strong></li></ol></blockquote><p>举例子更好理解：</p><p>我们注册中间件顺序为<code>m1</code>、<code>m2</code>、<code>m3</code>，如果采用<code>next()</code>：</p><blockquote><p>执行顺序就是</p><ol><li><code>m1的next()前面</code>、<code>m2的next()前面</code>、<code>m3的next()前面</code>、</li><li><code>业务逻辑</code></li><li><code>m3的next()后续</code>、<code>m2的next()后续</code>、<code>m1的next()后续</code>。</li></ol></blockquote><p>那如果<code>m2</code>中间调用了<code>Abort()</code>，则<code>m3</code>和<code>业务逻辑</code>不会执行，只会执行<code>m2的next()后续</code>、<code>m1的next()后续</code>。</p><h1 id=gorm>Gorm<a href=#gorm class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=crud-接口>CRUD 接口<a href=#crud-接口 class=hanchor arialabel=Anchor>&#8983;</a></h2><h2 id=创建>创建<a href=#创建 class=hanchor arialabel=Anchor>&#8983;</a></h2><h3 id=创建记录>创建记录<a href=#创建记录 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 没有数据的字段,就是基本数据</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>user</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>User</span>{<span style=color:#a6e22e>Name</span>: <span style=color:#e6db74>&#34;Jinzhu&#34;</span>, <span style=color:#a6e22e>Age</span>: <span style=color:#ae81ff>18</span>, <span style=color:#a6e22e>Birthday</span>: <span style=color:#a6e22e>time</span>.<span style=color:#a6e22e>Now</span>()}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>result</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>Create</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>user</span>) <span style=color:#75715e>// 通过数据的指针来创建</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>ID</span>             <span style=color:#75715e>// 返回插入数据的主键</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>Error</span>        <span style=color:#75715e>// 返回 error</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>result</span>.<span style=color:#a6e22e>RowsAffected</span> <span style=color:#75715e>// 返回插入记录的条数</span>
</span></span></code></pre></div><h3 id=用指定的字段创建记录>用指定的字段创建记录<a href=#用指定的字段创建记录 class=hanchor arialabel=Anchor>&#8983;</a></h3><p>创建记录并更新给出的字段。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// 没有数据的字段,插入的是null</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>Select</span>(<span style=color:#e6db74>&#34;Name&#34;</span>, <span style=color:#e6db74>&#34;Age&#34;</span>, <span style=color:#e6db74>&#34;CreatedAt&#34;</span>).<span style=color:#a6e22e>Create</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>user</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// INSERT INTO `users` (`name`,`age`,`created_at`) VALUES (&#34;jinzhu&#34;, 18, &#34;2020-07-04 11:05:21.775&#34;)</span>
</span></span></code></pre></div><p>创建一个记录且一同忽略传递给略去的字段值</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>Omit</span>(<span style=color:#e6db74>&#34;Name&#34;</span>, <span style=color:#e6db74>&#34;Age&#34;</span>, <span style=color:#e6db74>&#34;CreatedAt&#34;</span>).<span style=color:#a6e22e>Create</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>user</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// INSERT INTO `users` (`birthday`,`updated_at`) VALUES (&#34;2020-01-01 00:00:00.000&#34;, &#34;2020-07-04 11:05:21.775&#34;)</span>
</span></span></code></pre></div><aside>❓ 用指定的字段创建记录 不返回ID</aside><h3 id=批量插入>批量插入<a href=#批量插入 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>users</span> = []<span style=color:#a6e22e>User</span>{{<span style=color:#a6e22e>Name</span>: <span style=color:#e6db74>&#34;jinzhu1&#34;</span>}, {<span style=color:#a6e22e>Name</span>: <span style=color:#e6db74>&#34;jinzhu2&#34;</span>}, {<span style=color:#a6e22e>Name</span>: <span style=color:#e6db74>&#34;jinzhu3&#34;</span>}}
</span></span><span style=display:flex><span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>Create</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>users</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>user</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>users</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>user</span>.<span style=color:#a6e22e>ID</span> <span style=color:#75715e>// 1,2,3</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 使用 CreateInBatches 分批创建时，你可以指定每批的数量</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>users</span> = []<span style=color:#a6e22e>User</span>{{<span style=color:#a6e22e>name</span>: <span style=color:#e6db74>&#34;jinzhu_1&#34;</span>}, <span style=color:#f92672>...</span>., {<span style=color:#a6e22e>Name</span>: <span style=color:#e6db74>&#34;jinzhu_10000&#34;</span>}}
</span></span><span style=display:flex><span><span style=color:#75715e>// 数量为 100</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>CreateInBatches</span>(<span style=color:#a6e22e>users</span>, <span style=color:#ae81ff>100</span>)
</span></span></code></pre></div><h3 id=创建钩子>创建钩子<a href=#创建钩子 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>SysMenu</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>Model</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 菜单名称</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Title</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 直属上级菜单标识</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>ParentId</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 菜单URL</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Path</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 0：Flase,1：True</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>AlwaysShow</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 组件</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Component</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 0：Flase,1：True</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Hidden</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 图标</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Icon</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 0：Flase,1：True</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>NoCache</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 前端内部名字</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Name</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 前端内部路由</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Redirect</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 0：否，1：是</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>IsButton</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// 请求后端接口</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Ajax</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 钩子</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>SysMenu</span>) <span style=color:#a6e22e>BeforeSave</span>(<span style=color:#a6e22e>tx</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>DB</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;BeforeSave&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>SysMenu</span>) <span style=color:#a6e22e>BeforeCreate</span>(<span style=color:#a6e22e>tx</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>DB</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;BeforeCreate&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>SysMenu</span>) <span style=color:#a6e22e>AfterCreate</span>(<span style=color:#a6e22e>tx</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>DB</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;AfterCreate&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> (<span style=color:#a6e22e>s</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>SysMenu</span>) <span style=color:#a6e22e>AfterSave</span>(<span style=color:#a6e22e>tx</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>gorm</span>.<span style=color:#a6e22e>DB</span>) (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>error</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;AfterSave&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=根据-map-创建>根据 Map 创建<a href=#根据-map-创建 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>Model</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>User</span>{}).<span style=color:#a6e22e>Create</span>(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}{
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#34;Name&#34;</span>: <span style=color:#e6db74>&#34;jinzhu&#34;</span>, <span style=color:#e6db74>&#34;Age&#34;</span>: <span style=color:#ae81ff>18</span>,
</span></span><span style=display:flex><span>})
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// batch insert from `[]map[string]interface{}{}`</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>db</span>.<span style=color:#a6e22e>Model</span>(<span style=color:#f92672>&amp;</span><span style=color:#a6e22e>User</span>{}).<span style=color:#a6e22e>Create</span>([]<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>interface</span>{}{
</span></span><span style=display:flex><span>  {<span style=color:#e6db74>&#34;Name&#34;</span>: <span style=color:#e6db74>&#34;jinzhu_1&#34;</span>, <span style=color:#e6db74>&#34;Age&#34;</span>: <span style=color:#ae81ff>18</span>},
</span></span><span style=display:flex><span>  {<span style=color:#e6db74>&#34;Name&#34;</span>: <span style=color:#e6db74>&#34;jinzhu_2&#34;</span>, <span style=color:#e6db74>&#34;Age&#34;</span>: <span style=color:#ae81ff>20</span>},
</span></span><span style=display:flex><span>})
</span></span></code></pre></div><h3 id=默认值>默认值<a href=#默认值 class=hanchor arialabel=Anchor>&#8983;</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>User</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>ID</span>   <span style=color:#66d9ef>int64</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Name</span> <span style=color:#66d9ef>string</span> <span style=color:#e6db74>`gorm:&#34;default:galeone&#34;`</span>
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>Age</span>  <span style=color:#66d9ef>int64</span>  <span style=color:#e6db74>`gorm:&#34;default:18&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=cobra>Cobra<a href=#cobra class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=简介>简介<a href=#简介 class=hanchor arialabel=Anchor>&#8983;</a></h2><p><a href=http://github.com/spf13/cobra>cobra</a>是一个命令行程序库，可以用来编写命令行程序。</p><h2 id=快速入门>快速入门<a href=#快速入门 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>安装包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>$</span> <span style=color:#66d9ef>go</span> <span style=color:#a6e22e>get</span> <span style=color:#a6e22e>github</span>.<span style=color:#a6e22e>com</span><span style=color:#f92672>/</span><span style=color:#a6e22e>spf13</span><span style=color:#f92672>/</span><span style=color:#a6e22e>cobra</span><span style=color:#f92672>/</span><span style=color:#a6e22e>cobra</span>
</span></span></code></pre></div><p>文件目录</p><pre tabindex=0><code class=language-file data-lang=file>- my-go-test
    - cmd
        - version
        - root
    main.go
</code></pre><p>main.go</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> <span style=color:#e6db74>&#34;go-test/cmd&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>cmd</span>.<span style=color:#a6e22e>Execute</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>version.go</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>package</span> <span style=color:#a6e22e>cmd</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;github.com/spf13/cobra&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>versionCmd</span> = <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>cobra</span>.<span style=color:#a6e22e>Command</span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Use</span>:   <span style=color:#e6db74>&#34;version&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Short</span>: <span style=color:#e6db74>&#34;显示计算器版本&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Long</span>:  <span style=color:#e6db74>&#34;显示计算器版本&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Run</span>: <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>cmd</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>cobra</span>.<span style=color:#a6e22e>Command</span>, <span style=color:#a6e22e>args</span> []<span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;anthony&#39;s jsq version 0.0.1&#34;</span>)
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>init</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>rootCmd</span>.<span style=color:#a6e22e>AddCommand</span>(<span style=color:#a6e22e>versionCmd</span>)
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>root.go</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;github.com/spf13/cobra&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>rootCmd</span> = <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>cobra</span>.<span style=color:#a6e22e>Command</span>{
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Use</span>:   <span style=color:#e6db74>&#34;jsq&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Short</span>: <span style=color:#e6db74>&#34;计算器&#34;</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Long</span>:  <span style=color:#e6db74>`anthony写的计算器`</span>,
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Run</span>: <span style=color:#66d9ef>func</span>(<span style=color:#a6e22e>cmd</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>cobra</span>.<span style=color:#a6e22e>Command</span>, <span style=color:#a6e22e>args</span> []<span style=color:#66d9ef>string</span>) {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;anthony写的计算器,请使用 ./jsq -h&#34;</span>)
</span></span><span style=display:flex><span>	},
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>Execute</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>rootCmd</span>.<span style=color:#a6e22e>Execute</span>()
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=打包运行>打包运行<a href=#打包运行 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># 打包</span>
</span></span><span style=display:flex><span>➜  go-testt go build -o jsq
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 运行不带参数的命令</span>
</span></span><span style=display:flex><span>➜  go-testt ./jsq 
</span></span><span style=display:flex><span>anthony写的计算器,请使用 ./jsq -h
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 运行主命令的help</span>
</span></span><span style=display:flex><span>➜  go-testt ./jsq -help
</span></span><span style=display:flex><span>Error: unknown shorthand flag: <span style=color:#e6db74>&#39;e&#39;</span> in -elp
</span></span><span style=display:flex><span>Usage:
</span></span><span style=display:flex><span>  jsq <span style=color:#f92672>[</span>flags<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>  jsq <span style=color:#f92672>[</span>command<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Available Commands:
</span></span><span style=display:flex><span>  completion  Generate the autocompletion script <span style=color:#66d9ef>for</span> the specified shell
</span></span><span style=display:flex><span>  help        Help about any command
</span></span><span style=display:flex><span>  version     显示计算器版本
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Flags:
</span></span><span style=display:flex><span>  -h, --help   help <span style=color:#66d9ef>for</span> jsq
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Use <span style=color:#e6db74>&#34;jsq [command] --help&#34;</span> <span style=color:#66d9ef>for</span> more information about a command.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># 运行子命令</span>
</span></span><span style=display:flex><span>➜  go-testt ./jsq version -h
</span></span><span style=display:flex><span>显示计算器版本
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Usage:
</span></span><span style=display:flex><span>  jsq version <span style=color:#f92672>[</span>flags<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Flags:
</span></span><span style=display:flex><span>  -h, --help   help <span style=color:#66d9ef>for</span> version
</span></span></code></pre></div><p>包成window包</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>go build -o jsq.exe
</span></span></code></pre></div><h1 id=库>库<a href=#库 class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=yaml解析库>Yaml解析库<a href=#yaml解析库 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go get gopkg.in/yaml.v3
</span></span></code></pre></div><p>测试文件yaml</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>mysql</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>url</span>: <span style=color:#ae81ff>127.0.0.1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>: <span style=color:#ae81ff>3306</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>redis</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>host</span>: <span style=color:#ae81ff>127.0.0.1</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>port</span>: <span style=color:#ae81ff>6379</span>
</span></span></code></pre></div><p>将 <code>yaml</code> 文件的数据转成自定义的结构体或 <code>Map</code></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;gopkg.in/yaml.v3&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#e6db74>&#34;os&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Config</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Mysql</span> <span style=color:#a6e22e>Mysql</span> <span style=color:#e6db74>`json:&#34;mysql&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Redis</span> <span style=color:#a6e22e>Redis</span> <span style=color:#e6db74>`json:&#34;redis&#34;`</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Mysql</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Url</span>  <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Port</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Redis</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Host</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>Port</span> <span style=color:#66d9ef>int</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>dataBytes</span>, <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>os</span>.<span style=color:#a6e22e>ReadFile</span>(<span style=color:#e6db74>&#34;test.yaml&#34;</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;读取文件失败：&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;yaml 文件的内容: \n&#34;</span>, string(<span style=color:#a6e22e>dataBytes</span>))
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>config</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Config</span>{}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>yaml</span>.<span style=color:#a6e22e>Unmarshal</span>(<span style=color:#a6e22e>dataBytes</span>, <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>config</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;解析 yaml 文件失败：&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;config → %+v\n&#34;</span>, <span style=color:#a6e22e>config</span>) <span style=color:#75715e>// config → {Mysql:{Url:127.0.0.1 Port:3306} Redis:{Host:127.0.0.1 Port:6379}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>mp</span> <span style=color:#f92672>:=</span> make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>any</span>, <span style=color:#ae81ff>2</span>)
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>yaml</span>.<span style=color:#a6e22e>Unmarshal</span>(<span style=color:#a6e22e>dataBytes</span>, <span style=color:#a6e22e>mp</span>)
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>		<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;解析 yaml 文件失败：&#34;</span>, <span style=color:#a6e22e>err</span>)
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>return</span>
</span></span><span style=display:flex><span>	}
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Printf</span>(<span style=color:#e6db74>&#34;map → %+v&#34;</span>, <span style=color:#a6e22e>config</span>) <span style=color:#75715e>// config → {Mysql:{Url:127.0.0.1 Port:3306} Redis:{Host:127.0.0.1 Port:6379}}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h2 id=yaml解析库-1>yaml解析库<a href=#yaml解析库-1 class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go get github.com/spf13/viper
</span></span></code></pre></div><p>测试</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt&#34;</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/spf13/viper&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 设置配置文件的名字</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>viper</span>.<span style=color:#a6e22e>SetConfigName</span>(<span style=color:#e6db74>&#34;test&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 设置配置文件的类型</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>viper</span>.<span style=color:#a6e22e>SetConfigType</span>(<span style=color:#e6db74>&#34;yaml&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 添加配置文件的路径，指定 config 目录下寻找</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>viper</span>.<span style=color:#a6e22e>AddConfigPath</span>(<span style=color:#e6db74>&#34;./config&#34;</span>)
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 寻找配置文件并读取</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>err</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>viper</span>.<span style=color:#a6e22e>ReadInConfig</span>()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>            panic(<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Errorf</span>(<span style=color:#e6db74>&#34;fatal error config file: %w&#34;</span>, <span style=color:#a6e22e>err</span>))
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>viper</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#e6db74>&#34;mysql&#34;</span>))     <span style=color:#75715e>// map[port:3306 url:127.0.0.1]</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#a6e22e>viper</span>.<span style=color:#a6e22e>Get</span>(<span style=color:#e6db74>&#34;mysql.url&#34;</span>)) <span style=color:#75715e>// 127.0.0.1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=笔记>笔记<a href=#笔记 class=hanchor arialabel=Anchor>&#8983;</a></h1><h2 id=字符串互转byte>字符串互转byte<a href=#字符串互转byte class=hanchor arialabel=Anchor>&#8983;</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#75715e>// string to []byte</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>s1</span> <span style=color:#f92672>:=</span> <span style=color:#e6db74>&#34;hello&#34;</span> <span style=color:#a6e22e>b</span> <span style=color:#f92672>:=</span> []byte(<span style=color:#a6e22e>s1</span>)
</span></span><span style=display:flex><span><span style=color:#75715e>// []byte to string</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>s2</span> <span style=color:#f92672>:=</span> string(<span style=color:#a6e22e>b</span>)
</span></span></code></pre></div><p>创建对象的方式</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Car</span> <span style=color:#66d9ef>struct</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>color</span> <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>size</span>  <span style=color:#66d9ef>string</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 方式一：使用T{…}方式，结果为值类型</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>c</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Car</span>{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 方式二：使用new的方式，结果为指针类型</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>c1</span> <span style=color:#f92672>:=</span> new(<span style=color:#a6e22e>Car</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 方式三：使用&amp;方式，结果为指针类型</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>c2</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Car</span>{}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 以下为创建并初始化</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>c3</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Car</span>{<span style=color:#e6db74>&#34;红色&#34;</span>, <span style=color:#e6db74>&#34;1.2L&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>c4</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Car</span>{<span style=color:#a6e22e>color</span>: <span style=color:#e6db74>&#34;红色&#34;</span>}
</span></span><span style=display:flex><span><span style=color:#a6e22e>c5</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>Car</span>{<span style=color:#a6e22e>color</span>: <span style=color:#e6db74>&#34;红色&#34;</span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 构造函数：</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// 在Go语言中没有构造函数的概念，对象的创建通常交由一个全局的创建函数来完成，以</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// NewXXX 来命名，表示“构造函数” ：</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>NewCar</span>(<span style=color:#a6e22e>color</span>,<span style=color:#a6e22e>size</span> <span style=color:#66d9ef>string</span>)<span style=color:#f92672>*</span><span style=color:#a6e22e>Car</span>  {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>Car</span>{<span style=color:#a6e22e>color</span>,<span style=color:#a6e22e>size</span>}
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=报错>报错<a href=#报错 class=hanchor arialabel=Anchor>&#8983;</a></h1><p>1.debug call has arguments but no formatting directives</p><p>打印/日志 格式解析错误,错误的原因就是没加<code>%v</code></p><p>2.取消代理</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>go env
</span></span><span style=display:flex><span>GOPROXY<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://goproxy.cn,direct&#39;</span>  <span style=color:#75715e># 这个是国内的代理,在国外不容易下载依赖</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>➜  server git:<span style=color:#f92672>(</span>main<span style=color:#f92672>)</span> ✗ go env -u GOPROXY  <span style=color:#75715e># 取消代理,使用默认的配置</span>
</span></span><span style=display:flex><span>➜  server git:<span style=color:#f92672>(</span>main<span style=color:#f92672>)</span> ✗ go env
</span></span><span style=display:flex><span>GOPROXY<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;https://proxy.golang.org,direct&#39;</span>
</span></span></code></pre></div></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=../../posts/git/><span class=button__icon>←</span>
<span class=button__text>Git</span>
</a></span><span class="button next"><a href=../../posts/grafana/><span class=button__text>Grafana</span>
<span class=button__icon>→</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/mirus-ua/hugo-theme-re-terminal target=_blank>Theme</a> made by <a href=https://github.com/mirus-ua target=_blank>Mirus</a></span></div></div></footer><script type=text/javascript src=../../bundle.min.js></script></div></body></html>