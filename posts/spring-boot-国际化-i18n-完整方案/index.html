<!doctype html><html lang=zh><head><title>Spring Boot å›½é™…åŒ– (i18n) å®Œæ•´æ–¹æ¡ˆ :: Hello World</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content='Spring Boot å›½é™…åŒ– (i18n) å®Œæ•´æ–¹æ¡ˆ åœ¨å¼€å‘å…¨çƒåŒ–åº”ç”¨æ—¶ï¼Œæ”¯æŒå¤šè¯­è¨€ï¼ˆå›½é™…åŒ–ï¼Œi18nï¼‰æ˜¯å…³é”®éœ€æ±‚ä¹‹ä¸€ã€‚æœ¬æ–¹æ¡ˆåŸºäº Spring Bootï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„ å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–ä»¥ä¸‹å†…å®¹ï¼š
å›½é™…åŒ–èµ„æºé…ç½® (messages.properties) æ‹¦æˆªå™¨ (LocaleInterceptor) è§£æ Accept-Language å¤´ åŸºäº LocaleResolver å¤„ç†è¯·æ±‚å¤´çš„å¤šè¯­è¨€è§£æ ç»Ÿä¸€å¼‚å¸¸å¤„ç† (GlobalExceptionHandler) è®©é”™è¯¯æ¶ˆæ¯æ”¯æŒå›½é™…åŒ– æä¾›é»˜è®¤è¯­è¨€ï¼ˆè‹±è¯­ï¼‰æ”¯æŒ 1. å›½é™…åŒ–èµ„æºæ–‡ä»¶é…ç½® Spring Boot é€šè¿‡ messages.properties åŠå…¶ç¿»è¯‘ç‰ˆæœ¬å­˜å‚¨å¤šè¯­è¨€æ¶ˆæ¯ã€‚
é»˜è®¤ messages.propertiesï¼ˆè‹±è¯­ï¼‰
error.notfound=Resource not found. error.internal=Internal server error. ä¸­æ–‡ messages_zh.properties
error.notfound=èµ„æºæœªæ‰¾åˆ°ã€‚ error.internal=æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚ æ³°è¯­ messages_th.properties
error.notfound=à¹„à¸¡à¹ˆà¸à¸šà¸—à¸£à¸±à¸à¸¢à¸²à¸à¸£ error.internal=à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¸‚à¸­à¸‡à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œà¸ à¸²à¸¢à¹ƒà¸™ 2. LocaleConfig.javaï¼ˆLocale è§£æ & è¯­è¨€é»˜è®¤å€¼ï¼‰ ä½¿ç”¨ AcceptHeaderLocaleResolver è§£æ Accept-Language å¤´éƒ¨ï¼Œå¹¶é»˜è®¤ä½¿ç”¨ è‹±è¯­ã€‚
import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.web.servlet.LocaleResolver; import org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver; import java.util.Arrays; import java.util.List; import java.util.Locale; @Configuration public class LocaleConfig { @Bean public LocaleResolver localeResolver() { AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver(); // è®¾ç½®é»˜è®¤è¯­è¨€ä¸ºè‹±è¯­ localeResolver.setDefaultLocale(Locale.ENGLISH); // æŒ‡å®šæ”¯æŒçš„è¯­è¨€ List<Locale> supportedLocales = Arrays.asList(Locale.ENGLISH, Locale.CHINESE, new Locale("th")); localeResolver.setSupportedLocales(supportedLocales); return localeResolver; } } ğŸ“Œ å…³é”®ç‚¹
'><meta name=keywords content><meta name=robots content="noodp"><link rel=canonical href=../../posts/spring-boot-%E5%9B%BD%E9%99%85%E5%8C%96-i18n-%E5%AE%8C%E6%95%B4%E6%96%B9%E6%A1%88/><link rel=stylesheet href=../../styles.css><link rel="shortcut icon" href=../../img/theme-colors/orange.png><link rel=apple-touch-icon href=../../img/theme-colors/orange.png><meta name=twitter:card content="summary"><meta name=twitter:site content><meta name=twitter:creator content="Connor"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="og:title" content="Spring Boot å›½é™…åŒ– (i18n) å®Œæ•´æ–¹æ¡ˆ"><meta property="og:description" content='Spring Boot å›½é™…åŒ– (i18n) å®Œæ•´æ–¹æ¡ˆ åœ¨å¼€å‘å…¨çƒåŒ–åº”ç”¨æ—¶ï¼Œæ”¯æŒå¤šè¯­è¨€ï¼ˆå›½é™…åŒ–ï¼Œi18nï¼‰æ˜¯å…³é”®éœ€æ±‚ä¹‹ä¸€ã€‚æœ¬æ–¹æ¡ˆåŸºäº Spring Bootï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„ å›½é™…åŒ–è§£å†³æ–¹æ¡ˆï¼Œæ¶µç›–ä»¥ä¸‹å†…å®¹ï¼š
å›½é™…åŒ–èµ„æºé…ç½® (messages.properties) æ‹¦æˆªå™¨ (LocaleInterceptor) è§£æ Accept-Language å¤´ åŸºäº LocaleResolver å¤„ç†è¯·æ±‚å¤´çš„å¤šè¯­è¨€è§£æ ç»Ÿä¸€å¼‚å¸¸å¤„ç† (GlobalExceptionHandler) è®©é”™è¯¯æ¶ˆæ¯æ”¯æŒå›½é™…åŒ– æä¾›é»˜è®¤è¯­è¨€ï¼ˆè‹±è¯­ï¼‰æ”¯æŒ 1. å›½é™…åŒ–èµ„æºæ–‡ä»¶é…ç½® Spring Boot é€šè¿‡ messages.properties åŠå…¶ç¿»è¯‘ç‰ˆæœ¬å­˜å‚¨å¤šè¯­è¨€æ¶ˆæ¯ã€‚
é»˜è®¤ messages.propertiesï¼ˆè‹±è¯­ï¼‰
error.notfound=Resource not found. error.internal=Internal server error. ä¸­æ–‡ messages_zh.properties
error.notfound=èµ„æºæœªæ‰¾åˆ°ã€‚ error.internal=æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚ æ³°è¯­ messages_th.properties
error.notfound=à¹„à¸¡à¹ˆà¸à¸šà¸—à¸£à¸±à¸à¸¢à¸²à¸à¸£ error.internal=à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¸‚à¸­à¸‡à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œà¸ à¸²à¸¢à¹ƒà¸™ 2. LocaleConfig.javaï¼ˆLocale è§£æ & è¯­è¨€é»˜è®¤å€¼ï¼‰ ä½¿ç”¨ AcceptHeaderLocaleResolver è§£æ Accept-Language å¤´éƒ¨ï¼Œå¹¶é»˜è®¤ä½¿ç”¨ è‹±è¯­ã€‚
import org.springframework.context.annotation.Bean; import org.springframework.context.annotation.Configuration; import org.springframework.web.servlet.LocaleResolver; import org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver; import java.util.Arrays; import java.util.List; import java.util.Locale; @Configuration public class LocaleConfig { @Bean public LocaleResolver localeResolver() { AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver(); // è®¾ç½®é»˜è®¤è¯­è¨€ä¸ºè‹±è¯­ localeResolver.setDefaultLocale(Locale.ENGLISH); // æŒ‡å®šæ”¯æŒçš„è¯­è¨€ List<Locale> supportedLocales = Arrays.asList(Locale.ENGLISH, Locale.CHINESE, new Locale("th")); localeResolver.setSupportedLocales(supportedLocales); return localeResolver; } } ğŸ“Œ å…³é”®ç‚¹
'><meta property="og:url" content="/posts/spring-boot-%E5%9B%BD%E9%99%85%E5%8C%96-i18n-%E5%AE%8C%E6%95%B4%E6%96%B9%E6%A1%88/"><meta property="og:site_name" content="Hello World"><meta property="og:image" content="/"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="627"><meta property="article:published_time" content="2025-02-05 15:20:37 +0000 UTC"></head><body class=orange><div class="container center headings--one-size"><header class=header><div class=header__inner><div class=header__logo><a href=../../><div class=logo>åº·çº³çš„è®°ä»‡å°æœ¬æœ¬</div></a></div><ul class="menu menu--mobile"><li class=menu__trigger>Menu&nbsp;â–¾</li><li><ul class=menu__dropdown><li><a href=../../about>å…³äº</a></li><li><a href=../../showcase>ç²¾é€‰</a></li></ul></li></ul></div><nav class=navigation-menu><ul class="navigation-menu__inner menu--desktop"><li><a href=../../about>å…³äº</a></li><li><a href=../../showcase>ç²¾é€‰</a></li></ul></nav></header><div class=content><article class=post><h1 class=post-title><a href=../../posts/spring-boot-%E5%9B%BD%E9%99%85%E5%8C%96-i18n-%E5%AE%8C%E6%95%B4%E6%96%B9%E6%A1%88/>Spring Boot å›½é™…åŒ– (i18n) å®Œæ•´æ–¹æ¡ˆ</a></h1><div class=post-meta><time class=post-date>2025-02-05</time><span class=post-author>Connor</span></div><div class=post-content><div><h1 id=spring-boot-å›½é™…åŒ–-i18n-å®Œæ•´æ–¹æ¡ˆ>Spring Boot å›½é™…åŒ– (i18n) å®Œæ•´æ–¹æ¡ˆ<a href=#spring-boot-å›½é™…åŒ–-i18n-å®Œæ•´æ–¹æ¡ˆ class=hanchor arialabel=Anchor>&#8983;</a></h1><p>åœ¨å¼€å‘å…¨çƒåŒ–åº”ç”¨æ—¶ï¼Œæ”¯æŒå¤šè¯­è¨€ï¼ˆå›½é™…åŒ–ï¼Œi18nï¼‰æ˜¯å…³é”®éœ€æ±‚ä¹‹ä¸€ã€‚æœ¬æ–¹æ¡ˆåŸºäº <strong>Spring Boot</strong>ï¼Œå®ç°ä¸€ä¸ªå®Œæ•´çš„ <strong>å›½é™…åŒ–è§£å†³æ–¹æ¡ˆ</strong>ï¼Œæ¶µç›–ä»¥ä¸‹å†…å®¹ï¼š</p><ul><li><strong>å›½é™…åŒ–èµ„æºé…ç½® (<code>messages.properties</code>)</strong></li><li><strong>æ‹¦æˆªå™¨ (<code>LocaleInterceptor</code>) è§£æ <code>Accept-Language</code> å¤´</strong></li><li><strong>åŸºäº <code>LocaleResolver</code> å¤„ç†è¯·æ±‚å¤´çš„å¤šè¯­è¨€è§£æ</strong></li><li><strong>ç»Ÿä¸€å¼‚å¸¸å¤„ç† (<code>GlobalExceptionHandler</code>) è®©é”™è¯¯æ¶ˆæ¯æ”¯æŒå›½é™…åŒ–</strong></li><li><strong>æä¾›é»˜è®¤è¯­è¨€ï¼ˆè‹±è¯­ï¼‰æ”¯æŒ</strong></li></ul><hr><h2 id=1-å›½é™…åŒ–èµ„æºæ–‡ä»¶é…ç½®><strong>1. å›½é™…åŒ–èµ„æºæ–‡ä»¶é…ç½®</strong><a href=#1-å›½é™…åŒ–èµ„æºæ–‡ä»¶é…ç½® class=hanchor arialabel=Anchor>&#8983;</a></h2><p>Spring Boot é€šè¿‡ <code>messages.properties</code> åŠå…¶ç¿»è¯‘ç‰ˆæœ¬å­˜å‚¨å¤šè¯­è¨€æ¶ˆæ¯ã€‚</p><p><strong>é»˜è®¤ <code>messages.properties</code>ï¼ˆè‹±è¯­ï¼‰</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>error.notfound</span><span style=color:#f92672>=</span><span style=color:#e6db74>Resource not found.</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>error.internal</span><span style=color:#f92672>=</span><span style=color:#e6db74>Internal server error.</span>
</span></span></code></pre></div><p><strong>ä¸­æ–‡ <code>messages_zh.properties</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>error.notfound</span><span style=color:#f92672>=</span><span style=color:#e6db74>èµ„æºæœªæ‰¾åˆ°ã€‚</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>error.internal</span><span style=color:#f92672>=</span><span style=color:#e6db74>æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ã€‚</span>
</span></span></code></pre></div><p><strong>æ³°è¯­ <code>messages_th.properties</code></strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-properties data-lang=properties><span style=display:flex><span><span style=color:#a6e22e>error.notfound</span><span style=color:#f92672>=</span><span style=color:#e6db74>à¹„à¸¡à¹ˆà¸à¸šà¸—à¸£à¸±à¸à¸¢à¸²à¸à¸£</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>error.internal</span><span style=color:#f92672>=</span><span style=color:#e6db74>à¸‚à¹‰à¸­à¸œà¸´à¸”à¸à¸¥à¸²à¸”à¸‚à¸­à¸‡à¹€à¸‹à¸´à¸£à¹Œà¸Ÿà¹€à¸§à¸­à¸£à¹Œà¸ à¸²à¸¢à¹ƒà¸™</span>
</span></span></code></pre></div><hr><h2 id=2><strong>2. <code>LocaleConfig.java</code>ï¼ˆLocale è§£æ & è¯­è¨€é»˜è®¤å€¼ï¼‰</strong><a href=#2 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>ä½¿ç”¨ <code>AcceptHeaderLocaleResolver</code> è§£æ <code>Accept-Language</code> å¤´éƒ¨ï¼Œå¹¶é»˜è®¤ä½¿ç”¨ <strong>è‹±è¯­</strong>ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.annotation.Bean;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.annotation.Configuration;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.servlet.LocaleResolver;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.servlet.i18n.AcceptHeaderLocaleResolver;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Arrays;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.List;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Locale;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Configuration</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocaleConfig</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Bean</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> LocaleResolver <span style=color:#a6e22e>localeResolver</span>() {
</span></span><span style=display:flex><span>        AcceptHeaderLocaleResolver localeResolver <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> AcceptHeaderLocaleResolver();
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// è®¾ç½®é»˜è®¤è¯­è¨€ä¸ºè‹±è¯­</span>
</span></span><span style=display:flex><span>        localeResolver.<span style=color:#a6e22e>setDefaultLocale</span>(Locale.<span style=color:#a6e22e>ENGLISH</span>);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#75715e>// æŒ‡å®šæ”¯æŒçš„è¯­è¨€</span>
</span></span><span style=display:flex><span>        List<span style=color:#f92672>&lt;</span>Locale<span style=color:#f92672>&gt;</span> supportedLocales <span style=color:#f92672>=</span> Arrays.<span style=color:#a6e22e>asList</span>(Locale.<span style=color:#a6e22e>ENGLISH</span>, Locale.<span style=color:#a6e22e>CHINESE</span>, <span style=color:#66d9ef>new</span> Locale(<span style=color:#e6db74>&#34;th&#34;</span>));
</span></span><span style=display:flex><span>        localeResolver.<span style=color:#a6e22e>setSupportedLocales</span>(supportedLocales);
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> localeResolver;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>ğŸ“Œ å…³é”®ç‚¹</strong></p><ul><li><code>setDefaultLocale(Locale.ENGLISH)</code> ç¡®ä¿é»˜è®¤è¯­è¨€æ˜¯è‹±è¯­ã€‚</li><li><code>setSupportedLocales(...)</code> æŒ‡å®šæ”¯æŒçš„è¯­è¨€ã€‚</li></ul><hr><h2 id=3><strong>3. <code>LocaleInterceptor.java</code>ï¼ˆæ‹¦æˆªå™¨è§£æ <code>Accept-Language</code> å¤´ï¼‰</strong><a href=#3 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>æ‹¦æˆªè¯·æ±‚å¹¶è§£æ <code>Accept-Language</code> å¤´éƒ¨ï¼š</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> jakarta.servlet.http.HttpServletRequest;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> jakarta.servlet.http.HttpServletResponse;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.servlet.HandlerInterceptor;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.servlet.LocaleResolver;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.servlet.support.RequestContextUtils;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.util.Locale;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>LocaleInterceptor</span> <span style=color:#66d9ef>implements</span> HandlerInterceptor {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Override</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>preHandle</span>(HttpServletRequest request, HttpServletResponse response, Object handler) {
</span></span><span style=display:flex><span>        LocaleResolver localeResolver <span style=color:#f92672>=</span> RequestContextUtils.<span style=color:#a6e22e>getLocaleResolver</span>(request);
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> (localeResolver <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>            String acceptLanguage <span style=color:#f92672>=</span> request.<span style=color:#a6e22e>getHeader</span>(<span style=color:#e6db74>&#34;Accept-Language&#34;</span>);
</span></span><span style=display:flex><span>            Locale locale <span style=color:#f92672>=</span> (acceptLanguage <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span>) <span style=color:#f92672>?</span> Locale.<span style=color:#a6e22e>forLanguageTag</span>(acceptLanguage) : Locale.<span style=color:#a6e22e>ENGLISH</span>;
</span></span><span style=display:flex><span>            localeResolver.<span style=color:#a6e22e>setLocale</span>(request, response, locale);
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>ğŸ“Œ å…³é”®ç‚¹</strong></p><ul><li><strong>æ‹¦æˆª <code>Accept-Language</code> å¤´éƒ¨</strong>ï¼Œè§£ææˆ <code>Locale</code>ã€‚</li><li>å¦‚æœè¯·æ±‚æœªæŒ‡å®šè¯­è¨€ï¼Œ<strong>é»˜è®¤ä½¿ç”¨è‹±è¯­ (<code>Locale.ENGLISH</code>)</strong>ã€‚</li></ul><hr><h2 id=4><strong>4. <code>GlobalExceptionHandler.java</code>ï¼ˆç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼‰</strong><a href=#4 class=hanchor arialabel=Anchor>&#8983;</a></h2><p>ç»Ÿä¸€æ•è·å¼‚å¸¸ï¼Œå¹¶è¿”å›å›½é™…åŒ–æ¶ˆæ¯ã€‚</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.beans.factory.annotation.Autowired;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.MessageSource;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.http.HttpStatus;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.http.ResponseEntity;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.ControllerAdvice;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.web.bind.annotation.ExceptionHandler;
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> org.springframework.context.i18n.LocaleContextHolder;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@ControllerAdvice</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GlobalExceptionHandler</span> {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@Autowired</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> MessageSource messageSource;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ExceptionHandler</span>(ResourceNotFoundException.<span style=color:#a6e22e>class</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>handleResourceNotFound</span>(ResourceNotFoundException ex) {
</span></span><span style=display:flex><span>        String message <span style=color:#f92672>=</span> messageSource.<span style=color:#a6e22e>getMessage</span>(<span style=color:#e6db74>&#34;error.notfound&#34;</span>, <span style=color:#66d9ef>null</span>, LocaleContextHolder.<span style=color:#a6e22e>getLocale</span>());
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>status</span>(HttpStatus.<span style=color:#a6e22e>NOT_FOUND</span>).<span style=color:#a6e22e>body</span>(message);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@ExceptionHandler</span>(Exception.<span style=color:#a6e22e>class</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> ResponseEntity<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>&gt;</span> <span style=color:#a6e22e>handleGlobalException</span>(Exception ex) {
</span></span><span style=display:flex><span>        String message <span style=color:#f92672>=</span> messageSource.<span style=color:#a6e22e>getMessage</span>(<span style=color:#e6db74>&#34;error.internal&#34;</span>, <span style=color:#66d9ef>null</span>, LocaleContextHolder.<span style=color:#a6e22e>getLocale</span>());
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ResponseEntity.<span style=color:#a6e22e>status</span>(HttpStatus.<span style=color:#a6e22e>INTERNAL_SERVER_ERROR</span>).<span style=color:#a6e22e>body</span>(message);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>ğŸ“Œ å…³é”®ç‚¹</strong></p><ul><li><code>LocaleContextHolder.getLocale()</code> è·å–å½“å‰è¯·æ±‚çš„è¯­è¨€ç¯å¢ƒã€‚</li><li><code>messageSource.getMessage("error.notfound", null, locale)</code> è§£æ <code>messages.properties</code> è¿”å›ç¿»è¯‘å†…å®¹ã€‚</li></ul><hr><h2 id=5-æµ‹è¯•-api><strong>5. æµ‹è¯• API</strong><a href=#5-æµ‹è¯•-api class=hanchor arialabel=Anchor>&#8983;</a></h2><p><strong>è¯·æ±‚ 1ï¼šé»˜è®¤è¯­è¨€ï¼ˆè‹±è¯­ï¼‰</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -H <span style=color:#e6db74>&#34;Accept-Language: en&#34;</span> http://localhost:8080/api/resource/999
</span></span></code></pre></div><p>âœ… <strong>è¿”å›</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;Resource not found.&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>è¯·æ±‚ 2ï¼šä¸­æ–‡</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -H <span style=color:#e6db74>&#34;Accept-Language: zh&#34;</span> http://localhost:8080/api/resource/999
</span></span></code></pre></div><p>âœ… <strong>è¿”å›</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;èµ„æºæœªæ‰¾åˆ°ã€‚&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><strong>è¯·æ±‚ 3ï¼šæ³°è¯­</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>curl -H <span style=color:#e6db74>&#34;Accept-Language: th&#34;</span> http://localhost:8080/api/resource/999
</span></span></code></pre></div><p>âœ… <strong>è¿”å›</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;message&#34;</span>: <span style=color:#e6db74>&#34;à¹„à¸¡à¹ˆà¸à¸šà¸—à¸£à¸±à¸à¸¢à¸²à¸à¸£&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><h2 id=6-æ€»ç»“><strong>6. æ€»ç»“</strong><a href=#6-æ€»ç»“ class=hanchor arialabel=Anchor>&#8983;</a></h2><p>âœ… <strong>æ‹¦æˆªå™¨ (<code>LocaleInterceptor</code>)</strong> è§£æ <code>Accept-Language</code> å¤´ï¼ŒæœªæŒ‡å®šæ—¶é»˜è®¤ä½¿ç”¨ <code>Locale.ENGLISH</code>ã€‚<br>âœ… <strong><code>LocaleConfig</code></strong> è®¾å®šé»˜è®¤è¯­è¨€ä¸ºè‹±è¯­ï¼Œæ”¯æŒå¤šè¯­è¨€ã€‚<br>âœ… <strong><code>GlobalExceptionHandler</code></strong> ç»Ÿä¸€å¼‚å¸¸å¤„ç†ï¼Œè¿”å›å›½é™…åŒ–é”™è¯¯æ¶ˆæ¯ã€‚</p><p>æ­¤æ–¹æ¡ˆå¯ç¡®ä¿ <strong>Spring Boot API çš„å›½é™…åŒ–ï¼ˆi18nï¼‰æ— ä¾µå…¥å¼æ”¯æŒ</strong>ï¼Œå¹¶ä¸”é»˜è®¤ä½¿ç”¨ <strong>è‹±è¯­</strong> ğŸš€ã€‚</p></div></div><div class=pagination><div class=pagination__title><span class=pagination__title-h>Read other posts</span><hr></div><div class=pagination__buttons><span class="button previous"><a href=../../posts/%E8%AE%B0%E5%BD%95/flarum/><span class=button__icon>â†</span>
<span class=button__text>Flarum</span>
</a></span><span class="button next"><a href=../../posts/%E9%80%82%E5%90%88%E4%B8%AD%E5%9B%BD%E4%BA%BA%E5%92%8C%E6%B3%B0%E5%9B%BD%E4%BA%BA%E4%B8%80%E8%B5%B7%E5%81%9A%E7%9A%84%E7%94%9F%E6%84%8F/><span class=button__text>é€‚åˆä¸­å›½äººå’Œæ³°å›½äººä¸€èµ·åšçš„ç”Ÿæ„</span>
<span class=button__icon>â†’</span></a></span></div></div></article></div><footer class=footer><div class=footer__inner><div class=copyright><span>Â© 2025 Powered by <a href=https://gohugo.io>Hugo</a></span>
<span>:: <a href=https://github.com/mirus-ua/hugo-theme-re-terminal target=_blank>Theme</a> made by <a href=https://github.com/mirus-ua target=_blank>Mirus</a></span></div></div></footer><script type=text/javascript src=../../bundle.min.js></script></div></body></html>